(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function kb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var om={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function tT(){if(E0)return Hl;E0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var c in o)c!=="key"&&(l[c]=o[c])}else l=o;return o=l.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:l}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var w0;function nT(){return w0||(w0=1,om.exports=tT()),om.exports}var q=nT(),lm={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function rT(){if(T0)return He;T0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),d=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=d&&B[d]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function R(B,re,me){this.props=B,this.context=re,this.refs=E,this.updater=me||_}R.prototype.isReactComponent={},R.prototype.setState=function(B,re){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,re,"setState")},R.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function w(){}w.prototype=R.prototype;function A(B,re,me){this.props=B,this.context=re,this.refs=E,this.updater=me||_}var x=A.prototype=new w;x.constructor=A,v(x,R.prototype),x.isPureReactComponent=!0;var M=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function O(B,re,me,he,_e,Le){return me=Le.ref,{$$typeof:r,type:B,key:re,ref:me!==void 0?me:null,props:Le}}function S(B,re){return O(B.type,re,void 0,void 0,void 0,B.props)}function C(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function D(B){var re={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(me){return re[me]})}var L=/\/+/g;function $(B,re){return typeof B=="object"&&B!==null&&B.key!=null?D(""+B.key):re.toString(36)}function j(){}function ce(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(j,j):(B.status="pending",B.then(function(re){B.status==="pending"&&(B.status="fulfilled",B.value=re)},function(re){B.status==="pending"&&(B.status="rejected",B.reason=re)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function pe(B,re,me,he,_e){var Le=typeof B;(Le==="undefined"||Le==="boolean")&&(B=null);var Ce=!1;if(B===null)Ce=!0;else switch(Le){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(B.$$typeof){case r:case e:Ce=!0;break;case b:return Ce=B._init,pe(Ce(B._payload),re,me,he,_e)}}if(Ce)return _e=_e(B),Ce=he===""?"."+$(B,0):he,M(_e)?(me="",Ce!=null&&(me=Ce.replace(L,"$&/")+"/"),pe(_e,re,me,"",function(Zn){return Zn})):_e!=null&&(C(_e)&&(_e=S(_e,me+(_e.key==null||B&&B.key===_e.key?"":(""+_e.key).replace(L,"$&/")+"/")+Ce)),re.push(_e)),1;Ce=0;var Tt=he===""?".":he+":";if(M(B))for(var gt=0;gt<B.length;gt++)he=B[gt],Le=Tt+$(he,gt),Ce+=pe(he,re,me,Le,_e);else if(gt=y(B),typeof gt=="function")for(B=gt.call(B),gt=0;!(he=B.next()).done;)he=he.value,Le=Tt+$(he,gt++),Ce+=pe(he,re,me,Le,_e);else if(Le==="object"){if(typeof B.then=="function")return pe(ce(B),re,me,he,_e);throw re=String(B),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function K(B,re,me){if(B==null)return B;var he=[],_e=0;return pe(B,he,"","",function(Le){return re.call(me,Le,_e++)}),he}function ae(B){if(B._status===-1){var re=B._result;re=re(),re.then(function(me){(B._status===0||B._status===-1)&&(B._status=1,B._result=me)},function(me){(B._status===0||B._status===-1)&&(B._status=2,B._result=me)}),B._status===-1&&(B._status=0,B._result=re)}if(B._status===1)return B._result.default;throw B._result}var ye=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Re(){}return He.Children={map:K,forEach:function(B,re,me){K(B,function(){re.apply(this,arguments)},me)},count:function(B){var re=0;return K(B,function(){re++}),re},toArray:function(B){return K(B,function(re){return re})||[]},only:function(B){if(!C(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},He.Component=R,He.Fragment=n,He.Profiler=o,He.PureComponent=A,He.StrictMode=s,He.Suspense=m,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,He.__COMPILER_RUNTIME={__proto__:null,c:function(B){return V.H.useMemoCache(B)}},He.cache=function(B){return function(){return B.apply(null,arguments)}},He.cloneElement=function(B,re,me){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var he=v({},B.props),_e=B.key,Le=void 0;if(re!=null)for(Ce in re.ref!==void 0&&(Le=void 0),re.key!==void 0&&(_e=""+re.key),re)!P.call(re,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&re.ref===void 0||(he[Ce]=re[Ce]);var Ce=arguments.length-2;if(Ce===1)he.children=me;else if(1<Ce){for(var Tt=Array(Ce),gt=0;gt<Ce;gt++)Tt[gt]=arguments[gt+2];he.children=Tt}return O(B.type,_e,void 0,void 0,Le,he)},He.createContext=function(B){return B={$$typeof:h,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},He.createElement=function(B,re,me){var he,_e={},Le=null;if(re!=null)for(he in re.key!==void 0&&(Le=""+re.key),re)P.call(re,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(_e[he]=re[he]);var Ce=arguments.length-2;if(Ce===1)_e.children=me;else if(1<Ce){for(var Tt=Array(Ce),gt=0;gt<Ce;gt++)Tt[gt]=arguments[gt+2];_e.children=Tt}if(B&&B.defaultProps)for(he in Ce=B.defaultProps,Ce)_e[he]===void 0&&(_e[he]=Ce[he]);return O(B,Le,void 0,void 0,null,_e)},He.createRef=function(){return{current:null}},He.forwardRef=function(B){return{$$typeof:c,render:B}},He.isValidElement=C,He.lazy=function(B){return{$$typeof:b,_payload:{_status:-1,_result:B},_init:ae}},He.memo=function(B,re){return{$$typeof:g,type:B,compare:re===void 0?null:re}},He.startTransition=function(B){var re=V.T,me={};V.T=me;try{var he=B(),_e=V.S;_e!==null&&_e(me,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Re,ye)}catch(Le){ye(Le)}finally{V.T=re}},He.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},He.use=function(B){return V.H.use(B)},He.useActionState=function(B,re,me){return V.H.useActionState(B,re,me)},He.useCallback=function(B,re){return V.H.useCallback(B,re)},He.useContext=function(B){return V.H.useContext(B)},He.useDebugValue=function(){},He.useDeferredValue=function(B,re){return V.H.useDeferredValue(B,re)},He.useEffect=function(B,re,me){var he=V.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(B,re)},He.useId=function(){return V.H.useId()},He.useImperativeHandle=function(B,re,me){return V.H.useImperativeHandle(B,re,me)},He.useInsertionEffect=function(B,re){return V.H.useInsertionEffect(B,re)},He.useLayoutEffect=function(B,re){return V.H.useLayoutEffect(B,re)},He.useMemo=function(B,re){return V.H.useMemo(B,re)},He.useOptimistic=function(B,re){return V.H.useOptimistic(B,re)},He.useReducer=function(B,re,me){return V.H.useReducer(B,re,me)},He.useRef=function(B){return V.H.useRef(B)},He.useState=function(B){return V.H.useState(B)},He.useSyncExternalStore=function(B,re,me){return V.H.useSyncExternalStore(B,re,me)},He.useTransition=function(){return V.H.useTransition()},He.version="19.1.0",He}var S0;function sp(){return S0||(S0=1,lm.exports=rT()),lm.exports}var Q=sp();const A0=kb(Q);var um={exports:{}},Fl={},cm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function iT(){return R0||(R0=1,function(r){function e(K,ae){var ye=K.length;K.push(ae);e:for(;0<ye;){var Re=ye-1>>>1,B=K[Re];if(0<o(B,ae))K[Re]=ae,K[ye]=B,ye=Re;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ae=K[0],ye=K.pop();if(ye!==ae){K[0]=ye;e:for(var Re=0,B=K.length,re=B>>>1;Re<re;){var me=2*(Re+1)-1,he=K[me],_e=me+1,Le=K[_e];if(0>o(he,ye))_e<B&&0>o(Le,he)?(K[Re]=Le,K[_e]=ye,Re=_e):(K[Re]=he,K[me]=ye,Re=me);else if(_e<B&&0>o(Le,ye))K[Re]=Le,K[_e]=ye,Re=_e;else break e}}return ae}function o(K,ae){var ye=K.sortIndex-ae.sortIndex;return ye!==0?ye:K.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,c=h.now();r.unstable_now=function(){return h.now()-c}}var m=[],g=[],b=1,d=null,y=3,_=!1,v=!1,E=!1,R=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function M(K){for(var ae=n(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=K)s(g),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=n(g)}}function V(K){if(E=!1,M(K),!v)if(n(m)!==null)v=!0,P||(P=!0,$());else{var ae=n(g);ae!==null&&pe(V,ae.startTime-K)}}var P=!1,O=-1,S=5,C=-1;function D(){return R?!0:!(r.unstable_now()-C<S)}function L(){if(R=!1,P){var K=r.unstable_now();C=K;var ae=!0;try{e:{v=!1,E&&(E=!1,A(O),O=-1),_=!0;var ye=y;try{t:{for(M(K),d=n(m);d!==null&&!(d.expirationTime>K&&D());){var Re=d.callback;if(typeof Re=="function"){d.callback=null,y=d.priorityLevel;var B=Re(d.expirationTime<=K);if(K=r.unstable_now(),typeof B=="function"){d.callback=B,M(K),ae=!0;break t}d===n(m)&&s(m),M(K)}else s(m);d=n(m)}if(d!==null)ae=!0;else{var re=n(g);re!==null&&pe(V,re.startTime-K),ae=!1}}break e}finally{d=null,y=ye,_=!1}ae=void 0}}finally{ae?$():P=!1}}}var $;if(typeof x=="function")$=function(){x(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ce=j.port2;j.port1.onmessage=L,$=function(){ce.postMessage(null)}}else $=function(){w(L,0)};function pe(K,ae){O=w(function(){K(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(K){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var ye=y;y=ae;try{return K()}finally{y=ye}},r.unstable_requestPaint=function(){R=!0},r.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ye=y;y=K;try{return ae()}finally{y=ye}},r.unstable_scheduleCallback=function(K,ae,ye){var Re=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Re+ye:Re):ye=Re,K){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ye+B,K={id:b++,callback:ae,priorityLevel:K,startTime:ye,expirationTime:B,sortIndex:-1},ye>Re?(K.sortIndex=ye,e(g,K),n(m)===null&&K===n(g)&&(E?(A(O),O=-1):E=!0,pe(V,ye-Re))):(K.sortIndex=B,e(m,K),v||_||(v=!0,P||(P=!0,$()))),K},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(K){var ae=y;return function(){var ye=y;y=ae;try{return K.apply(this,arguments)}finally{y=ye}}}}(hm)),hm}var C0;function sT(){return C0||(C0=1,cm.exports=iT()),cm.exports}var fm={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function aT(){if(I0)return yn;I0=1;var r=sp();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,g,b){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:d==null?null:""+d,children:m,containerInfo:g,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yn.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,b)},yn.flushSync=function(m){var g=h.T,b=s.p;try{if(h.T=null,s.p=2,m)return m()}finally{h.T=g,s.p=b,s.d.f()}},yn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},yn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},yn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,d=c(b,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:d,integrity:y,fetchPriority:_}):b==="script"&&s.d.X(m,{crossOrigin:d,integrity:y,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},yn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=c(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},yn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,d=c(b,g.crossOrigin);s.d.L(m,b,{crossOrigin:d,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},yn.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=c(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},yn.requestFormReset=function(m){s.d.r(m)},yn.unstable_batchedUpdates=function(m,g){return m(g)},yn.useFormState=function(m,g,b){return h.H.useFormState(m,g,b)},yn.useFormStatus=function(){return h.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var x0;function oT(){if(x0)return fm.exports;x0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fm.exports=aT(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function lT(){if(D0)return Fl;D0=1;var r=sT(),e=sp(),n=oT();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function c(t){if(l(t)!==t)throw Error(s(188))}function m(t){var i=t.alternate;if(!i){if(i=l(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,u=i;;){var p=a.return;if(p===null)break;var T=p.alternate;if(T===null){if(u=p.return,u!==null){a=u;continue}break}if(p.child===T.child){for(T=p.child;T;){if(T===a)return c(p),t;if(T===u)return c(p),i;T=T.sibling}throw Error(s(188))}if(a.return!==u.return)a=p,u=T;else{for(var k=!1,U=p.child;U;){if(U===a){k=!0,a=p,u=T;break}if(U===u){k=!0,u=p,a=T;break}U=U.sibling}if(!k){for(U=T.child;U;){if(U===a){k=!0,a=T,u=p;break}if(U===u){k=!0,u=T,a=p;break}U=U.sibling}if(!k)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,d=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case v:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case V:return"Suspense";case P:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case x:return(t.displayName||"Context")+".Provider";case A:return(t._context.displayName||"Context")+".Consumer";case M:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:ce(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return ce(t(i))}catch{}}return null}var pe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Re=[],B=-1;function re(t){return{current:t}}function me(t){0>B||(t.current=Re[B],Re[B]=null,B--)}function he(t,i){B++,Re[B]=t.current,t.current=i}var _e=re(null),Le=re(null),Ce=re(null),Tt=re(null);function gt(t,i){switch(he(Ce,i),he(Le,t),he(_e,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Qv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Qv(i),t=Xv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(_e),he(_e,t)}function Zn(){me(_e),me(Le),me(Ce)}function At(t){t.memoizedState!==null&&he(Tt,t);var i=_e.current,a=Xv(i,t.type);i!==a&&(he(Le,t),he(_e,a))}function dn(t){Le.current===t&&(me(_e),me(Le)),Tt.current===t&&(me(Tt),Ul._currentValue=ye)}var xr=Object.prototype.hasOwnProperty,ii=r.unstable_scheduleCallback,Sn=r.unstable_cancelCallback,Bs=r.unstable_shouldYield,Oa=r.unstable_requestPaint,An=r.unstable_now,Go=r.unstable_getCurrentPriorityLevel,qs=r.unstable_ImmediatePriority,Ui=r.unstable_UserBlockingPriority,si=r.unstable_NormalPriority,vr=r.unstable_LowPriority,Jn=r.unstable_IdlePriority,zi=r.log,$i=r.unstable_setDisableYieldValue,ut=null,Fe=null;function mn(t){if(typeof zi=="function"&&$i(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(ut,t)}catch{}}var Vt=Math.clz32?Math.clz32:Dr,Na=Math.log,er=Math.LN2;function Dr(t){return t>>>=0,t===0?32:31-(Na(t)/er|0)|0}var Or=256,Nr=4194304;function Ln(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ai(t,i,a){var u=t.pendingLanes;if(u===0)return 0;var p=0,T=t.suspendedLanes,k=t.pingedLanes;t=t.warmLanes;var U=u&134217727;return U!==0?(u=U&~T,u!==0?p=Ln(u):(k&=U,k!==0?p=Ln(k):a||(a=U&~t,a!==0&&(p=Ln(a))))):(U=u&~T,U!==0?p=Ln(U):k!==0?p=Ln(k):a||(a=u&~t,a!==0&&(p=Ln(a)))),p===0?0:i!==0&&i!==p&&(i&T)===0&&(T=p&-p,a=i&-i,T>=a||T===32&&(a&4194048)!==0)?i:p}function tr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Bi(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(){var t=Or;return Or<<=1,(Or&4194048)===0&&(Or=256),t}function Hs(){var t=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),t}function nr(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function _r(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function qi(t,i,a,u,p,T){var k=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var U=t.entanglements,H=t.expirationTimes,ee=t.hiddenUpdates;for(a=k&~a;0<a;){var se=31-Vt(a),ue=1<<se;U[se]=0,H[se]=-1;var te=ee[se];if(te!==null)for(ee[se]=null,se=0;se<te.length;se++){var ne=te[se];ne!==null&&(ne.lane&=-536870913)}a&=~ue}u!==0&&Rn(t,u,0),T!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=T&~(k&~i))}function Rn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var u=31-Vt(i);t.entangledLanes|=i,t.entanglements[u]=t.entanglements[u]|1073741824|a&4194090}function kr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var u=31-Vt(a),p=1<<u;p&i|t[u]&i&&(t[u]|=i),a&=~p}}function Mr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Hi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function F(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:p0(t.type))}function X(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var J=Math.random().toString(36).slice(2),le="__reactFiber$"+J,ge="__reactProps$"+J,Ee="__reactContainer$"+J,Oe="__reactEvents$"+J,we="__reactListeners$"+J,Se="__reactHandles$"+J,Ie="__reactResources$"+J,ke="__reactMarker$"+J;function Ae(t){delete t[le],delete t[ge],delete t[Oe],delete t[we],delete t[Se]}function Pe(t){var i=t[le];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ee]||a[le]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=e0(t);t!==null;){if(a=t[le])return a;t=e0(t)}return i}t=a,a=t.parentNode}return null}function Xe(t){if(t=t[le]||t[Ee]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ht(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function ot(t){var i=t[Ie];return i||(i=t[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function nt(t){t[ke]=!0}var Ye=new Set,rr={};function Bt(t,i){Cn(t,i),Cn(t+"Capture",i)}function Cn(t,i){for(rr[t]=i,t=0;t<i.length;t++)Ye.add(i[t])}var nn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pr={},jn={};function Fi(t){return xr.call(jn,t)?!0:xr.call(Pr,t)?!1:nn.test(t)?jn[t]=!0:(Pr[t]=!0,!1)}function pn(t,i,a){if(Fi(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function In(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function $e(t,i,a,u){if(u===null)t.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+u)}}var Lt,Un;function On(t){if(Lt===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Lt=i&&i[1]||"",Un=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lt+t+Un}var Vr=!1;function Et(t,i){if(!t||Vr)return"";Vr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ne){var te=ne}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(ne){te=ne}t.call(ue.prototype)}}else{try{throw Error()}catch(ne){te=ne}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=u.DetermineComponentFrameRoot(),k=T[0],U=T[1];if(k&&U){var H=k.split(`
`),ee=U.split(`
`);for(p=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;p<ee.length&&!ee[p].includes("DetermineComponentFrameRoot");)p++;if(u===H.length||p===ee.length)for(u=H.length-1,p=ee.length-1;1<=u&&0<=p&&H[u]!==ee[p];)p--;for(;1<=u&&0<=p;u--,p--)if(H[u]!==ee[p]){if(u!==1||p!==1)do if(u--,p--,0>p||H[u]!==ee[p]){var se=`
`+H[u].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=u&&0<=p);break}}}finally{Vr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?On(a):""}function ir(t){switch(t.tag){case 26:case 27:case 5:return On(t.type);case 16:return On("Lazy");case 13:return On("Suspense");case 19:return On("SuspenseList");case 0:case 15:return Et(t.type,!1);case 11:return Et(t.type.render,!1);case 1:return Et(t.type,!0);case 31:return On("Activity");default:return""}}function li(t){try{var i="";do i+=ir(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ko(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function hf(t){var i=Ko(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,T=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return p.call(this)},set:function(k){u=""+k,T.call(this,k)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(k){u=""+k},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ka(t){t._valueTracker||(t._valueTracker=hf(t))}function Yo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return t&&(u=Ko(t)?t.checked?"true":"false":t.value),t=u,t!==a?(i.setValue(t),!0):!1}function Fs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ff=/[\n"\\]/g;function jt(t){return t.replace(ff,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function zn(t,i,a,u,p,T,k,U){t.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.type=k:t.removeAttribute("type"),i!=null?k==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+rn(i)):t.value!==""+rn(i)&&(t.value=""+rn(i)):k!=="submit"&&k!=="reset"||t.removeAttribute("value"),i!=null?Gi(t,k,rn(i)):a!=null?Gi(t,k,rn(a)):u!=null&&t.removeAttribute("value"),p==null&&T!=null&&(t.defaultChecked=!!T),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?t.name=""+rn(U):t.removeAttribute("name")}function Gs(t,i,a,u,p,T,k,U){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.type=T),i!=null||a!=null){if(!(T!=="submit"&&T!=="reset"||i!=null))return;a=a!=null?""+rn(a):"",i=i!=null?""+rn(i):a,U||i===t.value||(t.value=i),t.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=U?t.checked:!!u,t.defaultChecked=!!u,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(t.name=k)}function Gi(t,i,a){i==="number"&&Fs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ui(t,i,a,u){if(t=t.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<t.length;a++)p=i.hasOwnProperty("$"+t[a].value),t[a].selected!==p&&(t[a].selected=p),p&&u&&(t[a].defaultSelected=!0)}else{for(a=""+rn(a),i=null,p=0;p<t.length;p++){if(t[p].value===a){t[p].selected=!0,u&&(t[p].defaultSelected=!0);return}i!==null||t[p].disabled||(i=t[p])}i!==null&&(i.selected=!0)}}function yt(t,i,a){if(i!=null&&(i=""+rn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+rn(a):""}function Ks(t,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(pe(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=rn(i),t.defaultValue=a,u=t.textContent,u===a&&u!==""&&u!==null&&(t.value=u)}function sr(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ku(t,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":u?t.setProperty(i,a):typeof a!="number"||a===0||Ys.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Qo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&a[p]!==u&&ku(t,p,u)}else for(var T in i)i.hasOwnProperty(T)&&ku(t,T,i[T])}function Xo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(t){return mf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ci=null;function ar(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hi=null,fi=null;function Wo(t){var i=Xe(t);if(i&&(t=i.stateNode)){var a=t[ge]||null;e:switch(t=i.stateNode,i.type){case"input":if(zn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==t&&u.form===t.form){var p=u[ge]||null;if(!p)throw Error(s(90));zn(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===t.form&&Yo(u)}break e;case"textarea":yt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ui(t,!!a.multiple,i,!1)}}}var Lr=!1;function Mu(t,i,a){if(Lr)return t(i,a);Lr=!0;try{var u=t(i);return u}finally{if(Lr=!1,(hi!==null||fi!==null)&&(Cc(),hi&&(i=hi,t=fi,fi=hi=null,Wo(i),t)))for(i=0;i<t.length;i++)Wo(t[i])}}function Qs(t,i){var a=t.stateNode;if(a===null)return null;var u=a[ge]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),or=!1;if(br)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){or=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{or=!1}var jr=null,Ki=null,di=null;function Zo(){if(di)return di;var t,i=Ki,a=i.length,u,p="value"in jr?jr.value:jr.textContent,T=p.length;for(t=0;t<a&&i[t]===p[t];t++);var k=a-t;for(u=1;u<=k&&i[a-u]===p[T-u];u++);return di=p.slice(t,1<u?1-u:void 0)}function Ur(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function zr(){return!0}function Jo(){return!1}function Xt(t){function i(a,u,p,T,k){this._reactName=a,this._targetInst=p,this.type=u,this.nativeEvent=T,this.target=k,this.currentTarget=null;for(var U in t)t.hasOwnProperty(U)&&(a=t[U],this[U]=a?a(T):T[U]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?zr:Jo,this.isPropagationStopped=Jo,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),i}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=Xt(ft),Ws=b({},ft,{view:0,detail:0}),Pu=Xt(Ws),Va,La,$r,Zs=b({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$r&&($r&&t.type==="mousemove"?(Va=t.screenX-$r.screenX,La=t.screenY-$r.screenY):La=Va=0,$r=t),Va)},movementY:function(t){return"movementY"in t?t.movementY:La}}),lr=Xt(Zs),Vu=b({},Zs,{dataTransfer:0}),pf=Xt(Vu),Js=b({},Ws,{relatedTarget:0}),ja=Xt(Js),el=b({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=Xt(el),Lu=b({},ft,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),za=Xt(Lu),gf=b({},ft,{data:0}),tl=Xt(gf),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nl(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Uu[t])?!!i[t]:!1}function ta(){return nl}var zu=b({},Ws,{key:function(t){if(t.key){var i=ea[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ju[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(t){return t.type==="keypress"?Ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$a=Xt(zu),$u=b({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rl=Xt($u),mi=b({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),Bu=Xt(mi),qu=b({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hu=Xt(qu),Fu=b({},Zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ba=Xt(Fu),xn=b({},ft,{newState:0,oldState:0}),Gu=Xt(xn),Ku=[9,13,27,32],Br=br&&"CompositionEvent"in window,f=null;br&&"documentMode"in document&&(f=document.documentMode);var I=br&&"TextEvent"in window&&!f,N=br&&(!Br||f&&8<f&&11>=f),z=" ",W=!1;function ie(t,i){switch(t){case"keyup":return Ku.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rt=!1;function qt(t,i){switch(t){case"compositionend":return ve(i);case"keypress":return i.which!==32?null:(W=!0,z);case"textInput":return t=i.data,t===z&&W?null:t;default:return null}}function it(t,i){if(rt)return t==="compositionend"||!Br&&ie(t,i)?(t=Zo(),di=Ki=jr=null,rt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return N&&i.locale!=="ko"?null:i.data;default:return null}}var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Wt[t.type]:i==="textarea"}function pi(t,i,a,u){hi?fi?fi.push(u):fi=[u]:hi=u,i=kc(i,"onChange"),0<i.length&&(a=new Pa("onChange","change",null,a,u),t.push({event:a,listeners:i}))}var sn=null,qr=null;function il(t){Hv(t,0)}function Yu(t){var i=ht(t);if(Yo(i))return t}function hg(t,i){if(t==="change")return i}var fg=!1;if(br){var yf;if(br){var vf="oninput"in document;if(!vf){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),vf=typeof dg.oninput=="function"}yf=vf}else yf=!1;fg=yf&&(!document.documentMode||9<document.documentMode)}function mg(){sn&&(sn.detachEvent("onpropertychange",pg),qr=sn=null)}function pg(t){if(t.propertyName==="value"&&Yu(qr)){var i=[];pi(i,qr,t,ar(t)),Mu(il,i)}}function O1(t,i,a){t==="focusin"?(mg(),sn=i,qr=a,sn.attachEvent("onpropertychange",pg)):t==="focusout"&&mg()}function N1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yu(qr)}function k1(t,i){if(t==="click")return Yu(i)}function M1(t,i){if(t==="input"||t==="change")return Yu(i)}function P1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var $n=typeof Object.is=="function"?Object.is:P1;function sl(t,i){if($n(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var p=a[u];if(!xr.call(i,p)||!$n(t[p],i[p]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yg(t,i){var a=gg(t);t=0;for(var u;a;){if(a.nodeType===3){if(u=t+a.textContent.length,t<=i&&u>=i)return{node:a,offset:i-t};t=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gg(a)}}function vg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?vg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function _g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Fs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Fs(t.document)}return i}function _f(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var V1=br&&"documentMode"in document&&11>=document.documentMode,qa=null,bf=null,al=null,Ef=!1;function bg(t,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ef||qa==null||qa!==Fs(u)||(u=qa,"selectionStart"in u&&_f(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),al&&sl(al,u)||(al=u,u=kc(bf,"onSelect"),0<u.length&&(i=new Pa("onSelect","select",null,i,a),t.push({event:i,listeners:u}),i.target=qa)))}function na(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ha={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},wf={},Eg={};br&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function ra(t){if(wf[t])return wf[t];if(!Ha[t])return t;var i=Ha[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Eg)return wf[t]=i[a];return t}var wg=ra("animationend"),Tg=ra("animationiteration"),Sg=ra("animationstart"),L1=ra("transitionrun"),j1=ra("transitionstart"),U1=ra("transitioncancel"),Ag=ra("transitionend"),Rg=new Map,Tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tf.push("scrollEnd");function Er(t,i){Rg.set(t,i),Bt(i,[t])}var Cg=new WeakMap;function ur(t,i){if(typeof t=="object"&&t!==null){var a=Cg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:li(i)},Cg.set(t,i),i)}return{value:t,source:i,stack:li(i)}}var cr=[],Fa=0,Sf=0;function Qu(){for(var t=Fa,i=Sf=Fa=0;i<t;){var a=cr[i];cr[i++]=null;var u=cr[i];cr[i++]=null;var p=cr[i];cr[i++]=null;var T=cr[i];if(cr[i++]=null,u!==null&&p!==null){var k=u.pending;k===null?p.next=p:(p.next=k.next,k.next=p),u.pending=p}T!==0&&Ig(a,p,T)}}function Xu(t,i,a,u){cr[Fa++]=t,cr[Fa++]=i,cr[Fa++]=a,cr[Fa++]=u,Sf|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Af(t,i,a,u){return Xu(t,i,a,u),Wu(t)}function Ga(t,i){return Xu(t,null,null,i),Wu(t)}function Ig(t,i,a){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a);for(var p=!1,T=t.return;T!==null;)T.childLanes|=a,u=T.alternate,u!==null&&(u.childLanes|=a),T.tag===22&&(t=T.stateNode,t===null||t._visibility&1||(p=!0)),t=T,T=T.return;return t.tag===3?(T=t.stateNode,p&&i!==null&&(p=31-Vt(a),t=T.hiddenUpdates,u=t[p],u===null?t[p]=[i]:u.push(i),i.lane=a|536870912),T):null}function Wu(t){if(50<Ol)throw Ol=0,Od=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ka={};function z1(t,i,a,u){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,i,a,u){return new z1(t,i,a,u)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gi(t,i){var a=t.alternate;return a===null?(a=Bn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function xg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Zu(t,i,a,u,p,T){var k=0;if(u=t,typeof t=="function")Rf(t)&&(k=1);else if(typeof t=="string")k=Bw(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Bn(31,a,i,p),t.elementType=C,t.lanes=T,t;case v:return ia(a.children,p,T,i);case E:k=8,p|=24;break;case R:return t=Bn(12,a,i,p|2),t.elementType=R,t.lanes=T,t;case V:return t=Bn(13,a,i,p),t.elementType=V,t.lanes=T,t;case P:return t=Bn(19,a,i,p),t.elementType=P,t.lanes=T,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w:case x:k=10;break e;case A:k=9;break e;case M:k=11;break e;case O:k=14;break e;case S:k=16,u=null;break e}k=29,a=Error(s(130,t===null?"null":typeof t,"")),u=null}return i=Bn(k,a,i,p),i.elementType=t,i.type=u,i.lanes=T,i}function ia(t,i,a,u){return t=Bn(7,t,u,i),t.lanes=a,t}function Cf(t,i,a){return t=Bn(6,t,null,i),t.lanes=a,t}function If(t,i,a){return i=Bn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ya=[],Qa=0,Ju=null,ec=0,hr=[],fr=0,sa=null,yi=1,vi="";function aa(t,i){Ya[Qa++]=ec,Ya[Qa++]=Ju,Ju=t,ec=i}function Dg(t,i,a){hr[fr++]=yi,hr[fr++]=vi,hr[fr++]=sa,sa=t;var u=yi;t=vi;var p=32-Vt(u)-1;u&=~(1<<p),a+=1;var T=32-Vt(i)+p;if(30<T){var k=p-p%5;T=(u&(1<<k)-1).toString(32),u>>=k,p-=k,yi=1<<32-Vt(i)+p|a<<p|u,vi=T+t}else yi=1<<T|a<<p|u,vi=t}function xf(t){t.return!==null&&(aa(t,1),Dg(t,1,0))}function Df(t){for(;t===Ju;)Ju=Ya[--Qa],Ya[Qa]=null,ec=Ya[--Qa],Ya[Qa]=null;for(;t===sa;)sa=hr[--fr],hr[fr]=null,vi=hr[--fr],hr[fr]=null,yi=hr[--fr],hr[fr]=null}var Dn=null,Dt=null,ct=!1,oa=null,Hr=!1,Of=Error(s(519));function la(t){var i=Error(s(418,""));throw ul(ur(i,t)),Of}function Og(t){var i=t.stateNode,a=t.type,u=t.memoizedProps;switch(i[le]=t,i[ge]=u,a){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(a=0;a<kl.length;a++)Ze(kl[a],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Ze("invalid",i),Gs(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ka(i);break;case"select":Ze("invalid",i);break;case"textarea":Ze("invalid",i),Ks(i,u.value,u.defaultValue,u.children),ka(i)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||Yv(i.textContent,a)?(u.popover!=null&&(Ze("beforetoggle",i),Ze("toggle",i)),u.onScroll!=null&&Ze("scroll",i),u.onScrollEnd!=null&&Ze("scrollend",i),u.onClick!=null&&(i.onclick=Mc),i=!0):i=!1,i||la(t)}function Ng(t){for(Dn=t.return;Dn;)switch(Dn.tag){case 5:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Dn=Dn.return}}function ol(t){if(t!==Dn)return!1;if(!ct)return Ng(t),ct=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Kd(t.type,t.memoizedProps)),a=!a),a&&Dt&&la(t),Ng(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){Dt=Tr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}Dt=null}}else i===27?(i=Dt,us(t.type)?(t=Wd,Wd=null,Dt=t):Dt=i):Dt=Dn?Tr(t.stateNode.nextSibling):null;return!0}function ll(){Dt=Dn=null,ct=!1}function kg(){var t=oa;return t!==null&&(Mn===null?Mn=t:Mn.push.apply(Mn,t),oa=null),t}function ul(t){oa===null?oa=[t]:oa.push(t)}var Nf=re(null),ua=null,_i=null;function Yi(t,i,a){he(Nf,i._currentValue),i._currentValue=a}function bi(t){t._currentValue=Nf.current,me(Nf)}function kf(t,i,a){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===a)break;t=t.return}}function Mf(t,i,a,u){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var T=p.dependencies;if(T!==null){var k=p.child;T=T.firstContext;e:for(;T!==null;){var U=T;T=p;for(var H=0;H<i.length;H++)if(U.context===i[H]){T.lanes|=a,U=T.alternate,U!==null&&(U.lanes|=a),kf(T.return,a,t),u||(k=null);break e}T=U.next}}else if(p.tag===18){if(k=p.return,k===null)throw Error(s(341));k.lanes|=a,T=k.alternate,T!==null&&(T.lanes|=a),kf(k,a,t),k=null}else k=p.child;if(k!==null)k.return=p;else for(k=p;k!==null;){if(k===t){k=null;break}if(p=k.sibling,p!==null){p.return=k.return,k=p;break}k=k.return}p=k}}function cl(t,i,a,u){t=null;for(var p=i,T=!1;p!==null;){if(!T){if((p.flags&524288)!==0)T=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var k=p.alternate;if(k===null)throw Error(s(387));if(k=k.memoizedProps,k!==null){var U=p.type;$n(p.pendingProps.value,k.value)||(t!==null?t.push(U):t=[U])}}else if(p===Tt.current){if(k=p.alternate,k===null)throw Error(s(387));k.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Ul):t=[Ul])}p=p.return}t!==null&&Mf(i,t,a,u),i.flags|=262144}function tc(t){for(t=t.firstContext;t!==null;){if(!$n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ca(t){ua=t,_i=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function gn(t){return Mg(ua,t)}function nc(t,i){return ua===null&&ca(t),Mg(t,i)}function Mg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},_i===null){if(t===null)throw Error(s(308));_i=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else _i=_i.next=i;return a}var $1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,u){t.push(u)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},B1=r.unstable_scheduleCallback,q1=r.unstable_NormalPriority,Ft={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pf(){return{controller:new $1,data:new Map,refCount:0}}function hl(t){t.refCount--,t.refCount===0&&B1(q1,function(){t.controller.abort()})}var fl=null,Vf=0,Xa=0,Wa=null;function H1(t,i){if(fl===null){var a=fl=[];Vf=0,Xa=jd(),Wa={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Vf++,i.then(Pg,Pg),i}function Pg(){if(--Vf===0&&fl!==null){Wa!==null&&(Wa.status="fulfilled");var t=fl;fl=null,Xa=0,Wa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function F1(t,i){var a=[],u={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return t.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<a.length;p++)(0,a[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),u}var Vg=K.S;K.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&H1(t,i),Vg!==null&&Vg(t,i)};var ha=re(null);function Lf(){var t=ha.current;return t!==null?t:St.pooledCache}function rc(t,i){i===null?he(ha,ha.current):he(ha,i.pool)}function Lg(){var t=Lf();return t===null?null:{parent:Ft._currentValue,pool:t}}var dl=Error(s(460)),jg=Error(s(474)),ic=Error(s(542)),jf={then:function(){}};function Ug(t){return t=t.status,t==="fulfilled"||t==="rejected"}function sc(){}function zg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(sc,sc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Bg(t),t;default:if(typeof i.status=="string")i.then(sc,sc);else{if(t=St,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Bg(t),t}throw ml=i,dl}}var ml=null;function $g(){if(ml===null)throw Error(s(459));var t=ml;return ml=null,t}function Bg(t){if(t===dl||t===ic)throw Error(s(483))}var Qi=!1;function Uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Xi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wi(t,i,a){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(mt&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=Wu(t),Ig(t,null,a),i}return Xu(t,u,i,a),Wu(t)}function pl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=t.pendingLanes,a|=u,i.lanes=a,kr(t,a)}}function $f(t,i){var a=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var p=null,T=null;if(a=a.firstBaseUpdate,a!==null){do{var k={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};T===null?p=T=k:T=T.next=k,a=a.next}while(a!==null);T===null?p=T=i:T=T.next=i}else p=T=i;a={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:T,shared:u.shared,callbacks:u.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Bf=!1;function gl(){if(Bf){var t=Wa;if(t!==null)throw t}}function yl(t,i,a,u){Bf=!1;var p=t.updateQueue;Qi=!1;var T=p.firstBaseUpdate,k=p.lastBaseUpdate,U=p.shared.pending;if(U!==null){p.shared.pending=null;var H=U,ee=H.next;H.next=null,k===null?T=ee:k.next=ee,k=H;var se=t.alternate;se!==null&&(se=se.updateQueue,U=se.lastBaseUpdate,U!==k&&(U===null?se.firstBaseUpdate=ee:U.next=ee,se.lastBaseUpdate=H))}if(T!==null){var ue=p.baseState;k=0,se=ee=H=null,U=T;do{var te=U.lane&-536870913,ne=te!==U.lane;if(ne?(st&te)===te:(u&te)===te){te!==0&&te===Xa&&(Bf=!0),se!==null&&(se=se.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var ze=t,Me=U;te=i;var bt=a;switch(Me.tag){case 1:if(ze=Me.payload,typeof ze=="function"){ue=ze.call(bt,ue,te);break e}ue=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Me.payload,te=typeof ze=="function"?ze.call(bt,ue,te):ze,te==null)break e;ue=b({},ue,te);break e;case 2:Qi=!0}}te=U.callback,te!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:U.tag,payload:U.payload,callback:U.callback,next:null},se===null?(ee=se=ne,H=ue):se=se.next=ne,k|=te;if(U=U.next,U===null){if(U=p.shared.pending,U===null)break;ne=U,U=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);se===null&&(H=ue),p.baseState=H,p.firstBaseUpdate=ee,p.lastBaseUpdate=se,T===null&&(p.shared.lanes=0),ss|=k,t.lanes=k,t.memoizedState=ue}}function qg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Hg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)qg(a[t],i)}var Za=re(null),ac=re(0);function Fg(t,i){t=Ci,he(ac,t),he(Za,i),Ci=t|i.baseLanes}function qf(){he(ac,Ci),he(Za,Za.current)}function Hf(){Ci=ac.current,me(Za),me(ac)}var Zi=0,Ge=null,vt=null,Ut=null,oc=!1,Ja=!1,fa=!1,lc=0,vl=0,eo=null,G1=0;function Nt(){throw Error(s(321))}function Ff(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!$n(t[a],i[a]))return!1;return!0}function Gf(t,i,a,u,p,T){return Zi=T,Ge=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?Iy:xy,fa=!1,T=a(u,p),fa=!1,Ja&&(T=Kg(i,a,u,p)),Gg(t),T}function Gg(t){K.H=mc;var i=vt!==null&&vt.next!==null;if(Zi=0,Ut=vt=Ge=null,oc=!1,vl=0,eo=null,i)throw Error(s(300));t===null||Zt||(t=t.dependencies,t!==null&&tc(t)&&(Zt=!0))}function Kg(t,i,a,u){Ge=t;var p=0;do{if(Ja&&(eo=null),vl=0,Ja=!1,25<=p)throw Error(s(301));if(p+=1,Ut=vt=null,t.updateQueue!=null){var T=t.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}K.H=J1,T=i(a,u)}while(Ja);return T}function K1(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?_l(i):i,t=t.useState()[0],(vt!==null?vt.memoizedState:null)!==t&&(Ge.flags|=1024),i}function Kf(){var t=lc!==0;return lc=0,t}function Yf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Qf(t){if(oc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}oc=!1}Zi=0,Ut=vt=Ge=null,Ja=!1,vl=lc=0,eo=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ge.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function zt(){if(vt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var i=Ut===null?Ge.memoizedState:Ut.next;if(i!==null)Ut=i,vt=t;else{if(t===null)throw Ge.alternate===null?Error(s(467)):Error(s(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Ut===null?Ge.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function Xf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(t){var i=vl;return vl+=1,eo===null&&(eo=[]),t=zg(eo,t,i),i=Ge,(Ut===null?i.memoizedState:Ut.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Iy:xy),t}function uc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _l(t);if(t.$$typeof===x)return gn(t)}throw Error(s(438,String(t)))}function Wf(t){var i=null,a=Ge.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=Ge.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Xf(),Ge.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),u=0;u<t;u++)a[u]=D;return i.index++,a}function Ei(t,i){return typeof i=="function"?i(t):i}function cc(t){var i=zt();return Zf(i,vt,t)}function Zf(t,i,a){var u=t.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=t.baseQueue,T=u.pending;if(T!==null){if(p!==null){var k=p.next;p.next=T.next,T.next=k}i.baseQueue=p=T,u.pending=null}if(T=t.baseState,p===null)t.memoizedState=T;else{i=p.next;var U=k=null,H=null,ee=i,se=!1;do{var ue=ee.lane&-536870913;if(ue!==ee.lane?(st&ue)===ue:(Zi&ue)===ue){var te=ee.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ue===Xa&&(se=!0);else if((Zi&te)===te){ee=ee.next,te===Xa&&(se=!0);continue}else ue={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(U=H=ue,k=T):H=H.next=ue,Ge.lanes|=te,ss|=te;ue=ee.action,fa&&a(T,ue),T=ee.hasEagerState?ee.eagerState:a(T,ue)}else te={lane:ue,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(U=H=te,k=T):H=H.next=te,Ge.lanes|=ue,ss|=ue;ee=ee.next}while(ee!==null&&ee!==i);if(H===null?k=T:H.next=U,!$n(T,t.memoizedState)&&(Zt=!0,se&&(a=Wa,a!==null)))throw a;t.memoizedState=T,t.baseState=k,t.baseQueue=H,u.lastRenderedState=T}return p===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function Jf(t){var i=zt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var u=a.dispatch,p=a.pending,T=i.memoizedState;if(p!==null){a.pending=null;var k=p=p.next;do T=t(T,k.action),k=k.next;while(k!==p);$n(T,i.memoizedState)||(Zt=!0),i.memoizedState=T,i.baseQueue===null&&(i.baseState=T),a.lastRenderedState=T}return[T,u]}function Yg(t,i,a){var u=Ge,p=zt(),T=ct;if(T){if(a===void 0)throw Error(s(407));a=a()}else a=i();var k=!$n((vt||p).memoizedState,a);k&&(p.memoizedState=a,Zt=!0),p=p.queue;var U=Wg.bind(null,u,p,t);if(bl(2048,8,U,[t]),p.getSnapshot!==i||k||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,to(9,hc(),Xg.bind(null,u,p,a,i),null),St===null)throw Error(s(349));T||(Zi&124)!==0||Qg(u,i,a)}return a}function Qg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ge.updateQueue,i===null?(i=Xf(),Ge.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Xg(t,i,a,u){i.value=a,i.getSnapshot=u,Zg(i)&&Jg(t)}function Wg(t,i,a){return a(function(){Zg(i)&&Jg(t)})}function Zg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!$n(t,a)}catch{return!0}}function Jg(t){var i=Ga(t,2);i!==null&&Kn(i,t,2)}function ed(t){var i=Nn();if(typeof t=="function"){var a=t;if(t=a(),fa){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:t},i}function ey(t,i,a,u){return t.baseState=a,Zf(t,vt,typeof u=="function"?u:Ei)}function Y1(t,i,a,u,p){if(dc(t))throw Error(s(485));if(t=i.action,t!==null){var T={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){T.listeners.push(k)}};K.T!==null?a(!0):T.isTransition=!1,u(T),a=i.pending,a===null?(T.next=i.pending=T,ty(i,T)):(T.next=a.next,i.pending=a.next=T)}}function ty(t,i){var a=i.action,u=i.payload,p=t.state;if(i.isTransition){var T=K.T,k={};K.T=k;try{var U=a(p,u),H=K.S;H!==null&&H(k,U),ny(t,i,U)}catch(ee){td(t,i,ee)}finally{K.T=T}}else try{T=a(p,u),ny(t,i,T)}catch(ee){td(t,i,ee)}}function ny(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){ry(t,i,u)},function(u){return td(t,i,u)}):ry(t,i,a)}function ry(t,i,a){i.status="fulfilled",i.value=a,iy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ty(t,a)))}function td(t,i,a){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,iy(i),i=i.next;while(i!==u)}t.action=null}function iy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function sy(t,i){return i}function ay(t,i){if(ct){var a=St.formState;if(a!==null){e:{var u=Ge;if(ct){if(Dt){t:{for(var p=Dt,T=Hr;p.nodeType!==8;){if(!T){p=null;break t}if(p=Tr(p.nextSibling),p===null){p=null;break t}}T=p.data,p=T==="F!"||T==="F"?p:null}if(p){Dt=Tr(p.nextSibling),u=p.data==="F!";break e}}la(u)}u=!1}u&&(i=a[0])}}return a=Nn(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sy,lastRenderedState:i},a.queue=u,a=Ay.bind(null,Ge,u),u.dispatch=a,u=ed(!1),T=ad.bind(null,Ge,!1,u.queue),u=Nn(),p={state:i,dispatch:null,action:t,pending:null},u.queue=p,a=Y1.bind(null,Ge,p,T,a),p.dispatch=a,u.memoizedState=t,[i,a,!1]}function oy(t){var i=zt();return ly(i,vt,t)}function ly(t,i,a){if(i=Zf(t,i,sy)[0],t=cc(Ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=_l(i)}catch(k){throw k===dl?ic:k}else u=i;i=zt();var p=i.queue,T=p.dispatch;return a!==i.memoizedState&&(Ge.flags|=2048,to(9,hc(),Q1.bind(null,p,a),null)),[u,T,t]}function Q1(t,i){t.action=i}function uy(t){var i=zt(),a=vt;if(a!==null)return ly(i,a,t);zt(),i=i.memoizedState,a=zt();var u=a.queue.dispatch;return a.memoizedState=t,[i,u,!1]}function to(t,i,a,u){return t={tag:t,create:a,deps:u,inst:i,next:null},i=Ge.updateQueue,i===null&&(i=Xf(),Ge.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(u=a.next,a.next=t,t.next=u,i.lastEffect=t),t}function hc(){return{destroy:void 0,resource:void 0}}function cy(){return zt().memoizedState}function fc(t,i,a,u){var p=Nn();u=u===void 0?null:u,Ge.flags|=t,p.memoizedState=to(1|i,hc(),a,u)}function bl(t,i,a,u){var p=zt();u=u===void 0?null:u;var T=p.memoizedState.inst;vt!==null&&u!==null&&Ff(u,vt.memoizedState.deps)?p.memoizedState=to(i,T,a,u):(Ge.flags|=t,p.memoizedState=to(1|i,T,a,u))}function hy(t,i){fc(8390656,8,t,i)}function fy(t,i){bl(2048,8,t,i)}function dy(t,i){return bl(4,2,t,i)}function my(t,i){return bl(4,4,t,i)}function py(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function gy(t,i,a){a=a!=null?a.concat([t]):null,bl(4,4,py.bind(null,i,t),a)}function nd(){}function yy(t,i){var a=zt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&Ff(i,u[1])?u[0]:(a.memoizedState=[t,i],t)}function vy(t,i){var a=zt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&Ff(i,u[1]))return u[0];if(u=t(),fa){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[u,i],u}function rd(t,i,a){return a===void 0||(Zi&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Ev(),Ge.lanes|=t,ss|=t,a)}function _y(t,i,a,u){return $n(a,i)?a:Za.current!==null?(t=rd(t,a,u),$n(t,i)||(Zt=!0),t):(Zi&42)===0?(Zt=!0,t.memoizedState=a):(t=Ev(),Ge.lanes|=t,ss|=t,i)}function by(t,i,a,u,p){var T=ae.p;ae.p=T!==0&&8>T?T:8;var k=K.T,U={};K.T=U,ad(t,!1,i,a);try{var H=p(),ee=K.S;if(ee!==null&&ee(U,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var se=F1(H,u);El(t,i,se,Gn(t))}else El(t,i,u,Gn(t))}catch(ue){El(t,i,{then:function(){},status:"rejected",reason:ue},Gn())}finally{ae.p=T,K.T=k}}function X1(){}function id(t,i,a,u){if(t.tag!==5)throw Error(s(476));var p=Ey(t).queue;by(t,p,i,ye,a===null?X1:function(){return wy(t),a(u)})}function Ey(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function wy(t){var i=Ey(t).next.queue;El(t,i,{},Gn())}function sd(){return gn(Ul)}function Ty(){return zt().memoizedState}function Sy(){return zt().memoizedState}function W1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Gn();t=Xi(a);var u=Wi(i,t,a);u!==null&&(Kn(u,i,a),pl(u,i,a)),i={cache:Pf()},t.payload=i;return}i=i.return}}function Z1(t,i,a){var u=Gn();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},dc(t)?Ry(i,a):(a=Af(t,i,a,u),a!==null&&(Kn(a,t,u),Cy(a,i,u)))}function Ay(t,i,a){var u=Gn();El(t,i,a,u)}function El(t,i,a,u){var p={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(dc(t))Ry(i,p);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=i.lastRenderedReducer,T!==null))try{var k=i.lastRenderedState,U=T(k,a);if(p.hasEagerState=!0,p.eagerState=U,$n(U,k))return Xu(t,i,p,0),St===null&&Qu(),!1}catch{}finally{}if(a=Af(t,i,p,u),a!==null)return Kn(a,t,u),Cy(a,i,u),!0}return!1}function ad(t,i,a,u){if(u={lane:2,revertLane:jd(),action:u,hasEagerState:!1,eagerState:null,next:null},dc(t)){if(i)throw Error(s(479))}else i=Af(t,a,u,2),i!==null&&Kn(i,t,2)}function dc(t){var i=t.alternate;return t===Ge||i!==null&&i===Ge}function Ry(t,i){Ja=oc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Cy(t,i,a){if((a&4194048)!==0){var u=i.lanes;u&=t.pendingLanes,a|=u,i.lanes=a,kr(t,a)}}var mc={readContext:gn,use:uc,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},Iy={readContext:gn,use:uc,useCallback:function(t,i){return Nn().memoizedState=[t,i===void 0?null:i],t},useContext:gn,useEffect:hy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,fc(4194308,4,py.bind(null,i,t),a)},useLayoutEffect:function(t,i){return fc(4194308,4,t,i)},useInsertionEffect:function(t,i){fc(4,2,t,i)},useMemo:function(t,i){var a=Nn();i=i===void 0?null:i;var u=t();if(fa){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[u,i],u},useReducer:function(t,i,a){var u=Nn();if(a!==void 0){var p=a(i);if(fa){mn(!0);try{a(i)}finally{mn(!1)}}}else p=i;return u.memoizedState=u.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},u.queue=t,t=t.dispatch=Z1.bind(null,Ge,t),[u.memoizedState,t]},useRef:function(t){var i=Nn();return t={current:t},i.memoizedState=t},useState:function(t){t=ed(t);var i=t.queue,a=Ay.bind(null,Ge,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:nd,useDeferredValue:function(t,i){var a=Nn();return rd(a,t,i)},useTransition:function(){var t=ed(!1);return t=by.bind(null,Ge,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var u=Ge,p=Nn();if(ct){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),St===null)throw Error(s(349));(st&124)!==0||Qg(u,i,a)}p.memoizedState=a;var T={value:a,getSnapshot:i};return p.queue=T,hy(Wg.bind(null,u,T,t),[t]),u.flags|=2048,to(9,hc(),Xg.bind(null,u,T,a,i),null),a},useId:function(){var t=Nn(),i=St.identifierPrefix;if(ct){var a=vi,u=yi;a=(u&~(1<<32-Vt(u)-1)).toString(32)+a,i="«"+i+"R"+a,a=lc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=G1++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:sd,useFormState:ay,useActionState:ay,useOptimistic:function(t){var i=Nn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ad.bind(null,Ge,!0,a),a.dispatch=i,[t,i]},useMemoCache:Wf,useCacheRefresh:function(){return Nn().memoizedState=W1.bind(null,Ge)}},xy={readContext:gn,use:uc,useCallback:yy,useContext:gn,useEffect:fy,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:my,useMemo:vy,useReducer:cc,useRef:cy,useState:function(){return cc(Ei)},useDebugValue:nd,useDeferredValue:function(t,i){var a=zt();return _y(a,vt.memoizedState,t,i)},useTransition:function(){var t=cc(Ei)[0],i=zt().memoizedState;return[typeof t=="boolean"?t:_l(t),i]},useSyncExternalStore:Yg,useId:Ty,useHostTransitionStatus:sd,useFormState:oy,useActionState:oy,useOptimistic:function(t,i){var a=zt();return ey(a,vt,t,i)},useMemoCache:Wf,useCacheRefresh:Sy},J1={readContext:gn,use:uc,useCallback:yy,useContext:gn,useEffect:fy,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:my,useMemo:vy,useReducer:Jf,useRef:cy,useState:function(){return Jf(Ei)},useDebugValue:nd,useDeferredValue:function(t,i){var a=zt();return vt===null?rd(a,t,i):_y(a,vt.memoizedState,t,i)},useTransition:function(){var t=Jf(Ei)[0],i=zt().memoizedState;return[typeof t=="boolean"?t:_l(t),i]},useSyncExternalStore:Yg,useId:Ty,useHostTransitionStatus:sd,useFormState:uy,useActionState:uy,useOptimistic:function(t,i){var a=zt();return vt!==null?ey(a,vt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Wf,useCacheRefresh:Sy},no=null,wl=0;function pc(t){var i=wl;return wl+=1,no===null&&(no=[]),zg(no,t,i)}function Tl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function gc(t,i){throw i.$$typeof===d?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Dy(t){var i=t._init;return i(t._payload)}function Oy(t){function i(Y,G){if(t){var Z=Y.deletions;Z===null?(Y.deletions=[G],Y.flags|=16):Z.push(G)}}function a(Y,G){if(!t)return null;for(;G!==null;)i(Y,G),G=G.sibling;return null}function u(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function p(Y,G){return Y=gi(Y,G),Y.index=0,Y.sibling=null,Y}function T(Y,G,Z){return Y.index=Z,t?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<G?(Y.flags|=67108866,G):Z):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function k(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function U(Y,G,Z,oe){return G===null||G.tag!==6?(G=Cf(Z,Y.mode,oe),G.return=Y,G):(G=p(G,Z),G.return=Y,G)}function H(Y,G,Z,oe){var Te=Z.type;return Te===v?se(Y,G,Z.props.children,oe,Z.key):G!==null&&(G.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===S&&Dy(Te)===G.type)?(G=p(G,Z.props),Tl(G,Z),G.return=Y,G):(G=Zu(Z.type,Z.key,Z.props,null,Y.mode,oe),Tl(G,Z),G.return=Y,G)}function ee(Y,G,Z,oe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=If(Z,Y.mode,oe),G.return=Y,G):(G=p(G,Z.children||[]),G.return=Y,G)}function se(Y,G,Z,oe,Te){return G===null||G.tag!==7?(G=ia(Z,Y.mode,oe,Te),G.return=Y,G):(G=p(G,Z),G.return=Y,G)}function ue(Y,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Cf(""+G,Y.mode,Z),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return Z=Zu(G.type,G.key,G.props,null,Y.mode,Z),Tl(Z,G),Z.return=Y,Z;case _:return G=If(G,Y.mode,Z),G.return=Y,G;case S:var oe=G._init;return G=oe(G._payload),ue(Y,G,Z)}if(pe(G)||$(G))return G=ia(G,Y.mode,Z,null),G.return=Y,G;if(typeof G.then=="function")return ue(Y,pc(G),Z);if(G.$$typeof===x)return ue(Y,nc(Y,G),Z);gc(Y,G)}return null}function te(Y,G,Z,oe){var Te=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Te!==null?null:U(Y,G,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return Z.key===Te?H(Y,G,Z,oe):null;case _:return Z.key===Te?ee(Y,G,Z,oe):null;case S:return Te=Z._init,Z=Te(Z._payload),te(Y,G,Z,oe)}if(pe(Z)||$(Z))return Te!==null?null:se(Y,G,Z,oe,null);if(typeof Z.then=="function")return te(Y,G,pc(Z),oe);if(Z.$$typeof===x)return te(Y,G,nc(Y,Z),oe);gc(Y,Z)}return null}function ne(Y,G,Z,oe,Te){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Y=Y.get(Z)||null,U(G,Y,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return Y=Y.get(oe.key===null?Z:oe.key)||null,H(G,Y,oe,Te);case _:return Y=Y.get(oe.key===null?Z:oe.key)||null,ee(G,Y,oe,Te);case S:var Qe=oe._init;return oe=Qe(oe._payload),ne(Y,G,Z,oe,Te)}if(pe(oe)||$(oe))return Y=Y.get(Z)||null,se(G,Y,oe,Te,null);if(typeof oe.then=="function")return ne(Y,G,Z,pc(oe),Te);if(oe.$$typeof===x)return ne(Y,G,Z,nc(G,oe),Te);gc(G,oe)}return null}function ze(Y,G,Z,oe){for(var Te=null,Qe=null,xe=G,Ve=G=0,en=null;xe!==null&&Ve<Z.length;Ve++){xe.index>Ve?(en=xe,xe=null):en=xe.sibling;var lt=te(Y,xe,Z[Ve],oe);if(lt===null){xe===null&&(xe=en);break}t&&xe&&lt.alternate===null&&i(Y,xe),G=T(lt,G,Ve),Qe===null?Te=lt:Qe.sibling=lt,Qe=lt,xe=en}if(Ve===Z.length)return a(Y,xe),ct&&aa(Y,Ve),Te;if(xe===null){for(;Ve<Z.length;Ve++)xe=ue(Y,Z[Ve],oe),xe!==null&&(G=T(xe,G,Ve),Qe===null?Te=xe:Qe.sibling=xe,Qe=xe);return ct&&aa(Y,Ve),Te}for(xe=u(xe);Ve<Z.length;Ve++)en=ne(xe,Y,Ve,Z[Ve],oe),en!==null&&(t&&en.alternate!==null&&xe.delete(en.key===null?Ve:en.key),G=T(en,G,Ve),Qe===null?Te=en:Qe.sibling=en,Qe=en);return t&&xe.forEach(function(ms){return i(Y,ms)}),ct&&aa(Y,Ve),Te}function Me(Y,G,Z,oe){if(Z==null)throw Error(s(151));for(var Te=null,Qe=null,xe=G,Ve=G=0,en=null,lt=Z.next();xe!==null&&!lt.done;Ve++,lt=Z.next()){xe.index>Ve?(en=xe,xe=null):en=xe.sibling;var ms=te(Y,xe,lt.value,oe);if(ms===null){xe===null&&(xe=en);break}t&&xe&&ms.alternate===null&&i(Y,xe),G=T(ms,G,Ve),Qe===null?Te=ms:Qe.sibling=ms,Qe=ms,xe=en}if(lt.done)return a(Y,xe),ct&&aa(Y,Ve),Te;if(xe===null){for(;!lt.done;Ve++,lt=Z.next())lt=ue(Y,lt.value,oe),lt!==null&&(G=T(lt,G,Ve),Qe===null?Te=lt:Qe.sibling=lt,Qe=lt);return ct&&aa(Y,Ve),Te}for(xe=u(xe);!lt.done;Ve++,lt=Z.next())lt=ne(xe,Y,Ve,lt.value,oe),lt!==null&&(t&&lt.alternate!==null&&xe.delete(lt.key===null?Ve:lt.key),G=T(lt,G,Ve),Qe===null?Te=lt:Qe.sibling=lt,Qe=lt);return t&&xe.forEach(function(eT){return i(Y,eT)}),ct&&aa(Y,Ve),Te}function bt(Y,G,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===v&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:e:{for(var Te=Z.key;G!==null;){if(G.key===Te){if(Te=Z.type,Te===v){if(G.tag===7){a(Y,G.sibling),oe=p(G,Z.props.children),oe.return=Y,Y=oe;break e}}else if(G.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===S&&Dy(Te)===G.type){a(Y,G.sibling),oe=p(G,Z.props),Tl(oe,Z),oe.return=Y,Y=oe;break e}a(Y,G);break}else i(Y,G);G=G.sibling}Z.type===v?(oe=ia(Z.props.children,Y.mode,oe,Z.key),oe.return=Y,Y=oe):(oe=Zu(Z.type,Z.key,Z.props,null,Y.mode,oe),Tl(oe,Z),oe.return=Y,Y=oe)}return k(Y);case _:e:{for(Te=Z.key;G!==null;){if(G.key===Te)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){a(Y,G.sibling),oe=p(G,Z.children||[]),oe.return=Y,Y=oe;break e}else{a(Y,G);break}else i(Y,G);G=G.sibling}oe=If(Z,Y.mode,oe),oe.return=Y,Y=oe}return k(Y);case S:return Te=Z._init,Z=Te(Z._payload),bt(Y,G,Z,oe)}if(pe(Z))return ze(Y,G,Z,oe);if($(Z)){if(Te=$(Z),typeof Te!="function")throw Error(s(150));return Z=Te.call(Z),Me(Y,G,Z,oe)}if(typeof Z.then=="function")return bt(Y,G,pc(Z),oe);if(Z.$$typeof===x)return bt(Y,G,nc(Y,Z),oe);gc(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(a(Y,G.sibling),oe=p(G,Z),oe.return=Y,Y=oe):(a(Y,G),oe=Cf(Z,Y.mode,oe),oe.return=Y,Y=oe),k(Y)):a(Y,G)}return function(Y,G,Z,oe){try{wl=0;var Te=bt(Y,G,Z,oe);return no=null,Te}catch(xe){if(xe===dl||xe===ic)throw xe;var Qe=Bn(29,xe,null,Y.mode);return Qe.lanes=oe,Qe.return=Y,Qe}finally{}}}var ro=Oy(!0),Ny=Oy(!1),dr=re(null),Fr=null;function Ji(t){var i=t.alternate;he(Gt,Gt.current&1),he(dr,t),Fr===null&&(i===null||Za.current!==null||i.memoizedState!==null)&&(Fr=t)}function ky(t){if(t.tag===22){if(he(Gt,Gt.current),he(dr,t),Fr===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Fr=t)}}else es()}function es(){he(Gt,Gt.current),he(dr,dr.current)}function wi(t){me(dr),Fr===t&&(Fr=null),me(Gt)}var Gt=re(0);function yc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Xd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function od(t,i,a,u){i=t.memoizedState,a=a(u,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ld={enqueueSetState:function(t,i,a){t=t._reactInternals;var u=Gn(),p=Xi(u);p.payload=i,a!=null&&(p.callback=a),i=Wi(t,p,u),i!==null&&(Kn(i,t,u),pl(i,t,u))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var u=Gn(),p=Xi(u);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=Wi(t,p,u),i!==null&&(Kn(i,t,u),pl(i,t,u))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Gn(),u=Xi(a);u.tag=2,i!=null&&(u.callback=i),i=Wi(t,u,a),i!==null&&(Kn(i,t,a),pl(i,t,a))}};function My(t,i,a,u,p,T,k){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,T,k):i.prototype&&i.prototype.isPureReactComponent?!sl(a,u)||!sl(p,T):!0}function Py(t,i,a,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==t&&ld.enqueueReplaceState(i,i.state,null)}function da(t,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var p in t)a[p]===void 0&&(a[p]=t[p])}return a}var vc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Vy(t){vc(t)}function Ly(t){console.error(t)}function jy(t){vc(t)}function _c(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Uy(t,i,a){try{var u=t.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function ud(t,i,a){return a=Xi(a),a.tag=3,a.payload={element:null},a.callback=function(){_c(t,i)},a}function zy(t){return t=Xi(t),t.tag=3,t}function $y(t,i,a,u){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var T=u.value;t.payload=function(){return p(T)},t.callback=function(){Uy(i,a,u)}}var k=a.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(t.callback=function(){Uy(i,a,u),typeof p!="function"&&(as===null?as=new Set([this]):as.add(this));var U=u.stack;this.componentDidCatch(u.value,{componentStack:U!==null?U:""})})}function ew(t,i,a,u,p){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&cl(i,a,p,!0),a=dr.current,a!==null){switch(a.tag){case 13:return Fr===null?kd():a.alternate===null&&Ot===0&&(Ot=3),a.flags&=-257,a.flags|=65536,a.lanes=p,u===jf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),Pd(t,u,p)),!1;case 22:return a.flags|=65536,u===jf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),Pd(t,u,p)),!1}throw Error(s(435,a.tag))}return Pd(t,u,p),kd(),!1}if(ct)return i=dr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==Of&&(t=Error(s(422),{cause:u}),ul(ur(t,a)))):(u!==Of&&(i=Error(s(423),{cause:u}),ul(ur(i,a))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,u=ur(u,a),p=ud(t.stateNode,u,p),$f(t,p),Ot!==4&&(Ot=2)),!1;var T=Error(s(520),{cause:u});if(T=ur(T,a),Dl===null?Dl=[T]:Dl.push(T),Ot!==4&&(Ot=2),i===null)return!0;u=ur(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=p&-p,a.lanes|=t,t=ud(a.stateNode,u,t),$f(a,t),!1;case 1:if(i=a.type,T=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(as===null||!as.has(T))))return a.flags|=65536,p&=-p,a.lanes|=p,p=zy(p),$y(p,t,a,u),$f(a,p),!1}a=a.return}while(a!==null);return!1}var By=Error(s(461)),Zt=!1;function an(t,i,a,u){i.child=t===null?Ny(i,null,a,u):ro(i,t.child,a,u)}function qy(t,i,a,u,p){a=a.render;var T=i.ref;if("ref"in u){var k={};for(var U in u)U!=="ref"&&(k[U]=u[U])}else k=u;return ca(i),u=Gf(t,i,a,k,T,p),U=Kf(),t!==null&&!Zt?(Yf(t,i,p),Ti(t,i,p)):(ct&&U&&xf(i),i.flags|=1,an(t,i,u,p),i.child)}function Hy(t,i,a,u,p){if(t===null){var T=a.type;return typeof T=="function"&&!Rf(T)&&T.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=T,Fy(t,i,T,u,p)):(t=Zu(a.type,null,u,i,i.mode,p),t.ref=i.ref,t.return=i,i.child=t)}if(T=t.child,!yd(t,p)){var k=T.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(k,u)&&t.ref===i.ref)return Ti(t,i,p)}return i.flags|=1,t=gi(T,u),t.ref=i.ref,t.return=i,i.child=t}function Fy(t,i,a,u,p){if(t!==null){var T=t.memoizedProps;if(sl(T,u)&&t.ref===i.ref)if(Zt=!1,i.pendingProps=u=T,yd(t,p))(t.flags&131072)!==0&&(Zt=!0);else return i.lanes=t.lanes,Ti(t,i,p)}return cd(t,i,a,u,p)}function Gy(t,i,a){var u=i.pendingProps,p=u.children,T=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=T!==null?T.baseLanes|a:a,t!==null){for(p=i.child=t.child,T=0;p!==null;)T=T|p.lanes|p.childLanes,p=p.sibling;i.childLanes=T&~u}else i.childLanes=0,i.child=null;return Ky(t,i,u,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&rc(i,T!==null?T.cachePool:null),T!==null?Fg(i,T):qf(),ky(i);else return i.lanes=i.childLanes=536870912,Ky(t,i,T!==null?T.baseLanes|a:a,a)}else T!==null?(rc(i,T.cachePool),Fg(i,T),es(),i.memoizedState=null):(t!==null&&rc(i,null),qf(),es());return an(t,i,p,a),i.child}function Ky(t,i,a,u){var p=Lf();return p=p===null?null:{parent:Ft._currentValue,pool:p},i.memoizedState={baseLanes:a,cachePool:p},t!==null&&rc(i,null),qf(),ky(i),t!==null&&cl(t,i,u,!0),null}function bc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function cd(t,i,a,u,p){return ca(i),a=Gf(t,i,a,u,void 0,p),u=Kf(),t!==null&&!Zt?(Yf(t,i,p),Ti(t,i,p)):(ct&&u&&xf(i),i.flags|=1,an(t,i,a,p),i.child)}function Yy(t,i,a,u,p,T){return ca(i),i.updateQueue=null,a=Kg(i,u,a,p),Gg(t),u=Kf(),t!==null&&!Zt?(Yf(t,i,T),Ti(t,i,T)):(ct&&u&&xf(i),i.flags|=1,an(t,i,a,T),i.child)}function Qy(t,i,a,u,p){if(ca(i),i.stateNode===null){var T=Ka,k=a.contextType;typeof k=="object"&&k!==null&&(T=gn(k)),T=new a(u,T),i.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=ld,i.stateNode=T,T._reactInternals=i,T=i.stateNode,T.props=u,T.state=i.memoizedState,T.refs={},Uf(i),k=a.contextType,T.context=typeof k=="object"&&k!==null?gn(k):Ka,T.state=i.memoizedState,k=a.getDerivedStateFromProps,typeof k=="function"&&(od(i,a,k,u),T.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(k=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),k!==T.state&&ld.enqueueReplaceState(T,T.state,null),yl(i,u,T,p),gl(),T.state=i.memoizedState),typeof T.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(t===null){T=i.stateNode;var U=i.memoizedProps,H=da(a,U);T.props=H;var ee=T.context,se=a.contextType;k=Ka,typeof se=="object"&&se!==null&&(k=gn(se));var ue=a.getDerivedStateFromProps;se=typeof ue=="function"||typeof T.getSnapshotBeforeUpdate=="function",U=i.pendingProps!==U,se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U||ee!==k)&&Py(i,T,u,k),Qi=!1;var te=i.memoizedState;T.state=te,yl(i,u,T,p),gl(),ee=i.memoizedState,U||te!==ee||Qi?(typeof ue=="function"&&(od(i,a,ue,u),ee=i.memoizedState),(H=Qi||My(i,a,H,u,te,ee,k))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=ee),T.props=u,T.state=ee,T.context=k,u=H):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{T=i.stateNode,zf(t,i),k=i.memoizedProps,se=da(a,k),T.props=se,ue=i.pendingProps,te=T.context,ee=a.contextType,H=Ka,typeof ee=="object"&&ee!==null&&(H=gn(ee)),U=a.getDerivedStateFromProps,(ee=typeof U=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==ue||te!==H)&&Py(i,T,u,H),Qi=!1,te=i.memoizedState,T.state=te,yl(i,u,T,p),gl();var ne=i.memoizedState;k!==ue||te!==ne||Qi||t!==null&&t.dependencies!==null&&tc(t.dependencies)?(typeof U=="function"&&(od(i,a,U,u),ne=i.memoizedState),(se=Qi||My(i,a,se,u,te,ne,H)||t!==null&&t.dependencies!==null&&tc(t.dependencies))?(ee||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(u,ne,H),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(u,ne,H)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||k===t.memoizedProps&&te===t.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===t.memoizedProps&&te===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ne),T.props=u,T.state=ne,T.context=H,u=se):(typeof T.componentDidUpdate!="function"||k===t.memoizedProps&&te===t.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===t.memoizedProps&&te===t.memoizedState||(i.flags|=1024),u=!1)}return T=u,bc(t,i),u=(i.flags&128)!==0,T||u?(T=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:T.render(),i.flags|=1,t!==null&&u?(i.child=ro(i,t.child,null,p),i.child=ro(i,null,a,p)):an(t,i,a,p),i.memoizedState=T.state,t=i.child):t=Ti(t,i,p),t}function Xy(t,i,a,u){return ll(),i.flags|=256,an(t,i,a,u),i.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(t){return{baseLanes:t,cachePool:Lg()}}function dd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=mr),t}function Wy(t,i,a){var u=i.pendingProps,p=!1,T=(i.flags&128)!==0,k;if((k=T)||(k=t!==null&&t.memoizedState===null?!1:(Gt.current&2)!==0),k&&(p=!0,i.flags&=-129),k=(i.flags&32)!==0,i.flags&=-33,t===null){if(ct){if(p?Ji(i):es(),ct){var U=Dt,H;if(H=U){e:{for(H=U,U=Hr;H.nodeType!==8;){if(!U){U=null;break e}if(H=Tr(H.nextSibling),H===null){U=null;break e}}U=H}U!==null?(i.memoizedState={dehydrated:U,treeContext:sa!==null?{id:yi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},H=Bn(18,null,null,0),H.stateNode=U,H.return=i,i.child=H,Dn=i,Dt=null,H=!0):H=!1}H||la(i)}if(U=i.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return Xd(U)?i.lanes=32:i.lanes=536870912,null;wi(i)}return U=u.children,u=u.fallback,p?(es(),p=i.mode,U=Ec({mode:"hidden",children:U},p),u=ia(u,p,a,null),U.return=i,u.return=i,U.sibling=u,i.child=U,p=i.child,p.memoizedState=fd(a),p.childLanes=dd(t,k,a),i.memoizedState=hd,u):(Ji(i),md(i,U))}if(H=t.memoizedState,H!==null&&(U=H.dehydrated,U!==null)){if(T)i.flags&256?(Ji(i),i.flags&=-257,i=pd(t,i,a)):i.memoizedState!==null?(es(),i.child=t.child,i.flags|=128,i=null):(es(),p=u.fallback,U=i.mode,u=Ec({mode:"visible",children:u.children},U),p=ia(p,U,a,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,ro(i,t.child,null,a),u=i.child,u.memoizedState=fd(a),u.childLanes=dd(t,k,a),i.memoizedState=hd,i=p);else if(Ji(i),Xd(U)){if(k=U.nextSibling&&U.nextSibling.dataset,k)var ee=k.dgst;k=ee,u=Error(s(419)),u.stack="",u.digest=k,ul({value:u,source:null,stack:null}),i=pd(t,i,a)}else if(Zt||cl(t,i,a,!1),k=(a&t.childLanes)!==0,Zt||k){if(k=St,k!==null&&(u=a&-a,u=(u&42)!==0?1:Mr(u),u=(u&(k.suspendedLanes|a))!==0?0:u,u!==0&&u!==H.retryLane))throw H.retryLane=u,Ga(t,u),Kn(k,t,u),By;U.data==="$?"||kd(),i=pd(t,i,a)}else U.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=H.treeContext,Dt=Tr(U.nextSibling),Dn=i,ct=!0,oa=null,Hr=!1,t!==null&&(hr[fr++]=yi,hr[fr++]=vi,hr[fr++]=sa,yi=t.id,vi=t.overflow,sa=i),i=md(i,u.children),i.flags|=4096);return i}return p?(es(),p=u.fallback,U=i.mode,H=t.child,ee=H.sibling,u=gi(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,ee!==null?p=gi(ee,p):(p=ia(p,U,a,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,U=t.child.memoizedState,U===null?U=fd(a):(H=U.cachePool,H!==null?(ee=Ft._currentValue,H=H.parent!==ee?{parent:ee,pool:ee}:H):H=Lg(),U={baseLanes:U.baseLanes|a,cachePool:H}),p.memoizedState=U,p.childLanes=dd(t,k,a),i.memoizedState=hd,u):(Ji(i),a=t.child,t=a.sibling,a=gi(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,t!==null&&(k=i.deletions,k===null?(i.deletions=[t],i.flags|=16):k.push(t)),i.child=a,i.memoizedState=null,a)}function md(t,i){return i=Ec({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ec(t,i){return t=Bn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function pd(t,i,a){return ro(i,t.child,null,a),t=md(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Zy(t,i,a){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),kf(t.return,i,a)}function gd(t,i,a,u,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:p}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=a,T.tailMode=p)}function Jy(t,i,a){var u=i.pendingProps,p=u.revealOrder,T=u.tail;if(an(t,i,u.children,a),u=Gt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,a,i);else if(t.tag===19)Zy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(he(Gt,u),p){case"forwards":for(a=i.child,p=null;a!==null;)t=a.alternate,t!==null&&yc(t)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),gd(i,!1,p,a,T);break;case"backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(t=p.alternate,t!==null&&yc(t)===null){i.child=p;break}t=p.sibling,p.sibling=a,a=p,p=t}gd(i,!0,a,null,T);break;case"together":gd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ti(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),ss|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(cl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=gi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=gi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function yd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&tc(t)))}function tw(t,i,a){switch(i.tag){case 3:gt(i,i.stateNode.containerInfo),Yi(i,Ft,t.memoizedState.cache),ll();break;case 27:case 5:At(i);break;case 4:gt(i,i.stateNode.containerInfo);break;case 10:Yi(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ji(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Wy(t,i,a):(Ji(i),t=Ti(t,i,a),t!==null?t.sibling:null);Ji(i);break;case 19:var p=(t.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(cl(t,i,a,!1),u=(a&i.childLanes)!==0),p){if(u)return Jy(t,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),he(Gt,Gt.current),u)break;return null;case 22:case 23:return i.lanes=0,Gy(t,i,a);case 24:Yi(i,Ft,t.memoizedState.cache)}return Ti(t,i,a)}function ev(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Zt=!0;else{if(!yd(t,a)&&(i.flags&128)===0)return Zt=!1,tw(t,i,a);Zt=(t.flags&131072)!==0}else Zt=!1,ct&&(i.flags&1048576)!==0&&Dg(i,ec,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var u=i.elementType,p=u._init;if(u=p(u._payload),i.type=u,typeof u=="function")Rf(u)?(t=da(u,t),i.tag=1,i=Qy(null,i,u,t,a)):(i.tag=0,i=cd(null,i,u,t,a));else{if(u!=null){if(p=u.$$typeof,p===M){i.tag=11,i=qy(null,i,u,t,a);break e}else if(p===O){i.tag=14,i=Hy(null,i,u,t,a);break e}}throw i=ce(u)||u,Error(s(306,i,""))}}return i;case 0:return cd(t,i,i.type,i.pendingProps,a);case 1:return u=i.type,p=da(u,i.pendingProps),Qy(t,i,u,p,a);case 3:e:{if(gt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));u=i.pendingProps;var T=i.memoizedState;p=T.element,zf(t,i),yl(i,u,null,a);var k=i.memoizedState;if(u=k.cache,Yi(i,Ft,u),u!==T.cache&&Mf(i,[Ft],a,!0),gl(),u=k.element,T.isDehydrated)if(T={element:u,isDehydrated:!1,cache:k.cache},i.updateQueue.baseState=T,i.memoizedState=T,i.flags&256){i=Xy(t,i,u,a);break e}else if(u!==p){p=ur(Error(s(424)),i),ul(p),i=Xy(t,i,u,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Dt=Tr(t.firstChild),Dn=i,ct=!0,oa=null,Hr=!0,a=Ny(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ll(),u===p){i=Ti(t,i,a);break e}an(t,i,u,a)}i=i.child}return i;case 26:return bc(t,i),t===null?(a=i0(i.type,null,i.pendingProps,null))?i.memoizedState=a:ct||(a=i.type,t=i.pendingProps,u=Pc(Ce.current).createElement(a),u[le]=i,u[ge]=t,ln(u,a,t),nt(u),i.stateNode=u):i.memoizedState=i0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return At(i),t===null&&ct&&(u=i.stateNode=t0(i.type,i.pendingProps,Ce.current),Dn=i,Hr=!0,p=Dt,us(i.type)?(Wd=p,Dt=Tr(u.firstChild)):Dt=p),an(t,i,i.pendingProps.children,a),bc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ct&&((p=u=Dt)&&(u=xw(u,i.type,i.pendingProps,Hr),u!==null?(i.stateNode=u,Dn=i,Dt=Tr(u.firstChild),Hr=!1,p=!0):p=!1),p||la(i)),At(i),p=i.type,T=i.pendingProps,k=t!==null?t.memoizedProps:null,u=T.children,Kd(p,T)?u=null:k!==null&&Kd(p,k)&&(i.flags|=32),i.memoizedState!==null&&(p=Gf(t,i,K1,null,null,a),Ul._currentValue=p),bc(t,i),an(t,i,u,a),i.child;case 6:return t===null&&ct&&((t=a=Dt)&&(a=Dw(a,i.pendingProps,Hr),a!==null?(i.stateNode=a,Dn=i,Dt=null,t=!0):t=!1),t||la(i)),null;case 13:return Wy(t,i,a);case 4:return gt(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=ro(i,null,u,a):an(t,i,u,a),i.child;case 11:return qy(t,i,i.type,i.pendingProps,a);case 7:return an(t,i,i.pendingProps,a),i.child;case 8:return an(t,i,i.pendingProps.children,a),i.child;case 12:return an(t,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,Yi(i,i.type,u.value),an(t,i,u.children,a),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,ca(i),p=gn(p),u=u(p),i.flags|=1,an(t,i,u,a),i.child;case 14:return Hy(t,i,i.type,i.pendingProps,a);case 15:return Fy(t,i,i.type,i.pendingProps,a);case 19:return Jy(t,i,a);case 31:return u=i.pendingProps,a=i.mode,u={mode:u.mode,children:u.children},t===null?(a=Ec(u,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=gi(t.child,u),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Gy(t,i,a);case 24:return ca(i),u=gn(Ft),t===null?(p=Lf(),p===null&&(p=St,T=Pf(),p.pooledCache=T,T.refCount++,T!==null&&(p.pooledCacheLanes|=a),p=T),i.memoizedState={parent:u,cache:p},Uf(i),Yi(i,Ft,p)):((t.lanes&a)!==0&&(zf(t,i),yl(i,null,null,a),gl()),p=t.memoizedState,T=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Yi(i,Ft,u)):(u=T.cache,Yi(i,Ft,u),u!==p.cache&&Mf(i,[Ft],a,!0))),an(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Si(t){t.flags|=4}function tv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!u0(i)){if(i=dr.current,i!==null&&((st&4194048)===st?Fr!==null:(st&62914560)!==st&&(st&536870912)===0||i!==Fr))throw ml=jf,jg;t.flags|=8192}}function wc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Hs():536870912,t.lanes|=i,oo|=i)}function Sl(t,i){if(!ct)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function It(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,u=0;if(i)for(var p=t.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=u,t.childLanes=a,i}function nw(t,i,a){var u=i.pendingProps;switch(Df(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(i),null;case 1:return It(i),null;case 3:return a=i.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),bi(Ft),Zn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ol(i)?Si(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kg())),It(i),null;case 26:return a=i.memoizedState,t===null?(Si(i),a!==null?(It(i),tv(i,a)):(It(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Si(i),It(i),tv(i,a)):(It(i),i.flags&=-16777217):(t.memoizedProps!==u&&Si(i),It(i),i.flags&=-16777217),null;case 27:dn(i),a=Ce.current;var p=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==u&&Si(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return It(i),null}t=_e.current,ol(i)?Og(i):(t=t0(p,u,a),i.stateNode=t,Si(i))}return It(i),null;case 5:if(dn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==u&&Si(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return It(i),null}if(t=_e.current,ol(i))Og(i);else{switch(p=Pc(Ce.current),t){case 1:t=p.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=p.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?p.createElement(a,{is:u.is}):p.createElement(a)}}t[le]=i,t[ge]=u;e:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)t.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=t;e:switch(ln(t,a,u),a){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Si(i)}}return It(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==u&&Si(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ce.current,ol(i)){if(t=i.stateNode,a=i.memoizedProps,u=null,p=Dn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}t[le]=i,t=!!(t.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Yv(t.nodeValue,a)),t||la(i)}else t=Pc(t).createTextNode(u),t[le]=i,i.stateNode=t}return It(i),null;case 13:if(u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=ol(i),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[le]=i}else ll(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),p=!1}else p=kg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(wi(i),i):(wi(i),null)}if(wi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=u!==null,t=t!==null&&t.memoizedState!==null,a){u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var T=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(T=u.memoizedState.cachePool.pool),T!==p&&(u.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),wc(i,i.updateQueue),It(i),null;case 4:return Zn(),t===null&&Bd(i.stateNode.containerInfo),It(i),null;case 10:return bi(i.type),It(i),null;case 19:if(me(Gt),p=i.memoizedState,p===null)return It(i),null;if(u=(i.flags&128)!==0,T=p.rendering,T===null)if(u)Sl(p,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(T=yc(t),T!==null){for(i.flags|=128,Sl(p,!1),t=T.updateQueue,i.updateQueue=t,wc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)xg(a,t),a=a.sibling;return he(Gt,Gt.current&1|2),i.child}t=t.sibling}p.tail!==null&&An()>Ac&&(i.flags|=128,u=!0,Sl(p,!1),i.lanes=4194304)}else{if(!u)if(t=yc(T),t!==null){if(i.flags|=128,u=!0,t=t.updateQueue,i.updateQueue=t,wc(i,t),Sl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!T.alternate&&!ct)return It(i),null}else 2*An()-p.renderingStartTime>Ac&&a!==536870912&&(i.flags|=128,u=!0,Sl(p,!1),i.lanes=4194304);p.isBackwards?(T.sibling=i.child,i.child=T):(t=p.last,t!==null?t.sibling=T:i.child=T,p.last=T)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=An(),i.sibling=null,t=Gt.current,he(Gt,u?t&1|2:t&1),i):(It(i),null);case 22:case 23:return wi(i),Hf(),u=i.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(It(i),i.subtreeFlags&6&&(i.flags|=8192)):It(i),a=i.updateQueue,a!==null&&wc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),t!==null&&me(ha),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),bi(Ft),It(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function rw(t,i){switch(Df(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return bi(Ft),Zn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return dn(i),null;case 13:if(wi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ll()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return me(Gt),null;case 4:return Zn(),null;case 10:return bi(i.type),null;case 22:case 23:return wi(i),Hf(),t!==null&&me(ha),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return bi(Ft),null;case 25:return null;default:return null}}function nv(t,i){switch(Df(i),i.tag){case 3:bi(Ft),Zn();break;case 26:case 27:case 5:dn(i);break;case 4:Zn();break;case 13:wi(i);break;case 19:me(Gt);break;case 10:bi(i.type);break;case 22:case 23:wi(i),Hf(),t!==null&&me(ha);break;case 24:bi(Ft)}}function Al(t,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var p=u.next;a=p;do{if((a.tag&t)===t){u=void 0;var T=a.create,k=a.inst;u=T(),k.destroy=u}a=a.next}while(a!==p)}}catch(U){wt(i,i.return,U)}}function ts(t,i,a){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var T=p.next;u=T;do{if((u.tag&t)===t){var k=u.inst,U=k.destroy;if(U!==void 0){k.destroy=void 0,p=i;var H=a,ee=U;try{ee()}catch(se){wt(p,H,se)}}}u=u.next}while(u!==T)}}catch(se){wt(i,i.return,se)}}function rv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Hg(i,a)}catch(u){wt(t,t.return,u)}}}function iv(t,i,a){a.props=da(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(u){wt(t,i,u)}}function Rl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof a=="function"?t.refCleanup=a(u):a.current=u}}catch(p){wt(t,i,p)}}function Gr(t,i){var a=t.ref,u=t.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(p){wt(t,i,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){wt(t,i,p)}else a.current=null}function sv(t){var i=t.type,a=t.memoizedProps,u=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(p){wt(t,t.return,p)}}function vd(t,i,a){try{var u=t.stateNode;Sw(u,t.type,a,i),u[ge]=i}catch(p){wt(t,t.return,p)}}function av(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&us(t.type)||t.tag===4}function _d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&us(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bd(t,i,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Mc));else if(u!==4&&(u===27&&us(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(bd(t,i,a),t=t.sibling;t!==null;)bd(t,i,a),t=t.sibling}function Tc(t,i,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(u!==4&&(u===27&&us(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tc(t,i,a),t=t.sibling;t!==null;)Tc(t,i,a),t=t.sibling}function ov(t){var i=t.stateNode,a=t.memoizedProps;try{for(var u=t.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);ln(i,u,a),i[le]=t,i[ge]=a}catch(T){wt(t,t.return,T)}}var Ai=!1,kt=!1,Ed=!1,lv=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function iw(t,i){if(t=t.containerInfo,Fd=$c,t=_g(t),_f(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var p=u.anchorOffset,T=u.focusNode;u=u.focusOffset;try{a.nodeType,T.nodeType}catch{a=null;break e}var k=0,U=-1,H=-1,ee=0,se=0,ue=t,te=null;t:for(;;){for(var ne;ue!==a||p!==0&&ue.nodeType!==3||(U=k+p),ue!==T||u!==0&&ue.nodeType!==3||(H=k+u),ue.nodeType===3&&(k+=ue.nodeValue.length),(ne=ue.firstChild)!==null;)te=ue,ue=ne;for(;;){if(ue===t)break t;if(te===a&&++ee===p&&(U=k),te===T&&++se===u&&(H=k),(ne=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ne}a=U===-1||H===-1?null:{start:U,end:H}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gd={focusedElem:t,selectionRange:a},$c=!1,Jt=i;Jt!==null;)if(i=Jt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Jt=t;else for(;Jt!==null;){switch(i=Jt,T=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&T!==null){t=void 0,a=i,p=T.memoizedProps,T=T.memoizedState,u=a.stateNode;try{var ze=da(a.type,p,a.elementType===a.type);t=u.getSnapshotBeforeUpdate(ze,T),u.__reactInternalSnapshotBeforeUpdate=t}catch(Me){wt(a,a.return,Me)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Qd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Jt=t;break}Jt=i.return}}function uv(t,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ns(t,a),u&4&&Al(5,a);break;case 1:if(ns(t,a),u&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(k){wt(a,a.return,k)}else{var p=da(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(p,i,t.__reactInternalSnapshotBeforeUpdate)}catch(k){wt(a,a.return,k)}}u&64&&rv(a),u&512&&Rl(a,a.return);break;case 3:if(ns(t,a),u&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Hg(t,i)}catch(k){wt(a,a.return,k)}}break;case 27:i===null&&u&4&&ov(a);case 26:case 5:ns(t,a),i===null&&u&4&&sv(a),u&512&&Rl(a,a.return);break;case 12:ns(t,a);break;case 13:ns(t,a),u&4&&fv(t,a),u&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=dw.bind(null,a),Ow(t,a))));break;case 22:if(u=a.memoizedState!==null||Ai,!u){i=i!==null&&i.memoizedState!==null||kt,p=Ai;var T=kt;Ai=u,(kt=i)&&!T?rs(t,a,(a.subtreeFlags&8772)!==0):ns(t,a),Ai=p,kt=T}break;case 30:break;default:ns(t,a)}}function cv(t){var i=t.alternate;i!==null&&(t.alternate=null,cv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ae(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,kn=!1;function Ri(t,i,a){for(a=a.child;a!==null;)hv(t,i,a),a=a.sibling}function hv(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(ut,a)}catch{}switch(a.tag){case 26:kt||Gr(a,i),Ri(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Gr(a,i);var u=Rt,p=kn;us(a.type)&&(Rt=a.stateNode,kn=!1),Ri(t,i,a),Pl(a.stateNode),Rt=u,kn=p;break;case 5:kt||Gr(a,i);case 6:if(u=Rt,p=kn,Rt=null,Ri(t,i,a),Rt=u,kn=p,Rt!==null)if(kn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(T){wt(a,i,T)}else try{Rt.removeChild(a.stateNode)}catch(T){wt(a,i,T)}break;case 18:Rt!==null&&(kn?(t=Rt,Jv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ql(t)):Jv(Rt,a.stateNode));break;case 4:u=Rt,p=kn,Rt=a.stateNode.containerInfo,kn=!0,Ri(t,i,a),Rt=u,kn=p;break;case 0:case 11:case 14:case 15:kt||ts(2,a,i),kt||ts(4,a,i),Ri(t,i,a);break;case 1:kt||(Gr(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&iv(a,i,u)),Ri(t,i,a);break;case 21:Ri(t,i,a);break;case 22:kt=(u=kt)||a.memoizedState!==null,Ri(t,i,a),kt=u;break;default:Ri(t,i,a)}}function fv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ql(t)}catch(a){wt(i,i.return,a)}}function sw(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new lv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new lv),i;default:throw Error(s(435,t.tag))}}function wd(t,i){var a=sw(t);i.forEach(function(u){var p=mw.bind(null,t,u);a.has(u)||(a.add(u),u.then(p,p))})}function qn(t,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var p=a[u],T=t,k=i,U=k;e:for(;U!==null;){switch(U.tag){case 27:if(us(U.type)){Rt=U.stateNode,kn=!1;break e}break;case 5:Rt=U.stateNode,kn=!1;break e;case 3:case 4:Rt=U.stateNode.containerInfo,kn=!0;break e}U=U.return}if(Rt===null)throw Error(s(160));hv(T,k,p),Rt=null,kn=!1,T=p.alternate,T!==null&&(T.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)dv(i,t),i=i.sibling}var wr=null;function dv(t,i){var a=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qn(i,t),Hn(t),u&4&&(ts(3,t,t.return),Al(3,t),ts(5,t,t.return));break;case 1:qn(i,t),Hn(t),u&512&&(kt||a===null||Gr(a,a.return)),u&64&&Ai&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var p=wr;if(qn(i,t),Hn(t),u&512&&(kt||a===null||Gr(a,a.return)),u&4){var T=a!==null?a.memoizedState:null;if(u=t.memoizedState,a===null)if(u===null)if(t.stateNode===null){e:{u=t.type,a=t.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":T=p.getElementsByTagName("title")[0],(!T||T[ke]||T[le]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=p.createElement(u),p.head.insertBefore(T,p.querySelector("head > title"))),ln(T,u,a),T[le]=t,nt(T),u=T;break e;case"link":var k=o0("link","href",p).get(u+(a.href||""));if(k){for(var U=0;U<k.length;U++)if(T=k[U],T.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&T.getAttribute("rel")===(a.rel==null?null:a.rel)&&T.getAttribute("title")===(a.title==null?null:a.title)&&T.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){k.splice(U,1);break t}}T=p.createElement(u),ln(T,u,a),p.head.appendChild(T);break;case"meta":if(k=o0("meta","content",p).get(u+(a.content||""))){for(U=0;U<k.length;U++)if(T=k[U],T.getAttribute("content")===(a.content==null?null:""+a.content)&&T.getAttribute("name")===(a.name==null?null:a.name)&&T.getAttribute("property")===(a.property==null?null:a.property)&&T.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&T.getAttribute("charset")===(a.charSet==null?null:a.charSet)){k.splice(U,1);break t}}T=p.createElement(u),ln(T,u,a),p.head.appendChild(T);break;default:throw Error(s(468,u))}T[le]=t,nt(T),u=T}t.stateNode=u}else l0(p,t.type,t.stateNode);else t.stateNode=a0(p,u,t.memoizedProps);else T!==u?(T===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):T.count--,u===null?l0(p,t.type,t.stateNode):a0(p,u,t.memoizedProps)):u===null&&t.stateNode!==null&&vd(t,t.memoizedProps,a.memoizedProps)}break;case 27:qn(i,t),Hn(t),u&512&&(kt||a===null||Gr(a,a.return)),a!==null&&u&4&&vd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(qn(i,t),Hn(t),u&512&&(kt||a===null||Gr(a,a.return)),t.flags&32){p=t.stateNode;try{sr(p,"")}catch(ne){wt(t,t.return,ne)}}u&4&&t.stateNode!=null&&(p=t.memoizedProps,vd(t,p,a!==null?a.memoizedProps:p)),u&1024&&(Ed=!0);break;case 6:if(qn(i,t),Hn(t),u&4){if(t.stateNode===null)throw Error(s(162));u=t.memoizedProps,a=t.stateNode;try{a.nodeValue=u}catch(ne){wt(t,t.return,ne)}}break;case 3:if(jc=null,p=wr,wr=Vc(i.containerInfo),qn(i,t),wr=p,Hn(t),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ql(i.containerInfo)}catch(ne){wt(t,t.return,ne)}Ed&&(Ed=!1,mv(t));break;case 4:u=wr,wr=Vc(t.stateNode.containerInfo),qn(i,t),Hn(t),wr=u;break;case 12:qn(i,t),Hn(t);break;case 13:qn(i,t),Hn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Id=An()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,wd(t,u)));break;case 22:p=t.memoizedState!==null;var H=a!==null&&a.memoizedState!==null,ee=Ai,se=kt;if(Ai=ee||p,kt=se||H,qn(i,t),kt=se,Ai=ee,Hn(t),u&8192)e:for(i=t.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(a===null||H||Ai||kt||ma(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){H=a=i;try{if(T=H.stateNode,p)k=T.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{U=H.stateNode;var ue=H.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;U.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ne){wt(H,H.return,ne)}}}else if(i.tag===6){if(a===null){H=i;try{H.stateNode.nodeValue=p?"":H.memoizedProps}catch(ne){wt(H,H.return,ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=t.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,wd(t,a))));break;case 19:qn(i,t),Hn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,wd(t,u)));break;case 30:break;case 21:break;default:qn(i,t),Hn(t)}}function Hn(t){var i=t.flags;if(i&2){try{for(var a,u=t.return;u!==null;){if(av(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,T=_d(t);Tc(t,T,p);break;case 5:var k=a.stateNode;a.flags&32&&(sr(k,""),a.flags&=-33);var U=_d(t);Tc(t,U,k);break;case 3:case 4:var H=a.stateNode.containerInfo,ee=_d(t);bd(t,ee,H);break;default:throw Error(s(161))}}catch(se){wt(t,t.return,se)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function mv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;mv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ns(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)uv(t,i.alternate,i),i=i.sibling}function ma(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ts(4,i,i.return),ma(i);break;case 1:Gr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&iv(i,i.return,a),ma(i);break;case 27:Pl(i.stateNode);case 26:case 5:Gr(i,i.return),ma(i);break;case 22:i.memoizedState===null&&ma(i);break;case 30:ma(i);break;default:ma(i)}t=t.sibling}}function rs(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=t,T=i,k=T.flags;switch(T.tag){case 0:case 11:case 15:rs(p,T,a),Al(4,T);break;case 1:if(rs(p,T,a),u=T,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ee){wt(u,u.return,ee)}if(u=T,p=u.updateQueue,p!==null){var U=u.stateNode;try{var H=p.shared.hiddenCallbacks;if(H!==null)for(p.shared.hiddenCallbacks=null,p=0;p<H.length;p++)qg(H[p],U)}catch(ee){wt(u,u.return,ee)}}a&&k&64&&rv(T),Rl(T,T.return);break;case 27:ov(T);case 26:case 5:rs(p,T,a),a&&u===null&&k&4&&sv(T),Rl(T,T.return);break;case 12:rs(p,T,a);break;case 13:rs(p,T,a),a&&k&4&&fv(p,T);break;case 22:T.memoizedState===null&&rs(p,T,a),Rl(T,T.return);break;case 30:break;default:rs(p,T,a)}i=i.sibling}}function Td(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&hl(a))}function Sd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&hl(t))}function Kr(t,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pv(t,i,a,u),i=i.sibling}function pv(t,i,a,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Kr(t,i,a,u),p&2048&&Al(9,i);break;case 1:Kr(t,i,a,u);break;case 3:Kr(t,i,a,u),p&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&hl(t)));break;case 12:if(p&2048){Kr(t,i,a,u),t=i.stateNode;try{var T=i.memoizedProps,k=T.id,U=T.onPostCommit;typeof U=="function"&&U(k,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){wt(i,i.return,H)}}else Kr(t,i,a,u);break;case 13:Kr(t,i,a,u);break;case 23:break;case 22:T=i.stateNode,k=i.alternate,i.memoizedState!==null?T._visibility&2?Kr(t,i,a,u):Cl(t,i):T._visibility&2?Kr(t,i,a,u):(T._visibility|=2,io(t,i,a,u,(i.subtreeFlags&10256)!==0)),p&2048&&Td(k,i);break;case 24:Kr(t,i,a,u),p&2048&&Sd(i.alternate,i);break;default:Kr(t,i,a,u)}}function io(t,i,a,u,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var T=t,k=i,U=a,H=u,ee=k.flags;switch(k.tag){case 0:case 11:case 15:io(T,k,U,H,p),Al(8,k);break;case 23:break;case 22:var se=k.stateNode;k.memoizedState!==null?se._visibility&2?io(T,k,U,H,p):Cl(T,k):(se._visibility|=2,io(T,k,U,H,p)),p&&ee&2048&&Td(k.alternate,k);break;case 24:io(T,k,U,H,p),p&&ee&2048&&Sd(k.alternate,k);break;default:io(T,k,U,H,p)}i=i.sibling}}function Cl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,u=i,p=u.flags;switch(u.tag){case 22:Cl(a,u),p&2048&&Td(u.alternate,u);break;case 24:Cl(a,u),p&2048&&Sd(u.alternate,u);break;default:Cl(a,u)}i=i.sibling}}var Il=8192;function so(t){if(t.subtreeFlags&Il)for(t=t.child;t!==null;)gv(t),t=t.sibling}function gv(t){switch(t.tag){case 26:so(t),t.flags&Il&&t.memoizedState!==null&&Hw(wr,t.memoizedState,t.memoizedProps);break;case 5:so(t);break;case 3:case 4:var i=wr;wr=Vc(t.stateNode.containerInfo),so(t),wr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Il,Il=16777216,so(t),Il=i):so(t));break;default:so(t)}}function yv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function xl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Jt=u,_v(u,t)}yv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vv(t),t=t.sibling}function vv(t){switch(t.tag){case 0:case 11:case 15:xl(t),t.flags&2048&&ts(9,t,t.return);break;case 3:xl(t);break;case 12:xl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Sc(t)):xl(t);break;default:xl(t)}}function Sc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Jt=u,_v(u,t)}yv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ts(8,i,i.return),Sc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Sc(i));break;default:Sc(i)}t=t.sibling}}function _v(t,i){for(;Jt!==null;){var a=Jt;switch(a.tag){case 0:case 11:case 15:ts(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Jt=u;else e:for(a=t;Jt!==null;){u=Jt;var p=u.sibling,T=u.return;if(cv(u),u===a){Jt=null;break e}if(p!==null){p.return=T,Jt=p;break e}Jt=T}}}var aw={getCacheForType:function(t){var i=gn(Ft),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},ow=typeof WeakMap=="function"?WeakMap:Map,mt=0,St=null,We=null,st=0,pt=0,Fn=null,is=!1,ao=!1,Ad=!1,Ci=0,Ot=0,ss=0,pa=0,Rd=0,mr=0,oo=0,Dl=null,Mn=null,Cd=!1,Id=0,Ac=1/0,Rc=null,as=null,on=0,os=null,lo=null,uo=0,xd=0,Dd=null,bv=null,Ol=0,Od=null;function Gn(){if((mt&2)!==0&&st!==0)return st&-st;if(K.T!==null){var t=Xa;return t!==0?t:jd()}return F()}function Ev(){mr===0&&(mr=(st&536870912)===0||ct?oi():536870912);var t=dr.current;return t!==null&&(t.flags|=32),mr}function Kn(t,i,a){(t===St&&(pt===2||pt===9)||t.cancelPendingCommit!==null)&&(co(t,0),ls(t,st,mr,!1)),_r(t,a),((mt&2)===0||t!==St)&&(t===St&&((mt&2)===0&&(pa|=a),Ot===4&&ls(t,st,mr,!1)),Yr(t))}function wv(t,i,a){if((mt&6)!==0)throw Error(s(327));var u=!a&&(i&124)===0&&(i&t.expiredLanes)===0||tr(t,i),p=u?cw(t,i):Md(t,i,!0),T=u;do{if(p===0){ao&&!u&&ls(t,i,0,!1);break}else{if(a=t.current.alternate,T&&!lw(a)){p=Md(t,i,!1),T=!1;continue}if(p===2){if(T=i,t.errorRecoveryDisabledLanes&T)var k=0;else k=t.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){i=k;e:{var U=t;p=Dl;var H=U.current.memoizedState.isDehydrated;if(H&&(co(U,k).flags|=256),k=Md(U,k,!1),k!==2){if(Ad&&!H){U.errorRecoveryDisabledLanes|=T,pa|=T,p=4;break e}T=Mn,Mn=p,T!==null&&(Mn===null?Mn=T:Mn.push.apply(Mn,T))}p=k}if(T=!1,p!==2)continue}}if(p===1){co(t,0),ls(t,i,0,!0);break}e:{switch(u=t,T=p,T){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ls(u,i,mr,!is);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Id+300-An(),10<p)){if(ls(u,i,mr,!is),ai(u,0,!0)!==0)break e;u.timeoutHandle=Wv(Tv.bind(null,u,a,Mn,Rc,Cd,i,mr,pa,oo,is,T,2,-0,0),p);break e}Tv(u,a,Mn,Rc,Cd,i,mr,pa,oo,is,T,0,-0,0)}}break}while(!0);Yr(t)}function Tv(t,i,a,u,p,T,k,U,H,ee,se,ue,te,ne){if(t.timeoutHandle=-1,ue=i.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(jl={stylesheets:null,count:0,unsuspend:qw},gv(i),ue=Fw(),ue!==null)){t.cancelPendingCommit=ue(Dv.bind(null,t,i,T,a,u,p,k,U,H,se,1,te,ne)),ls(t,T,k,!ee);return}Dv(t,i,T,a,u,p,k,U,H)}function lw(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var p=a[u],T=p.getSnapshot;p=p.value;try{if(!$n(T(),p))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ls(t,i,a,u){i&=~Rd,i&=~pa,t.suspendedLanes|=i,t.pingedLanes&=~i,u&&(t.warmLanes|=i),u=t.expirationTimes;for(var p=i;0<p;){var T=31-Vt(p),k=1<<T;u[T]=-1,p&=~k}a!==0&&Rn(t,a,i)}function Cc(){return(mt&6)===0?(Nl(0),!1):!0}function Nd(){if(We!==null){if(pt===0)var t=We.return;else t=We,_i=ua=null,Qf(t),no=null,wl=0,t=We;for(;t!==null;)nv(t.alternate,t),t=t.return;We=null}}function co(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Rw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Nd(),St=t,We=a=gi(t.current,null),st=i,pt=0,Fn=null,is=!1,ao=tr(t,i),Ad=!1,oo=mr=Rd=pa=ss=Ot=0,Mn=Dl=null,Cd=!1,(i&8)!==0&&(i|=i&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=i;0<u;){var p=31-Vt(u),T=1<<p;i|=t[p],u&=~T}return Ci=i,Qu(),a}function Sv(t,i){Ge=null,K.H=mc,i===dl||i===ic?(i=$g(),pt=3):i===jg?(i=$g(),pt=4):pt=i===By?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fn=i,We===null&&(Ot=1,_c(t,ur(i,t.current)))}function Av(){var t=K.H;return K.H=mc,t===null?mc:t}function Rv(){var t=K.A;return K.A=aw,t}function kd(){Ot=4,is||(st&4194048)!==st&&dr.current!==null||(ao=!0),(ss&134217727)===0&&(pa&134217727)===0||St===null||ls(St,st,mr,!1)}function Md(t,i,a){var u=mt;mt|=2;var p=Av(),T=Rv();(St!==t||st!==i)&&(Rc=null,co(t,i)),i=!1;var k=Ot;e:do try{if(pt!==0&&We!==null){var U=We,H=Fn;switch(pt){case 8:Nd(),k=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(i=!0);var ee=pt;if(pt=0,Fn=null,ho(t,U,H,ee),a&&ao){k=0;break e}break;default:ee=pt,pt=0,Fn=null,ho(t,U,H,ee)}}uw(),k=Ot;break}catch(se){Sv(t,se)}while(!0);return i&&t.shellSuspendCounter++,_i=ua=null,mt=u,K.H=p,K.A=T,We===null&&(St=null,st=0,Qu()),k}function uw(){for(;We!==null;)Cv(We)}function cw(t,i){var a=mt;mt|=2;var u=Av(),p=Rv();St!==t||st!==i?(Rc=null,Ac=An()+500,co(t,i)):ao=tr(t,i);e:do try{if(pt!==0&&We!==null){i=We;var T=Fn;t:switch(pt){case 1:pt=0,Fn=null,ho(t,i,T,1);break;case 2:case 9:if(Ug(T)){pt=0,Fn=null,Iv(i);break}i=function(){pt!==2&&pt!==9||St!==t||(pt=7),Yr(t)},T.then(i,i);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Ug(T)?(pt=0,Fn=null,Iv(i)):(pt=0,Fn=null,ho(t,i,T,7));break;case 5:var k=null;switch(We.tag){case 26:k=We.memoizedState;case 5:case 27:var U=We;if(!k||u0(k)){pt=0,Fn=null;var H=U.sibling;if(H!==null)We=H;else{var ee=U.return;ee!==null?(We=ee,Ic(ee)):We=null}break t}}pt=0,Fn=null,ho(t,i,T,5);break;case 6:pt=0,Fn=null,ho(t,i,T,6);break;case 8:Nd(),Ot=6;break e;default:throw Error(s(462))}}hw();break}catch(se){Sv(t,se)}while(!0);return _i=ua=null,K.H=u,K.A=p,mt=a,We!==null?0:(St=null,st=0,Qu(),Ot)}function hw(){for(;We!==null&&!Bs();)Cv(We)}function Cv(t){var i=ev(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,i===null?Ic(t):We=i}function Iv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Yy(a,i,i.pendingProps,i.type,void 0,st);break;case 11:i=Yy(a,i,i.pendingProps,i.type.render,i.ref,st);break;case 5:Qf(i);default:nv(a,i),i=We=xg(i,Ci),i=ev(a,i,Ci)}t.memoizedProps=t.pendingProps,i===null?Ic(t):We=i}function ho(t,i,a,u){_i=ua=null,Qf(i),no=null,wl=0;var p=i.return;try{if(ew(t,p,i,a,st)){Ot=1,_c(t,ur(a,t.current)),We=null;return}}catch(T){if(p!==null)throw We=p,T;Ot=1,_c(t,ur(a,t.current)),We=null;return}i.flags&32768?(ct||u===1?t=!0:ao||(st&536870912)!==0?t=!1:(is=t=!0,(u===2||u===9||u===3||u===6)&&(u=dr.current,u!==null&&u.tag===13&&(u.flags|=16384))),xv(i,t)):Ic(i)}function Ic(t){var i=t;do{if((i.flags&32768)!==0){xv(i,is);return}t=i.return;var a=nw(i.alternate,i,Ci);if(a!==null){We=a;return}if(i=i.sibling,i!==null){We=i;return}We=i=t}while(i!==null);Ot===0&&(Ot=5)}function xv(t,i){do{var a=rw(t.alternate,t);if(a!==null){a.flags&=32767,We=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){We=t;return}We=t=a}while(t!==null);Ot=6,We=null}function Dv(t,i,a,u,p,T,k,U,H){t.cancelPendingCommit=null;do xc();while(on!==0);if((mt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(T=i.lanes|i.childLanes,T|=Sf,qi(t,a,T,k,U,H),t===St&&(We=St=null,st=0),lo=i,os=t,uo=a,xd=T,Dd=p,bv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,pw(si,function(){return Pv(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,p=ae.p,ae.p=2,k=mt,mt|=4;try{iw(t,i,a)}finally{mt=k,ae.p=p,K.T=u}}on=1,Ov(),Nv(),kv()}}function Ov(){if(on===1){on=0;var t=os,i=lo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var u=ae.p;ae.p=2;var p=mt;mt|=4;try{dv(i,t);var T=Gd,k=_g(t.containerInfo),U=T.focusedElem,H=T.selectionRange;if(k!==U&&U&&U.ownerDocument&&vg(U.ownerDocument.documentElement,U)){if(H!==null&&_f(U)){var ee=H.start,se=H.end;if(se===void 0&&(se=ee),"selectionStart"in U)U.selectionStart=ee,U.selectionEnd=Math.min(se,U.value.length);else{var ue=U.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ne=te.getSelection(),ze=U.textContent.length,Me=Math.min(H.start,ze),bt=H.end===void 0?Me:Math.min(H.end,ze);!ne.extend&&Me>bt&&(k=bt,bt=Me,Me=k);var Y=yg(U,Me),G=yg(U,bt);if(Y&&G&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==G.node||ne.focusOffset!==G.offset)){var Z=ue.createRange();Z.setStart(Y.node,Y.offset),ne.removeAllRanges(),Me>bt?(ne.addRange(Z),ne.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),ne.addRange(Z))}}}}for(ue=[],ne=U;ne=ne.parentNode;)ne.nodeType===1&&ue.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ue.length;U++){var oe=ue[U];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}$c=!!Fd,Gd=Fd=null}finally{mt=p,ae.p=u,K.T=a}}t.current=i,on=2}}function Nv(){if(on===2){on=0;var t=os,i=lo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var u=ae.p;ae.p=2;var p=mt;mt|=4;try{uv(t,i.alternate,i)}finally{mt=p,ae.p=u,K.T=a}}on=3}}function kv(){if(on===4||on===3){on=0,Oa();var t=os,i=lo,a=uo,u=bv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?on=5:(on=0,lo=os=null,Mv(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(as=null),Hi(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=K.T,p=ae.p,ae.p=2,K.T=null;try{for(var T=t.onRecoverableError,k=0;k<u.length;k++){var U=u[k];T(U.value,{componentStack:U.stack})}}finally{K.T=i,ae.p=p}}(uo&3)!==0&&xc(),Yr(t),p=t.pendingLanes,(a&4194090)!==0&&(p&42)!==0?t===Od?Ol++:(Ol=0,Od=t):Ol=0,Nl(0)}}function Mv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,hl(i)))}function xc(t){return Ov(),Nv(),kv(),Pv()}function Pv(){if(on!==5)return!1;var t=os,i=xd;xd=0;var a=Hi(uo),u=K.T,p=ae.p;try{ae.p=32>a?32:a,K.T=null,a=Dd,Dd=null;var T=os,k=uo;if(on=0,lo=os=null,uo=0,(mt&6)!==0)throw Error(s(331));var U=mt;if(mt|=4,vv(T.current),pv(T,T.current,k,a),mt=U,Nl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(ut,T)}catch{}return!0}finally{ae.p=p,K.T=u,Mv(t,i)}}function Vv(t,i,a){i=ur(a,i),i=ud(t.stateNode,i,2),t=Wi(t,i,2),t!==null&&(_r(t,2),Yr(t))}function wt(t,i,a){if(t.tag===3)Vv(t,t,a);else for(;i!==null;){if(i.tag===3){Vv(i,t,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(as===null||!as.has(u))){t=ur(a,t),a=zy(2),u=Wi(i,a,2),u!==null&&($y(a,u,i,t),_r(u,2),Yr(u));break}}i=i.return}}function Pd(t,i,a){var u=t.pingCache;if(u===null){u=t.pingCache=new ow;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(a)||(Ad=!0,p.add(a),t=fw.bind(null,t,i,a),i.then(t,t))}function fw(t,i,a){var u=t.pingCache;u!==null&&u.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,St===t&&(st&a)===a&&(Ot===4||Ot===3&&(st&62914560)===st&&300>An()-Id?(mt&2)===0&&co(t,0):Rd|=a,oo===st&&(oo=0)),Yr(t)}function Lv(t,i){i===0&&(i=Hs()),t=Ga(t,i),t!==null&&(_r(t,i),Yr(t))}function dw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Lv(t,a)}function mw(t,i){var a=0;switch(t.tag){case 13:var u=t.stateNode,p=t.memoizedState;p!==null&&(a=p.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Lv(t,a)}function pw(t,i){return ii(t,i)}var Dc=null,fo=null,Vd=!1,Oc=!1,Ld=!1,ga=0;function Yr(t){t!==fo&&t.next===null&&(fo===null?Dc=fo=t:fo=fo.next=t),Oc=!0,Vd||(Vd=!0,yw())}function Nl(t,i){if(!Ld&&Oc){Ld=!0;do for(var a=!1,u=Dc;u!==null;){if(t!==0){var p=u.pendingLanes;if(p===0)var T=0;else{var k=u.suspendedLanes,U=u.pingedLanes;T=(1<<31-Vt(42|t)+1)-1,T&=p&~(k&~U),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(a=!0,$v(u,T))}else T=st,T=ai(u,u===St?T:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(T&3)===0||tr(u,T)||(a=!0,$v(u,T));u=u.next}while(a);Ld=!1}}function gw(){jv()}function jv(){Oc=Vd=!1;var t=0;ga!==0&&(Aw()&&(t=ga),ga=0);for(var i=An(),a=null,u=Dc;u!==null;){var p=u.next,T=Uv(u,i);T===0?(u.next=null,a===null?Dc=p:a.next=p,p===null&&(fo=a)):(a=u,(t!==0||(T&3)!==0)&&(Oc=!0)),u=p}Nl(t)}function Uv(t,i){for(var a=t.suspendedLanes,u=t.pingedLanes,p=t.expirationTimes,T=t.pendingLanes&-62914561;0<T;){var k=31-Vt(T),U=1<<k,H=p[k];H===-1?((U&a)===0||(U&u)!==0)&&(p[k]=Bi(U,i)):H<=i&&(t.expiredLanes|=U),T&=~U}if(i=St,a=st,a=ai(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,a===0||t===i&&(pt===2||pt===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Sn(u),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||tr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(u!==null&&Sn(u),Hi(a)){case 2:case 8:a=Ui;break;case 32:a=si;break;case 268435456:a=Jn;break;default:a=si}return u=zv.bind(null,t),a=ii(a,u),t.callbackPriority=i,t.callbackNode=a,i}return u!==null&&u!==null&&Sn(u),t.callbackPriority=2,t.callbackNode=null,2}function zv(t,i){if(on!==0&&on!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(xc()&&t.callbackNode!==a)return null;var u=st;return u=ai(t,t===St?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(wv(t,u,i),Uv(t,An()),t.callbackNode!=null&&t.callbackNode===a?zv.bind(null,t):null)}function $v(t,i){if(xc())return null;wv(t,i,!0)}function yw(){Cw(function(){(mt&6)!==0?ii(qs,gw):jv()})}function jd(){return ga===0&&(ga=oi()),ga}function Bv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ma(""+t)}function qv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function vw(t,i,a,u,p){if(i==="submit"&&a&&a.stateNode===p){var T=Bv((p[ge]||null).action),k=u.submitter;k&&(i=(i=k[ge]||null)?Bv(i.formAction):k.getAttribute("formAction"),i!==null&&(T=i,k=null));var U=new Pa("action","action",null,u,p);t.push({event:U,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ga!==0){var H=k?qv(p,k):new FormData(p);id(a,{pending:!0,data:H,method:p.method,action:T},null,H)}}else typeof T=="function"&&(U.preventDefault(),H=k?qv(p,k):new FormData(p),id(a,{pending:!0,data:H,method:p.method,action:T},T,H))},currentTarget:p}]})}}for(var Ud=0;Ud<Tf.length;Ud++){var zd=Tf[Ud],_w=zd.toLowerCase(),bw=zd[0].toUpperCase()+zd.slice(1);Er(_w,"on"+bw)}Er(wg,"onAnimationEnd"),Er(Tg,"onAnimationIteration"),Er(Sg,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(L1,"onTransitionRun"),Er(j1,"onTransitionStart"),Er(U1,"onTransitionCancel"),Er(Ag,"onTransitionEnd"),Cn("onMouseEnter",["mouseout","mouseover"]),Cn("onMouseLeave",["mouseout","mouseover"]),Cn("onPointerEnter",["pointerout","pointerover"]),Cn("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function Hv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var u=t[a],p=u.event;u=u.listeners;e:{var T=void 0;if(i)for(var k=u.length-1;0<=k;k--){var U=u[k],H=U.instance,ee=U.currentTarget;if(U=U.listener,H!==T&&p.isPropagationStopped())break e;T=U,p.currentTarget=ee;try{T(p)}catch(se){vc(se)}p.currentTarget=null,T=H}else for(k=0;k<u.length;k++){if(U=u[k],H=U.instance,ee=U.currentTarget,U=U.listener,H!==T&&p.isPropagationStopped())break e;T=U,p.currentTarget=ee;try{T(p)}catch(se){vc(se)}p.currentTarget=null,T=H}}}}function Ze(t,i){var a=i[Oe];a===void 0&&(a=i[Oe]=new Set);var u=t+"__bubble";a.has(u)||(Fv(i,t,2,!1),a.add(u))}function $d(t,i,a){var u=0;i&&(u|=4),Fv(a,t,u,i)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Bd(t){if(!t[Nc]){t[Nc]=!0,Ye.forEach(function(a){a!=="selectionchange"&&(Ew.has(a)||$d(a,!1,t),$d(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Nc]||(i[Nc]=!0,$d("selectionchange",!1,i))}}function Fv(t,i,a,u){switch(p0(i)){case 2:var p=Yw;break;case 8:p=Qw;break;default:p=nm}a=p.bind(null,i,a,t),p=void 0,!or||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?t.addEventListener(i,a,{capture:!0,passive:p}):t.addEventListener(i,a,!0):p!==void 0?t.addEventListener(i,a,{passive:p}):t.addEventListener(i,a,!1)}function qd(t,i,a,u,p){var T=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var k=u.tag;if(k===3||k===4){var U=u.stateNode.containerInfo;if(U===p)break;if(k===4)for(k=u.return;k!==null;){var H=k.tag;if((H===3||H===4)&&k.stateNode.containerInfo===p)return;k=k.return}for(;U!==null;){if(k=Pe(U),k===null)return;if(H=k.tag,H===5||H===6||H===26||H===27){u=T=k;continue e}U=U.parentNode}}u=u.return}Mu(function(){var ee=T,se=ar(a),ue=[];e:{var te=Rg.get(t);if(te!==void 0){var ne=Pa,ze=t;switch(t){case"keypress":if(Ur(a)===0)break e;case"keydown":case"keyup":ne=$a;break;case"focusin":ze="focus",ne=ja;break;case"focusout":ze="blur",ne=ja;break;case"beforeblur":case"afterblur":ne=ja;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Bu;break;case wg:case Tg:case Sg:ne=Ua;break;case Ag:ne=Hu;break;case"scroll":case"scrollend":ne=Pu;break;case"wheel":ne=Ba;break;case"copy":case"cut":case"paste":ne=za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=rl;break;case"toggle":case"beforetoggle":ne=Gu}var Me=(i&4)!==0,bt=!Me&&(t==="scroll"||t==="scrollend"),Y=Me?te!==null?te+"Capture":null:te;Me=[];for(var G=ee,Z;G!==null;){var oe=G;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||Y===null||(oe=Qs(G,Y),oe!=null&&Me.push(Ml(G,oe,Z))),bt)break;G=G.return}0<Me.length&&(te=new ne(te,ze,null,a,se),ue.push({event:te,listeners:Me}))}}if((i&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",te&&a!==ci&&(ze=a.relatedTarget||a.fromElement)&&(Pe(ze)||ze[Ee]))break e;if((ne||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(ze=a.relatedTarget||a.toElement,ne=ee,ze=ze?Pe(ze):null,ze!==null&&(bt=l(ze),Me=ze.tag,ze!==bt||Me!==5&&Me!==27&&Me!==6)&&(ze=null)):(ne=null,ze=ee),ne!==ze)){if(Me=lr,oe="onMouseLeave",Y="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Me=rl,oe="onPointerLeave",Y="onPointerEnter",G="pointer"),bt=ne==null?te:ht(ne),Z=ze==null?te:ht(ze),te=new Me(oe,G+"leave",ne,a,se),te.target=bt,te.relatedTarget=Z,oe=null,Pe(se)===ee&&(Me=new Me(Y,G+"enter",ze,a,se),Me.target=Z,Me.relatedTarget=bt,oe=Me),bt=oe,ne&&ze)t:{for(Me=ne,Y=ze,G=0,Z=Me;Z;Z=mo(Z))G++;for(Z=0,oe=Y;oe;oe=mo(oe))Z++;for(;0<G-Z;)Me=mo(Me),G--;for(;0<Z-G;)Y=mo(Y),Z--;for(;G--;){if(Me===Y||Y!==null&&Me===Y.alternate)break t;Me=mo(Me),Y=mo(Y)}Me=null}else Me=null;ne!==null&&Gv(ue,te,ne,Me,!1),ze!==null&&bt!==null&&Gv(ue,bt,ze,Me,!0)}}e:{if(te=ee?ht(ee):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var Te=hg;else if(Ht(te))if(fg)Te=M1;else{Te=N1;var Qe=O1}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Xo(ee.elementType)&&(Te=hg):Te=k1;if(Te&&(Te=Te(t,ee))){pi(ue,Te,a,se);break e}Qe&&Qe(t,te,ee),t==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Gi(te,"number",te.value)}switch(Qe=ee?ht(ee):window,t){case"focusin":(Ht(Qe)||Qe.contentEditable==="true")&&(qa=Qe,bf=ee,al=null);break;case"focusout":al=bf=qa=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,bg(ue,a,se);break;case"selectionchange":if(V1)break;case"keydown":case"keyup":bg(ue,a,se)}var xe;if(Br)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else rt?ie(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(N&&a.locale!=="ko"&&(rt||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&rt&&(xe=Zo()):(jr=se,Ki="value"in jr?jr.value:jr.textContent,rt=!0)),Qe=kc(ee,Ve),0<Qe.length&&(Ve=new tl(Ve,t,null,a,se),ue.push({event:Ve,listeners:Qe}),xe?Ve.data=xe:(xe=ve(a),xe!==null&&(Ve.data=xe)))),(xe=I?qt(t,a):it(t,a))&&(Ve=kc(ee,"onBeforeInput"),0<Ve.length&&(Qe=new tl("onBeforeInput","beforeinput",null,a,se),ue.push({event:Qe,listeners:Ve}),Qe.data=xe)),vw(ue,t,ee,a,se)}Hv(ue,i)})}function Ml(t,i,a){return{instance:t,listener:i,currentTarget:a}}function kc(t,i){for(var a=i+"Capture",u=[];t!==null;){var p=t,T=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||T===null||(p=Qs(t,a),p!=null&&u.unshift(Ml(t,p,T)),p=Qs(t,i),p!=null&&u.push(Ml(t,p,T))),t.tag===3)return u;t=t.return}return[]}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gv(t,i,a,u,p){for(var T=i._reactName,k=[];a!==null&&a!==u;){var U=a,H=U.alternate,ee=U.stateNode;if(U=U.tag,H!==null&&H===u)break;U!==5&&U!==26&&U!==27||ee===null||(H=ee,p?(ee=Qs(a,T),ee!=null&&k.unshift(Ml(a,ee,H))):p||(ee=Qs(a,T),ee!=null&&k.push(Ml(a,ee,H)))),a=a.return}k.length!==0&&t.push({event:i,listeners:k})}var ww=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function Kv(t){return(typeof t=="string"?t:""+t).replace(ww,`
`).replace(Tw,"")}function Yv(t,i){return i=Kv(i),Kv(t)===i}function Mc(){}function _t(t,i,a,u,p,T){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||sr(t,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&sr(t,""+u);break;case"className":In(t,"class",u);break;case"tabIndex":In(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":In(t,a,u);break;case"style":Qo(t,u,T);break;case"data":if(i!=="object"){In(t,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(a);break}u=Ma(""+u),t.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(a==="formAction"?(i!=="input"&&_t(t,i,"name",p.name,p,null),_t(t,i,"formEncType",p.formEncType,p,null),_t(t,i,"formMethod",p.formMethod,p,null),_t(t,i,"formTarget",p.formTarget,p,null)):(_t(t,i,"encType",p.encType,p,null),_t(t,i,"method",p.method,p,null),_t(t,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(a);break}u=Ma(""+u),t.setAttribute(a,u);break;case"onClick":u!=null&&(t.onclick=Mc);break;case"onScroll":u!=null&&Ze("scroll",t);break;case"onScrollEnd":u!=null&&Ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}a=Ma(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(a,""+u):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":u===!0?t.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(a,u):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(a,u):t.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(a):t.setAttribute(a,u);break;case"popover":Ze("beforetoggle",t),Ze("toggle",t),pn(t,"popover",u);break;case"xlinkActuate":$e(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":$e(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":$e(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":$e(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":$e(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":$e(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":$e(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":$e(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":$e(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":pn(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=df.get(a)||a,pn(t,a,u))}}function Hd(t,i,a,u,p,T){switch(a){case"style":Qo(t,u,T);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof u=="string"?sr(t,u):(typeof u=="number"||typeof u=="bigint")&&sr(t,""+u);break;case"onScroll":u!=null&&Ze("scroll",t);break;case"onScrollEnd":u!=null&&Ze("scrollend",t);break;case"onClick":u!=null&&(t.onclick=Mc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),i=a.slice(2,p?a.length-7:void 0),T=t[ge]||null,T=T!=null?T[a]:null,typeof T=="function"&&t.removeEventListener(i,T,p),typeof u=="function")){typeof T!="function"&&T!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,u,p);break e}a in t?t[a]=u:u===!0?t.setAttribute(a,""):pn(t,a,u)}}}function ln(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",t),Ze("load",t);var u=!1,p=!1,T;for(T in a)if(a.hasOwnProperty(T)){var k=a[T];if(k!=null)switch(T){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(t,i,T,k,a,null)}}p&&_t(t,i,"srcSet",a.srcSet,a,null),u&&_t(t,i,"src",a.src,a,null);return;case"input":Ze("invalid",t);var U=T=k=p=null,H=null,ee=null;for(u in a)if(a.hasOwnProperty(u)){var se=a[u];if(se!=null)switch(u){case"name":p=se;break;case"type":k=se;break;case"checked":H=se;break;case"defaultChecked":ee=se;break;case"value":T=se;break;case"defaultValue":U=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,i));break;default:_t(t,i,u,se,a,null)}}Gs(t,T,U,H,ee,k,p,!1),ka(t);return;case"select":Ze("invalid",t),u=k=T=null;for(p in a)if(a.hasOwnProperty(p)&&(U=a[p],U!=null))switch(p){case"value":T=U;break;case"defaultValue":k=U;break;case"multiple":u=U;default:_t(t,i,p,U,a,null)}i=T,a=k,t.multiple=!!u,i!=null?ui(t,!!u,i,!1):a!=null&&ui(t,!!u,a,!0);return;case"textarea":Ze("invalid",t),T=p=u=null;for(k in a)if(a.hasOwnProperty(k)&&(U=a[k],U!=null))switch(k){case"value":u=U;break;case"defaultValue":p=U;break;case"children":T=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:_t(t,i,k,U,a,null)}Ks(t,u,p,T),ka(t);return;case"option":for(H in a)if(a.hasOwnProperty(H)&&(u=a[H],u!=null))switch(H){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_t(t,i,H,u,a,null)}return;case"dialog":Ze("beforetoggle",t),Ze("toggle",t),Ze("cancel",t),Ze("close",t);break;case"iframe":case"object":Ze("load",t);break;case"video":case"audio":for(u=0;u<kl.length;u++)Ze(kl[u],t);break;case"image":Ze("error",t),Ze("load",t);break;case"details":Ze("toggle",t);break;case"embed":case"source":case"link":Ze("error",t),Ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in a)if(a.hasOwnProperty(ee)&&(u=a[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(t,i,ee,u,a,null)}return;default:if(Xo(i)){for(se in a)a.hasOwnProperty(se)&&(u=a[se],u!==void 0&&Hd(t,i,se,u,a,void 0));return}}for(U in a)a.hasOwnProperty(U)&&(u=a[U],u!=null&&_t(t,i,U,u,a,null))}function Sw(t,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,T=null,k=null,U=null,H=null,ee=null,se=null;for(ne in a){var ue=a[ne];if(a.hasOwnProperty(ne)&&ue!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":H=ue;default:u.hasOwnProperty(ne)||_t(t,i,ne,null,u,ue)}}for(var te in u){var ne=u[te];if(ue=a[te],u.hasOwnProperty(te)&&(ne!=null||ue!=null))switch(te){case"type":T=ne;break;case"name":p=ne;break;case"checked":ee=ne;break;case"defaultChecked":se=ne;break;case"value":k=ne;break;case"defaultValue":U=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:ne!==ue&&_t(t,i,te,ne,u,ue)}}zn(t,k,U,H,ee,se,T,p);return;case"select":ne=k=U=te=null;for(T in a)if(H=a[T],a.hasOwnProperty(T)&&H!=null)switch(T){case"value":break;case"multiple":ne=H;default:u.hasOwnProperty(T)||_t(t,i,T,null,u,H)}for(p in u)if(T=u[p],H=a[p],u.hasOwnProperty(p)&&(T!=null||H!=null))switch(p){case"value":te=T;break;case"defaultValue":U=T;break;case"multiple":k=T;default:T!==H&&_t(t,i,p,T,u,H)}i=U,a=k,u=ne,te!=null?ui(t,!!a,te,!1):!!u!=!!a&&(i!=null?ui(t,!!a,i,!0):ui(t,!!a,a?[]:"",!1));return;case"textarea":ne=te=null;for(U in a)if(p=a[U],a.hasOwnProperty(U)&&p!=null&&!u.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:_t(t,i,U,null,u,p)}for(k in u)if(p=u[k],T=a[k],u.hasOwnProperty(k)&&(p!=null||T!=null))switch(k){case"value":te=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==T&&_t(t,i,k,p,u,T)}yt(t,te,ne);return;case"option":for(var ze in a)if(te=a[ze],a.hasOwnProperty(ze)&&te!=null&&!u.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:_t(t,i,ze,null,u,te)}for(H in u)if(te=u[H],ne=a[H],u.hasOwnProperty(H)&&te!==ne&&(te!=null||ne!=null))switch(H){case"selected":t.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:_t(t,i,H,te,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in a)te=a[Me],a.hasOwnProperty(Me)&&te!=null&&!u.hasOwnProperty(Me)&&_t(t,i,Me,null,u,te);for(ee in u)if(te=u[ee],ne=a[ee],u.hasOwnProperty(ee)&&te!==ne&&(te!=null||ne!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,i));break;default:_t(t,i,ee,te,u,ne)}return;default:if(Xo(i)){for(var bt in a)te=a[bt],a.hasOwnProperty(bt)&&te!==void 0&&!u.hasOwnProperty(bt)&&Hd(t,i,bt,void 0,u,te);for(se in u)te=u[se],ne=a[se],!u.hasOwnProperty(se)||te===ne||te===void 0&&ne===void 0||Hd(t,i,se,te,u,ne);return}}for(var Y in a)te=a[Y],a.hasOwnProperty(Y)&&te!=null&&!u.hasOwnProperty(Y)&&_t(t,i,Y,null,u,te);for(ue in u)te=u[ue],ne=a[ue],!u.hasOwnProperty(ue)||te===ne||te==null&&ne==null||_t(t,i,ue,te,u,ne)}var Fd=null,Gd=null;function Pc(t){return t.nodeType===9?t:t.ownerDocument}function Qv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Kd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yd=null;function Aw(){var t=window.event;return t&&t.type==="popstate"?t===Yd?!1:(Yd=t,!0):(Yd=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(t){return Zv.resolve(null).then(t).catch(Iw)}:Wv;function Iw(t){setTimeout(function(){throw t})}function us(t){return t==="head"}function Jv(t,i){var a=i,u=0,p=0;do{var T=a.nextSibling;if(t.removeChild(a),T&&T.nodeType===8)if(a=T.data,a==="/$"){if(0<u&&8>u){a=u;var k=t.ownerDocument;if(a&1&&Pl(k.documentElement),a&2&&Pl(k.body),a&4)for(a=k.head,Pl(a),k=a.firstChild;k;){var U=k.nextSibling,H=k.nodeName;k[ke]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&k.rel.toLowerCase()==="stylesheet"||a.removeChild(k),k=U}}if(p===0){t.removeChild(T),ql(i);return}p--}else a==="$"||a==="$?"||a==="$!"?p++:u=a.charCodeAt(0)-48;else u=0;a=T}while(a);ql(i)}function Qd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qd(a),Ae(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function xw(t,i,a,u){for(;t.nodeType===1;){var p=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[ke])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(T=t.getAttribute("rel"),T==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(T!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(T=t.getAttribute("src"),(T!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&T&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var T=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===T)return t}else return t;if(t=Tr(t.nextSibling),t===null)break}return null}function Dw(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Tr(t.nextSibling),t===null))return null;return t}function Xd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ow(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Tr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Wd=null;function e0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function t0(t,i,a){switch(i=Pc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Pl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ae(t)}var pr=new Map,n0=new Set;function Vc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ii=ae.d;ae.d={f:Nw,r:kw,D:Mw,C:Pw,L:Vw,m:Lw,X:Uw,S:jw,M:zw};function Nw(){var t=Ii.f(),i=Cc();return t||i}function kw(t){var i=Xe(t);i!==null&&i.tag===5&&i.type==="form"?wy(i):Ii.r(t)}var po=typeof document>"u"?null:document;function r0(t,i,a){var u=po;if(u&&typeof i=="string"&&i){var p=jt(i);p='link[rel="'+t+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),n0.has(p)||(n0.add(p),t={rel:t,crossOrigin:a,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),ln(i,"link",t),nt(i),u.head.appendChild(i)))}}function Mw(t){Ii.D(t),r0("dns-prefetch",t,null)}function Pw(t,i){Ii.C(t,i),r0("preconnect",t,i)}function Vw(t,i,a){Ii.L(t,i,a);var u=po;if(u&&t&&i){var p='link[rel="preload"][as="'+jt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+jt(a.imageSizes)+'"]')):p+='[href="'+jt(t)+'"]';var T=p;switch(i){case"style":T=go(t);break;case"script":T=yo(t)}pr.has(T)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),pr.set(T,t),u.querySelector(p)!==null||i==="style"&&u.querySelector(Vl(T))||i==="script"&&u.querySelector(Ll(T))||(i=u.createElement("link"),ln(i,"link",t),nt(i),u.head.appendChild(i)))}}function Lw(t,i){Ii.m(t,i);var a=po;if(a&&t){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(t)+'"]',T=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=yo(t)}if(!pr.has(T)&&(t=b({rel:"modulepreload",href:t},i),pr.set(T,t),a.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(T)))return}u=a.createElement("link"),ln(u,"link",t),nt(u),a.head.appendChild(u)}}}function jw(t,i,a){Ii.S(t,i,a);var u=po;if(u&&t){var p=ot(u).hoistableStyles,T=go(t);i=i||"default";var k=p.get(T);if(!k){var U={loading:0,preload:null};if(k=u.querySelector(Vl(T)))U.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=pr.get(T))&&Zd(t,a);var H=k=u.createElement("link");nt(H),ln(H,"link",t),H._p=new Promise(function(ee,se){H.onload=ee,H.onerror=se}),H.addEventListener("load",function(){U.loading|=1}),H.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Lc(k,i,u)}k={type:"stylesheet",instance:k,count:1,state:U},p.set(T,k)}}}function Uw(t,i){Ii.X(t,i);var a=po;if(a&&t){var u=ot(a).hoistableScripts,p=yo(t),T=u.get(p);T||(T=a.querySelector(Ll(p)),T||(t=b({src:t,async:!0},i),(i=pr.get(p))&&Jd(t,i),T=a.createElement("script"),nt(T),ln(T,"link",t),a.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},u.set(p,T))}}function zw(t,i){Ii.M(t,i);var a=po;if(a&&t){var u=ot(a).hoistableScripts,p=yo(t),T=u.get(p);T||(T=a.querySelector(Ll(p)),T||(t=b({src:t,async:!0,type:"module"},i),(i=pr.get(p))&&Jd(t,i),T=a.createElement("script"),nt(T),ln(T,"link",t),a.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},u.set(p,T))}}function i0(t,i,a,u){var p=(p=Ce.current)?Vc(p):null;if(!p)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=go(a.href),a=ot(p).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=go(a.href);var T=ot(p).hoistableStyles,k=T.get(t);if(k||(p=p.ownerDocument||p,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(t,k),(T=p.querySelector(Vl(t)))&&!T._p&&(k.instance=T,k.state.loading=5),pr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},pr.set(t,a),T||$w(p,t,a,k.state))),i&&u===null)throw Error(s(528,""));return k}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yo(a),a=ot(p).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function go(t){return'href="'+jt(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function s0(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function $w(t,i,a,u){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=t.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),ln(i,"link",a),nt(i),t.head.appendChild(i))}function yo(t){return'[src="'+jt(t)+'"]'}function Ll(t){return"script[async]"+t}function a0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=t.querySelector('style[data-href~="'+jt(a.href)+'"]');if(u)return i.instance=u,nt(u),u;var p=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),nt(u),ln(u,"style",p),Lc(u,a.precedence,t),i.instance=u;case"stylesheet":p=go(a.href);var T=t.querySelector(Vl(p));if(T)return i.state.loading|=4,i.instance=T,nt(T),T;u=s0(a),(p=pr.get(p))&&Zd(u,p),T=(t.ownerDocument||t).createElement("link"),nt(T);var k=T;return k._p=new Promise(function(U,H){k.onload=U,k.onerror=H}),ln(T,"link",u),i.state.loading|=4,Lc(T,a.precedence,t),i.instance=T;case"script":return T=yo(a.src),(p=t.querySelector(Ll(T)))?(i.instance=p,nt(p),p):(u=a,(p=pr.get(T))&&(u=b({},a),Jd(u,p)),t=t.ownerDocument||t,p=t.createElement("script"),nt(p),ln(p,"link",u),t.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Lc(u,a.precedence,t));return i.instance}function Lc(t,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,T=p,k=0;k<u.length;k++){var U=u[k];if(U.dataset.precedence===i)T=U;else if(T!==p)break}T?T.parentNode.insertBefore(t,T.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Zd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var jc=null;function o0(t,i,a){if(jc===null){var u=new Map,p=jc=new Map;p.set(a,u)}else p=jc,u=p.get(a),u||(u=new Map,p.set(a,u));if(u.has(t))return u;for(u.set(t,null),a=a.getElementsByTagName(t),p=0;p<a.length;p++){var T=a[p];if(!(T[ke]||T[le]||t==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var k=T.getAttribute(i)||"";k=t+k;var U=u.get(k);U?U.push(T):u.set(k,[T])}}return u}function l0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Bw(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function u0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var jl=null;function qw(){}function Hw(t,i,a){if(jl===null)throw Error(s(475));var u=jl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=go(a.href),T=t.querySelector(Vl(p));if(T){t=T._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=Uc.bind(u),t.then(u,u)),i.state.loading|=4,i.instance=T,nt(T);return}T=t.ownerDocument||t,a=s0(a),(p=pr.get(p))&&Zd(a,p),T=T.createElement("link"),nt(T);var k=T;k._p=new Promise(function(U,H){k.onload=U,k.onerror=H}),ln(T,"link",a),i.instance=T}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Uc.bind(u),t.addEventListener("load",i),t.addEventListener("error",i))}}function Fw(){if(jl===null)throw Error(s(475));var t=jl;return t.stylesheets&&t.count===0&&em(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&em(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Uc(){if(this.count--,this.count===0){if(this.stylesheets)em(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zc=null;function em(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zc=new Map,i.forEach(Gw,t),zc=null,Uc.call(t))}function Gw(t,i){if(!(i.state.loading&4)){var a=zc.get(t);if(a)var u=a.get(null);else{a=new Map,zc.set(t,a);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<p.length;T++){var k=p[T];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(a.set(k.dataset.precedence,k),u=k)}u&&a.set(null,u)}p=i.instance,k=p.getAttribute("data-precedence"),T=a.get(k)||u,T===u&&a.set(null,p),a.set(k,p),this.count++,u=Uc.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),T?T.parentNode.insertBefore(p,T.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),i.state.loading|=4}}var Ul={$$typeof:x,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Kw(t,i,a,u,p,T,k,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=T,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function c0(t,i,a,u,p,T,k,U,H,ee,se,ue){return t=new Kw(t,i,a,k,U,H,ee,ue),i=1,T===!0&&(i|=24),T=Bn(3,null,null,i),t.current=T,T.stateNode=t,i=Pf(),i.refCount++,t.pooledCache=i,i.refCount++,T.memoizedState={element:u,isDehydrated:a,cache:i},Uf(T),t}function h0(t){return t?(t=Ka,t):Ka}function f0(t,i,a,u,p,T){p=h0(p),u.context===null?u.context=p:u.pendingContext=p,u=Xi(i),u.payload={element:a},T=T===void 0?null:T,T!==null&&(u.callback=T),a=Wi(t,u,i),a!==null&&(Kn(a,t,i),pl(a,t,i))}function d0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function tm(t,i){d0(t,i),(t=t.alternate)&&d0(t,i)}function m0(t){if(t.tag===13){var i=Ga(t,67108864);i!==null&&Kn(i,t,67108864),tm(t,67108864)}}var $c=!0;function Yw(t,i,a,u){var p=K.T;K.T=null;var T=ae.p;try{ae.p=2,nm(t,i,a,u)}finally{ae.p=T,K.T=p}}function Qw(t,i,a,u){var p=K.T;K.T=null;var T=ae.p;try{ae.p=8,nm(t,i,a,u)}finally{ae.p=T,K.T=p}}function nm(t,i,a,u){if($c){var p=rm(u);if(p===null)qd(t,i,u,Bc,a),g0(t,u);else if(Ww(p,t,i,a,u))u.stopPropagation();else if(g0(t,u),i&4&&-1<Xw.indexOf(t)){for(;p!==null;){var T=Xe(p);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var k=Ln(T.pendingLanes);if(k!==0){var U=T;for(U.pendingLanes|=2,U.entangledLanes|=2;k;){var H=1<<31-Vt(k);U.entanglements[1]|=H,k&=~H}Yr(T),(mt&6)===0&&(Ac=An()+500,Nl(0))}}break;case 13:U=Ga(T,2),U!==null&&Kn(U,T,2),Cc(),tm(T,2)}if(T=rm(u),T===null&&qd(t,i,u,Bc,a),T===p)break;p=T}p!==null&&u.stopPropagation()}else qd(t,i,u,null,a)}}function rm(t){return t=ar(t),im(t)}var Bc=null;function im(t){if(Bc=null,t=Pe(t),t!==null){var i=l(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Bc=t,null}function p0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Go()){case qs:return 2;case Ui:return 8;case si:case vr:return 32;case Jn:return 268435456;default:return 32}default:return 32}}var sm=!1,cs=null,hs=null,fs=null,zl=new Map,$l=new Map,ds=[],Xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g0(t,i){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(i.pointerId)}}function Bl(t,i,a,u,p,T){return t===null||t.nativeEvent!==T?(t={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:T,targetContainers:[p]},i!==null&&(i=Xe(i),i!==null&&m0(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),t)}function Ww(t,i,a,u,p){switch(i){case"focusin":return cs=Bl(cs,t,i,a,u,p),!0;case"dragenter":return hs=Bl(hs,t,i,a,u,p),!0;case"mouseover":return fs=Bl(fs,t,i,a,u,p),!0;case"pointerover":var T=p.pointerId;return zl.set(T,Bl(zl.get(T)||null,t,i,a,u,p)),!0;case"gotpointercapture":return T=p.pointerId,$l.set(T,Bl($l.get(T)||null,t,i,a,u,p)),!0}return!1}function y0(t){var i=Pe(t.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,X(t.priority,function(){if(a.tag===13){var u=Gn();u=Mr(u);var p=Ga(a,u);p!==null&&Kn(p,a,u),tm(a,u)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=rm(t.nativeEvent);if(a===null){a=t.nativeEvent;var u=new a.constructor(a.type,a);ci=u,a.target.dispatchEvent(u),ci=null}else return i=Xe(a),i!==null&&m0(i),t.blockedOn=a,!1;i.shift()}return!0}function v0(t,i,a){qc(t)&&a.delete(i)}function Zw(){sm=!1,cs!==null&&qc(cs)&&(cs=null),hs!==null&&qc(hs)&&(hs=null),fs!==null&&qc(fs)&&(fs=null),zl.forEach(v0),$l.forEach(v0)}function Hc(t,i){t.blockedOn===i&&(t.blockedOn=null,sm||(sm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Zw)))}var Fc=null;function _0(t){Fc!==t&&(Fc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fc===t&&(Fc=null);for(var i=0;i<t.length;i+=3){var a=t[i],u=t[i+1],p=t[i+2];if(typeof u!="function"){if(im(u||a)===null)continue;break}var T=Xe(a);T!==null&&(t.splice(i,3),i-=3,id(T,{pending:!0,data:p,method:a.method,action:u},u,p))}}))}function ql(t){function i(H){return Hc(H,t)}cs!==null&&Hc(cs,t),hs!==null&&Hc(hs,t),fs!==null&&Hc(fs,t),zl.forEach(i),$l.forEach(i);for(var a=0;a<ds.length;a++){var u=ds[a];u.blockedOn===t&&(u.blockedOn=null)}for(;0<ds.length&&(a=ds[0],a.blockedOn===null);)y0(a),a.blockedOn===null&&ds.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var p=a[u],T=a[u+1],k=p[ge]||null;if(typeof T=="function")k||_0(a);else if(k){var U=null;if(T&&T.hasAttribute("formAction")){if(p=T,k=T[ge]||null)U=k.formAction;else if(im(p)!==null)continue}else U=k.action;typeof U=="function"?a[u+1]=U:(a.splice(u,3),u-=3),_0(a)}}}function am(t){this._internalRoot=t}Gc.prototype.render=am.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=Gn();f0(a,u,t,i,null,null)},Gc.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;f0(t.current,2,null,t,null,null),Cc(),i[Ee]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var i=F();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ds.length&&i!==0&&i<ds[a].priority;a++);ds.splice(a,0,t),a===0&&y0(t)}};var b0=e.version;if(b0!=="19.1.0")throw Error(s(527,b0,"19.1.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var Jw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ut=Kc.inject(Jw),Fe=Kc}catch{}}return Fl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,u="",p=Vy,T=Ly,k=jy,U=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(T=i.onCaughtError),i.onRecoverableError!==void 0&&(k=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(U=i.unstable_transitionCallbacks)),i=c0(t,1,!1,null,null,a,u,p,T,k,U,null),t[Ee]=i.current,Bd(t),new am(i)},Fl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var u=!1,p="",T=Vy,k=Ly,U=jy,H=null,ee=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(T=a.onUncaughtError),a.onCaughtError!==void 0&&(k=a.onCaughtError),a.onRecoverableError!==void 0&&(U=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks),a.formState!==void 0&&(ee=a.formState)),i=c0(t,1,!0,i,a??null,u,p,T,k,U,H,ee),i.context=h0(null),a=i.current,u=Gn(),u=Mr(u),p=Xi(u),p.callback=null,Wi(a,p,u),a=u,i.current.lanes=a,_r(i,a),Yr(i),t[Ee]=i.current,Bd(t),new Gc(i)},Fl.version="19.1.0",Fl}var O0;function uT(){if(O0)return um.exports;O0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),um.exports=lT(),um.exports}var cT=uT(),Gl={},N0;function hT(){if(N0)return Gl;N0=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.parse=h,Gl.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function h(y,_){const v=new l,E=y.length;if(E<2)return v;const R=(_==null?void 0:_.decode)||b;let w=0;do{const A=y.indexOf("=",w);if(A===-1)break;const x=y.indexOf(";",w),M=x===-1?E:x;if(A>M){w=y.lastIndexOf(";",A-1)+1;continue}const V=c(y,w,A),P=m(y,A,V),O=y.slice(V,P);if(v[O]===void 0){let S=c(y,A+1,M),C=m(y,M,S);const D=R(y.slice(S,C));v[O]=D}w=M+1}while(w<E);return v}function c(y,_,v){do{const E=y.charCodeAt(_);if(E!==32&&E!==9)return _}while(++_<v);return v}function m(y,_,v){for(;_>v;){const E=y.charCodeAt(--_);if(E!==32&&E!==9)return _+1}return v}function g(y,_,v){const E=(v==null?void 0:v.encode)||encodeURIComponent;if(!r.test(y))throw new TypeError(`argument name is invalid: ${y}`);const R=E(_);if(!e.test(R))throw new TypeError(`argument val is invalid: ${_}`);let w=y+"="+R;if(!v)return w;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);w+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);w+="; Domain="+v.domain}if(v.path){if(!s.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);w+="; Path="+v.path}if(v.expires){if(!d(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);w+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(w+="; HttpOnly"),v.secure&&(w+="; Secure"),v.partitioned&&(w+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return w}function b(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function d(y){return o.call(y)==="[object Date]"}return Gl}hT();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mb=r=>{throw TypeError(r)},fT=(r,e,n)=>e.has(r)||Mb("Cannot "+n),dm=(r,e,n)=>(fT(r,e,"read from private field"),n?n.call(r):e.get(r)),dT=(r,e,n)=>e.has(r)?Mb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,n),k0="popstate";function mT(r={}){function e(o,l){let{pathname:h="/",search:c="",hash:m=""}=Li(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),cu("",{pathname:h,search:c,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(o,l){let h=o.document.querySelector("base"),c="";if(h&&h.getAttribute("href")){let m=o.location.href,g=m.indexOf("#");c=g===-1?m:m.slice(0,g)}return c+"#"+(typeof l=="string"?l:Os(l))}function s(o,l){Pt(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return gT(e,n,s,r)}function Je(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Pt(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pT(){return Math.random().toString(36).substring(2,10)}function M0(r,e){return{usr:r.state,key:r.key,idx:e}}function cu(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Li(e):e,state:n,key:e&&e.key||s||pT()}}function Os({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Li(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function gT(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,c="POP",m=null,g=b();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function b(){return(h.state||{idx:null}).idx}function d(){c="POP";let R=b(),w=R==null?null:R-g;g=R,m&&m({action:c,location:E.location,delta:w})}function y(R,w){c="PUSH";let A=cu(E.location,R,w);n&&n(A,R),g=b()+1;let x=M0(A,g),M=E.createHref(A);try{h.pushState(x,"",M)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(M)}l&&m&&m({action:c,location:E.location,delta:1})}function _(R,w){c="REPLACE";let A=cu(E.location,R,w);n&&n(A,R),g=b();let x=M0(A,g),M=E.createHref(A);h.replaceState(x,"",M),l&&m&&m({action:c,location:E.location,delta:0})}function v(R){let w=o.location.origin!=="null"?o.location.origin:o.location.href,A=typeof R=="string"?R:Os(R);return A=A.replace(/ $/,"%20"),Je(w,`No window.location.(origin|href) available to create URL for href: ${A}`),new URL(A,w)}let E={get action(){return c},get location(){return r(o,h)},listen(R){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(k0,d),m=R,()=>{o.removeEventListener(k0,d),m=null}},createHref(R){return e(o,R)},createURL:v,encodeLocation(R){let w=v(R);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:_,go(R){return h.go(R)}};return E}var Xl,P0=class{constructor(r){if(dT(this,Xl,new Map),r)for(let[e,n]of r)this.set(e,n)}get(r){if(dm(this,Xl).has(r))return dm(this,Xl).get(r);if(r.defaultValue!==void 0)return r.defaultValue;throw new Error("No value found for context")}set(r,e){dm(this,Xl).set(r,e)}};Xl=new WeakMap;var yT=new Set(["lazy","caseSensitive","path","id","index","children"]);function vT(r){return yT.has(r)}var _T=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function bT(r){return _T.has(r)}function ET(r){return r.index===!0}function ph(r,e,n=[],s={}){return r.map((o,l)=>{let h=[...n,String(l)],c=typeof o.id=="string"?o.id:h.join("-");if(Je(o.index!==!0||!o.children,"Cannot specify children on an index route"),Je(!s[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),ET(o)){let m={...o,...e(o),id:c};return s[c]=m,m}else{let m={...o,...e(o),id:c,children:void 0};return s[c]=m,o.children&&(m.children=ph(o.children,e,h,s)),m}})}function ys(r,e,n="/"){return nh(r,e,n,!1)}function nh(r,e,n,s){let o=typeof e=="string"?Li(e):e,l=yr(o.pathname||"/",n);if(l==null)return null;let h=Pb(r);TT(h);let c=null;for(let m=0;c==null&&m<h.length;++m){let g=MT(l);c=NT(h[m],g,s)}return c}function wT(r,e){let{route:n,pathname:s,params:o}=r;return{id:n.id,pathname:s,params:o,data:e[n.id],handle:n.handle}}function Pb(r,e=[],n=[],s=""){let o=(l,h,c)=>{let m={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(Je(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length));let g=Xr([s,m.relativePath]),b=n.concat(m);l.children&&l.children.length>0&&(Je(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Pb(l.children,e,b,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:DT(g,l.index),routesMeta:b})};return r.forEach((l,h)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))o(l,h);else for(let m of Vb(l.path))o(l,h,m)}),e}function Vb(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Vb(s.join("/")),c=[];return c.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&c.push(...h),c.map(m=>r.startsWith("/")&&m===""?"/":m)}function TT(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:OT(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var ST=/^:[\w-]+$/,AT=3,RT=2,CT=1,IT=10,xT=-2,V0=r=>r==="*";function DT(r,e){let n=r.split("/"),s=n.length;return n.some(V0)&&(s+=xT),e&&(s+=RT),n.filter(o=>!V0(o)).reduce((o,l)=>o+(ST.test(l)?AT:l===""?CT:IT),s)}function OT(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function NT(r,e,n=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let c=0;c<s.length;++c){let m=s[c],g=c===s.length-1,b=l==="/"?e:e.slice(l.length)||"/",d=gh({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},b),y=m.route;if(!d&&g&&n&&!s[s.length-1].route.index&&(d=gh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!d)return null;Object.assign(o,d.params),h.push({params:o,pathname:Xr([l,d.pathname]),pathnameBase:LT(Xr([l,d.pathnameBase])),route:y}),d.pathnameBase!=="/"&&(l=Xr([l,d.pathnameBase]))}return h}function gh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=kT(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:s.reduce((g,{paramName:b,isOptional:d},y)=>{if(b==="*"){let v=c[y]||"";h=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const _=c[y];return d&&!_?g[b]=void 0:g[b]=(_||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:r}}function kT(r,e=!1,n=!0){Pt(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,c,m)=>(s.push({paramName:c,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function MT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pt(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function yr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function PT(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Li(r):r;return{pathname:n?n.startsWith("/")?n:VT(n,e):e,search:jT(s),hash:UT(o)}}function VT(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function mm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lb(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ap(r){let e=Lb(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function op(r,e,n,s=!1){let o;typeof r=="string"?o=Li(r):(o={...r},Je(!o.pathname||!o.pathname.includes("?"),mm("?","pathname","search",o)),Je(!o.pathname||!o.pathname.includes("#"),mm("#","pathname","hash",o)),Je(!o.search||!o.search.includes("#"),mm("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,c;if(h==null)c=n;else{let d=e.length-1;if(!s&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),d-=1;o.pathname=y.join("/")}c=d>=0?e[d]:"/"}let m=PT(o,c),g=h&&h!=="/"&&h.endsWith("/"),b=(l||h===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||b)&&(m.pathname+="/"),m}var Xr=r=>r.join("/").replace(/\/\/+/g,"/"),LT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),jT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,UT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,yh=class{constructor(r,e,n,s=!1){this.status=r,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function hu(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var jb=["POST","PUT","PATCH","DELETE"],zT=new Set(jb),$T=["GET",...jb],BT=new Set($T),qT=new Set([301,302,303,307,308]),HT=new Set([307,308]),pm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},FT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Kl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GT=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),Ub="remix-router-transitions",zb=Symbol("ResetLoaderData");function KT(r){const e=r.window?r.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Je(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=r.hydrationRouteProperties||[],o=r.mapRouteProperties||GT,l={},h=ph(r.routes,o,void 0,l),c,m=r.basename||"/",g=r.dataStrategy||ZT,b={unstable_middleware:!1,...r.future},d=null,y=new Set,_=null,v=null,E=null,R=r.hydrationData!=null,w=ys(h,r.history.location,m),A=!1,x=null;if(w==null&&!r.patchRoutesOnNavigation){let F=gr(404,{pathname:r.history.location.pathname}),{matches:X,route:J}=Y0(h);w=X,x={[J.id]:F}}w&&!r.hydrationData&&Rn(w,h,r.history.location.pathname).active&&(w=null);let M;if(w)if(w.some(F=>F.route.lazy))M=!1;else if(!w.some(F=>F.route.loader))M=!0;else{let F=r.hydrationData?r.hydrationData.loaderData:null,X=r.hydrationData?r.hydrationData.errors:null;if(X){let J=w.findIndex(le=>X[le.route.id]!==void 0);M=w.slice(0,J+1).every(le=>!Om(le.route,F,X))}else M=w.every(J=>!Om(J.route,F,X))}else{M=!1,w=[];let F=Rn(null,h,r.history.location.pathname);F.active&&F.matches&&(A=!0,w=F.matches)}let V,P={historyAction:r.history.action,location:r.history.location,matches:w,initialized:M,navigation:pm,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||x,fetchers:new Map,blockers:new Map},O="POP",S=!1,C,D=!1,L=new Map,$=null,j=!1,ce=!1,pe=new Set,K=new Map,ae=0,ye=-1,Re=new Map,B=new Set,re=new Map,me=new Map,he=new Set,_e=new Map,Le,Ce=null;function Tt(){if(d=r.history.listen(({action:F,location:X,delta:J})=>{if(Le){Le(),Le=void 0;return}Pt(_e.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let le=Bi({currentLocation:P.location,nextLocation:X,historyAction:F});if(le&&J!=null){let ge=new Promise(Ee=>{Le=Ee});r.history.go(J*-1),tr(le,{state:"blocked",location:X,proceed(){tr(le,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),ge.then(()=>r.history.go(J))},reset(){let Ee=new Map(P.blockers);Ee.set(le,Kl),At({blockers:Ee})}});return}return Sn(F,X)}),n){uS(e,L);let F=()=>cS(e,L);e.addEventListener("pagehide",F),$=()=>e.removeEventListener("pagehide",F)}return P.initialized||Sn("POP",P.location,{initialHydration:!0}),V}function gt(){d&&d(),$&&$(),y.clear(),C&&C.abort(),P.fetchers.forEach((F,X)=>Vt(X)),P.blockers.forEach((F,X)=>ai(X))}function Zn(F){return y.add(F),()=>y.delete(F)}function At(F,X={}){P={...P,...F};let J=[],le=[];P.fetchers.forEach((ge,Ee)=>{ge.state==="idle"&&(he.has(Ee)?J.push(Ee):le.push(Ee))}),he.forEach(ge=>{!P.fetchers.has(ge)&&!K.has(ge)&&J.push(ge)}),[...y].forEach(ge=>ge(P,{deletedFetchers:J,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),J.forEach(ge=>Vt(ge)),le.forEach(ge=>P.fetchers.delete(ge))}function dn(F,X,{flushSync:J}={}){var Ie,ke;let le=P.actionData!=null&&P.navigation.formMethod!=null&&Qn(P.navigation.formMethod)&&P.navigation.state==="loading"&&((Ie=F.state)==null?void 0:Ie._isRedirect)!==!0,ge;X.actionData?Object.keys(X.actionData).length>0?ge=X.actionData:ge=null:le?ge=P.actionData:ge=null;let Ee=X.loaderData?G0(P.loaderData,X.loaderData,X.matches||[],X.errors):P.loaderData,Oe=P.blockers;Oe.size>0&&(Oe=new Map(Oe),Oe.forEach((Ae,Pe)=>Oe.set(Pe,Kl)));let we=S===!0||P.navigation.formMethod!=null&&Qn(P.navigation.formMethod)&&((ke=F.state)==null?void 0:ke._isRedirect)!==!0;c&&(h=c,c=void 0),j||O==="POP"||(O==="PUSH"?r.history.push(F,F.state):O==="REPLACE"&&r.history.replace(F,F.state));let Se;if(O==="POP"){let Ae=L.get(P.location.pathname);Ae&&Ae.has(F.pathname)?Se={currentLocation:P.location,nextLocation:F}:L.has(F.pathname)&&(Se={currentLocation:F,nextLocation:P.location})}else if(D){let Ae=L.get(P.location.pathname);Ae?Ae.add(F.pathname):(Ae=new Set([F.pathname]),L.set(P.location.pathname,Ae)),Se={currentLocation:P.location,nextLocation:F}}At({...X,actionData:ge,loaderData:Ee,historyAction:O,location:F,initialized:!0,navigation:pm,revalidation:"idle",restoreScrollPosition:qi(F,X.matches||P.matches),preventScrollReset:we,blockers:Oe},{viewTransitionOpts:Se,flushSync:J===!0}),O="POP",S=!1,D=!1,j=!1,ce=!1,Ce==null||Ce.resolve(),Ce=null}async function xr(F,X){if(typeof F=="number"){r.history.go(F);return}let J=Dm(P.location,P.matches,m,F,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:le,submission:ge,error:Ee}=L0(!1,J,X),Oe=P.location,we=cu(P.location,le,X&&X.state);we={...we,...r.history.encodeLocation(we)};let Se=X&&X.replace!=null?X.replace:void 0,Ie="PUSH";Se===!0?Ie="REPLACE":Se===!1||ge!=null&&Qn(ge.formMethod)&&ge.formAction===P.location.pathname+P.location.search&&(Ie="REPLACE");let ke=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,Ae=(X&&X.flushSync)===!0,Pe=Bi({currentLocation:Oe,nextLocation:we,historyAction:Ie});if(Pe){tr(Pe,{state:"blocked",location:we,proceed(){tr(Pe,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),xr(F,X)},reset(){let Xe=new Map(P.blockers);Xe.set(Pe,Kl),At({blockers:Xe})}});return}await Sn(Ie,we,{submission:ge,pendingError:Ee,preventScrollReset:ke,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:Ae})}function ii(){Ce||(Ce=hS()),$i(),At({revalidation:"loading"});let F=Ce.promise;return P.navigation.state==="submitting"?F:P.navigation.state==="idle"?(Sn(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),F):(Sn(O||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:D===!0}),F)}async function Sn(F,X,J){C&&C.abort(),C=null,O=F,j=(J&&J.startUninterruptedRevalidation)===!0,_r(P.location,P.matches),S=(J&&J.preventScrollReset)===!0,D=(J&&J.enableViewTransition)===!0;let le=c||h,ge=J&&J.overrideNavigation,Ee=J!=null&&J.initialHydration&&P.matches&&P.matches.length>0&&!A?P.matches:ys(le,X,m),Oe=(J&&J.flushSync)===!0;if(Ee&&P.initialized&&!ce&&iS(P.location,X)&&!(J&&J.submission&&Qn(J.submission.formMethod))){dn(X,{matches:Ee},{flushSync:Oe});return}let we=Rn(Ee,le,X.pathname);if(we.active&&we.matches&&(Ee=we.matches),!Ee){let{error:ot,notFoundMatches:nt,route:Ye}=oi(X.pathname);dn(X,{matches:nt,loaderData:{},errors:{[Ye.id]:ot}},{flushSync:Oe});return}C=new AbortController;let Se=vo(r.history,X,C.signal,J&&J.submission),Ie=new P0(r.unstable_getContext?await r.unstable_getContext():void 0),ke;if(J&&J.pendingError)ke=[va(Ee).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&Qn(J.submission.formMethod)){let ot=await Bs(Se,X,J.submission,Ee,Ie,we.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:Oe});if(ot.shortCircuited)return;if(ot.pendingActionResult){let[nt,Ye]=ot.pendingActionResult;if(Yn(Ye)&&hu(Ye.error)&&Ye.error.status===404){C=null,dn(X,{matches:ot.matches,loaderData:{},errors:{[nt]:Ye.error}});return}}Ee=ot.matches||Ee,ke=ot.pendingActionResult,ge=gm(X,J.submission),Oe=!1,we.active=!1,Se=vo(r.history,Se.url,Se.signal)}let{shortCircuited:Ae,matches:Pe,loaderData:Xe,errors:ht}=await Oa(Se,X,Ee,Ie,we.active,ge,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,Oe,ke);Ae||(C=null,dn(X,{matches:Pe||Ee,...K0(ke),loaderData:Xe,errors:ht}))}async function Bs(F,X,J,le,ge,Ee,Oe,we={}){$i();let Se=oS(X,J);if(At({navigation:Se},{flushSync:we.flushSync===!0}),Ee){let Ae=await kr(le,X.pathname,F.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){let Pe=va(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,pendingActionResult:[Pe,{type:"error",error:Ae.error}]}}else if(Ae.matches)le=Ae.matches;else{let{notFoundMatches:Pe,error:Xe,route:ht}=oi(X.pathname);return{matches:Pe,pendingActionResult:[ht.id,{type:"error",error:Xe}]}}}let Ie,ke=Wl(le,X);if(!ke.route.action&&!ke.route.lazy)Ie={type:"error",error:gr(405,{method:F.method,pathname:X.pathname,routeId:ke.route.id})};else{let Ae=So(o,l,F,le,ke,Oe?[]:s,ge),Pe=await Jn(F,Ae,ge,null);if(Ie=Pe[ke.route.id],!Ie){for(let Xe of le)if(Pe[Xe.route.id]){Ie=Pe[Xe.route.id];break}}if(F.signal.aborted)return{shortCircuited:!0}}if(_a(Ie)){let Ae;return we&&we.replace!=null?Ae=we.replace:Ae=q0(Ie.response.headers.get("Location"),new URL(F.url),m)===P.location.pathname+P.location.search,await vr(F,Ie,!0,{submission:J,replace:Ae}),{shortCircuited:!0}}if(Yn(Ie)){let Ae=va(le,ke.route.id);return(we&&we.replace)!==!0&&(O="PUSH"),{matches:le,pendingActionResult:[Ae.route.id,Ie,ke.route.id]}}return{matches:le,pendingActionResult:[ke.route.id,Ie]}}async function Oa(F,X,J,le,ge,Ee,Oe,we,Se,Ie,ke,Ae){let Pe=Ee||gm(X,Oe),Xe=Oe||we||X0(Pe),ht=!j&&!Ie;if(ge){if(ht){let Lt=An(Ae);At({navigation:Pe,...Lt!==void 0?{actionData:Lt}:{}},{flushSync:ke})}let $e=await kr(J,X.pathname,F.signal);if($e.type==="aborted")return{shortCircuited:!0};if($e.type==="error"){let Lt=va($e.partialMatches).route.id;return{matches:$e.partialMatches,loaderData:{},errors:{[Lt]:$e.error}}}else if($e.matches)J=$e.matches;else{let{error:Lt,notFoundMatches:Un,route:On}=oi(X.pathname);return{matches:Un,loaderData:{},errors:{[On.id]:Lt}}}}let ot=c||h,{dsMatches:nt,revalidatingFetchers:Ye}=j0(F,le,o,l,r.history,P,J,Xe,X,Ie?[]:s,Ie===!0,ce,pe,he,re,B,ot,m,Ae);if(ye=++ae,!r.dataStrategy&&!nt.some($e=>$e.shouldLoad)&&Ye.length===0){let $e=Or();return dn(X,{matches:J,loaderData:{},errors:Ae&&Yn(Ae[1])?{[Ae[0]]:Ae[1].error}:null,...K0(Ae),...$e?{fetchers:new Map(P.fetchers)}:{}},{flushSync:ke}),{shortCircuited:!0}}if(ht){let $e={};if(!ge){$e.navigation=Pe;let Lt=An(Ae);Lt!==void 0&&($e.actionData=Lt)}Ye.length>0&&($e.fetchers=Go(Ye)),At($e,{flushSync:ke})}Ye.forEach($e=>{er($e.key),$e.controller&&K.set($e.key,$e.controller)});let rr=()=>Ye.forEach($e=>er($e.key));C&&C.signal.addEventListener("abort",rr);let{loaderResults:Bt,fetcherResults:Cn}=await zi(nt,Ye,F,le);if(F.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",rr),Ye.forEach($e=>K.delete($e.key));let nn=Yc(Bt);if(nn)return await vr(F,nn.result,!0,{replace:Se}),{shortCircuited:!0};if(nn=Yc(Cn),nn)return B.add(nn.key),await vr(F,nn.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:Pr,errors:jn}=F0(P,J,Bt,Ae,Ye,Cn);Ie&&P.errors&&(jn={...P.errors,...jn});let Fi=Or(),pn=Nr(ye),In=Fi||pn||Ye.length>0;return{matches:J,loaderData:Pr,errors:jn,...In?{fetchers:new Map(P.fetchers)}:{}}}function An(F){if(F&&!Yn(F[1]))return{[F[0]]:F[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function Go(F){return F.forEach(X=>{let J=P.fetchers.get(X.key),le=Yl(void 0,J?J.data:void 0);P.fetchers.set(X.key,le)}),new Map(P.fetchers)}async function qs(F,X,J,le){er(F);let ge=(le&&le.flushSync)===!0,Ee=c||h,Oe=Dm(P.location,P.matches,m,J,X,le==null?void 0:le.relative),we=ys(Ee,Oe,m),Se=Rn(we,Ee,Oe);if(Se.active&&Se.matches&&(we=Se.matches),!we){Fe(F,X,gr(404,{pathname:Oe}),{flushSync:ge});return}let{path:Ie,submission:ke,error:Ae}=L0(!0,Oe,le);if(Ae){Fe(F,X,Ae,{flushSync:ge});return}let Pe=Wl(we,Ie),Xe=new P0(r.unstable_getContext?await r.unstable_getContext():void 0),ht=(le&&le.preventScrollReset)===!0;if(ke&&Qn(ke.formMethod)){await Ui(F,X,Ie,Pe,we,Xe,Se.active,ge,ht,ke);return}re.set(F,{routeId:X,path:Ie}),await si(F,X,Ie,Pe,we,Xe,Se.active,ge,ht,ke)}async function Ui(F,X,J,le,ge,Ee,Oe,we,Se,Ie){$i(),re.delete(F);function ke(Et){if(!Et.route.action&&!Et.route.lazy){let ir=gr(405,{method:Ie.formMethod,pathname:J,routeId:X});return Fe(F,X,ir,{flushSync:we}),!0}return!1}if(!Oe&&ke(le))return;let Ae=P.fetchers.get(F);ut(F,lS(Ie,Ae),{flushSync:we});let Pe=new AbortController,Xe=vo(r.history,J,Pe.signal,Ie);if(Oe){let Et=await kr(ge,J,Xe.signal,F);if(Et.type==="aborted")return;if(Et.type==="error"){Fe(F,X,Et.error,{flushSync:we});return}else if(Et.matches){if(ge=Et.matches,le=Wl(ge,J),ke(le))return}else{Fe(F,X,gr(404,{pathname:J}),{flushSync:we});return}}K.set(F,Pe);let ht=ae,ot=So(o,l,Xe,ge,le,s,Ee),Ye=(await Jn(Xe,ot,Ee,F))[le.route.id];if(Xe.signal.aborted){K.get(F)===Pe&&K.delete(F);return}if(he.has(F)){if(_a(Ye)||Yn(Ye)){ut(F,gs(void 0));return}}else{if(_a(Ye))if(K.delete(F),ye>ht){ut(F,gs(void 0));return}else return B.add(F),ut(F,Yl(Ie)),vr(Xe,Ye,!1,{fetcherSubmission:Ie,preventScrollReset:Se});if(Yn(Ye)){Fe(F,X,Ye.error);return}}let rr=P.navigation.location||P.location,Bt=vo(r.history,rr,Pe.signal),Cn=c||h,nn=P.navigation.state!=="idle"?ys(Cn,P.navigation.location,m):P.matches;Je(nn,"Didn't find any matches after fetcher action");let Pr=++ae;Re.set(F,Pr);let jn=Yl(Ie,Ye.data);P.fetchers.set(F,jn);let{dsMatches:Fi,revalidatingFetchers:pn}=j0(Bt,Ee,o,l,r.history,P,nn,Ie,rr,s,!1,ce,pe,he,re,B,Cn,m,[le.route.id,Ye]);pn.filter(Et=>Et.key!==F).forEach(Et=>{let ir=Et.key,li=P.fetchers.get(ir),rn=Yl(void 0,li?li.data:void 0);P.fetchers.set(ir,rn),er(ir),Et.controller&&K.set(ir,Et.controller)}),At({fetchers:new Map(P.fetchers)});let In=()=>pn.forEach(Et=>er(Et.key));Pe.signal.addEventListener("abort",In);let{loaderResults:$e,fetcherResults:Lt}=await zi(Fi,pn,Bt,Ee);if(Pe.signal.aborted)return;Pe.signal.removeEventListener("abort",In),Re.delete(F),K.delete(F),pn.forEach(Et=>K.delete(Et.key));let Un=Yc($e);if(Un)return vr(Bt,Un.result,!1,{preventScrollReset:Se});if(Un=Yc(Lt),Un)return B.add(Un.key),vr(Bt,Un.result,!1,{preventScrollReset:Se});let{loaderData:On,errors:Vr}=F0(P,nn,$e,void 0,pn,Lt);if(P.fetchers.has(F)){let Et=gs(Ye.data);P.fetchers.set(F,Et)}Nr(Pr),P.navigation.state==="loading"&&Pr>ye?(Je(O,"Expected pending action"),C&&C.abort(),dn(P.navigation.location,{matches:nn,loaderData:On,errors:Vr,fetchers:new Map(P.fetchers)})):(At({errors:Vr,loaderData:G0(P.loaderData,On,nn,Vr),fetchers:new Map(P.fetchers)}),ce=!1)}async function si(F,X,J,le,ge,Ee,Oe,we,Se,Ie){let ke=P.fetchers.get(F);ut(F,Yl(Ie,ke?ke.data:void 0),{flushSync:we});let Ae=new AbortController,Pe=vo(r.history,J,Ae.signal);if(Oe){let Ye=await kr(ge,J,Pe.signal,F);if(Ye.type==="aborted")return;if(Ye.type==="error"){Fe(F,X,Ye.error,{flushSync:we});return}else if(Ye.matches)ge=Ye.matches,le=Wl(ge,J);else{Fe(F,X,gr(404,{pathname:J}),{flushSync:we});return}}K.set(F,Ae);let Xe=ae,ht=So(o,l,Pe,ge,le,s,Ee),nt=(await Jn(Pe,ht,Ee,F))[le.route.id];if(K.get(F)===Ae&&K.delete(F),!Pe.signal.aborted){if(he.has(F)){ut(F,gs(void 0));return}if(_a(nt))if(ye>Xe){ut(F,gs(void 0));return}else{B.add(F),await vr(Pe,nt,!1,{preventScrollReset:Se});return}if(Yn(nt)){Fe(F,X,nt.error);return}ut(F,gs(nt.data))}}async function vr(F,X,J,{submission:le,fetcherSubmission:ge,preventScrollReset:Ee,replace:Oe}={}){X.response.headers.has("X-Remix-Revalidate")&&(ce=!0);let we=X.response.headers.get("Location");Je(we,"Expected a Location header on the redirect Response"),we=q0(we,new URL(F.url),m);let Se=cu(P.location,we,{_isRedirect:!0});if(n){let ht=!1;if(X.response.headers.has("X-Remix-Reload-Document"))ht=!0;else if(lp.test(we)){const ot=r.history.createURL(we);ht=ot.origin!==e.location.origin||yr(ot.pathname,m)==null}if(ht){Oe?e.location.replace(we):e.location.assign(we);return}}C=null;let Ie=Oe===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ke,formAction:Ae,formEncType:Pe}=P.navigation;!le&&!ge&&ke&&Ae&&Pe&&(le=X0(P.navigation));let Xe=le||ge;if(HT.has(X.response.status)&&Xe&&Qn(Xe.formMethod))await Sn(Ie,Se,{submission:{...Xe,formAction:we},preventScrollReset:Ee||S,enableViewTransition:J?D:void 0});else{let ht=gm(Se,le);await Sn(Ie,Se,{overrideNavigation:ht,fetcherSubmission:ge,preventScrollReset:Ee||S,enableViewTransition:J?D:void 0})}}async function Jn(F,X,J,le){let ge,Ee={};try{ge=await JT(g,F,X,le,J,!1)}catch(Oe){return X.filter(we=>we.shouldLoad).forEach(we=>{Ee[we.route.id]={type:"error",error:Oe}}),Ee}for(let[Oe,we]of Object.entries(ge))if(sS(we)){let Se=we.result;Ee[Oe]={type:"redirect",response:nS(Se,F,Oe,X,m)}}else Ee[Oe]=await tS(we);return Ee}async function zi(F,X,J,le){let ge=Jn(J,F,le,null),Ee=Promise.all(X.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let ke=(await Jn(Se.request,Se.matches,le,Se.key))[Se.match.route.id];return{[Se.key]:ke}}else return Promise.resolve({[Se.key]:{type:"error",error:gr(404,{pathname:Se.path})}})})),Oe=await ge,we=(await Ee).reduce((Se,Ie)=>Object.assign(Se,Ie),{});return{loaderResults:Oe,fetcherResults:we}}function $i(){ce=!0,re.forEach((F,X)=>{K.has(X)&&pe.add(X),er(X)})}function ut(F,X,J={}){P.fetchers.set(F,X),At({fetchers:new Map(P.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function Fe(F,X,J,le={}){let ge=va(P.matches,X);Vt(F),At({errors:{[ge.route.id]:J},fetchers:new Map(P.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function mn(F){return me.set(F,(me.get(F)||0)+1),he.has(F)&&he.delete(F),P.fetchers.get(F)||FT}function Vt(F){let X=P.fetchers.get(F);K.has(F)&&!(X&&X.state==="loading"&&Re.has(F))&&er(F),re.delete(F),Re.delete(F),B.delete(F),he.delete(F),pe.delete(F),P.fetchers.delete(F)}function Na(F){let X=(me.get(F)||0)-1;X<=0?(me.delete(F),he.add(F)):me.set(F,X),At({fetchers:new Map(P.fetchers)})}function er(F){let X=K.get(F);X&&(X.abort(),K.delete(F))}function Dr(F){for(let X of F){let J=mn(X),le=gs(J.data);P.fetchers.set(X,le)}}function Or(){let F=[],X=!1;for(let J of B){let le=P.fetchers.get(J);Je(le,`Expected fetcher: ${J}`),le.state==="loading"&&(B.delete(J),F.push(J),X=!0)}return Dr(F),X}function Nr(F){let X=[];for(let[J,le]of Re)if(le<F){let ge=P.fetchers.get(J);Je(ge,`Expected fetcher: ${J}`),ge.state==="loading"&&(er(J),Re.delete(J),X.push(J))}return Dr(X),X.length>0}function Ln(F,X){let J=P.blockers.get(F)||Kl;return _e.get(F)!==X&&_e.set(F,X),J}function ai(F){P.blockers.delete(F),_e.delete(F)}function tr(F,X){let J=P.blockers.get(F)||Kl;Je(J.state==="unblocked"&&X.state==="blocked"||J.state==="blocked"&&X.state==="blocked"||J.state==="blocked"&&X.state==="proceeding"||J.state==="blocked"&&X.state==="unblocked"||J.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${X.state}`);let le=new Map(P.blockers);le.set(F,X),At({blockers:le})}function Bi({currentLocation:F,nextLocation:X,historyAction:J}){if(_e.size===0)return;_e.size>1&&Pt(!1,"A router only supports one blocker at a time");let le=Array.from(_e.entries()),[ge,Ee]=le[le.length-1],Oe=P.blockers.get(ge);if(!(Oe&&Oe.state==="proceeding")&&Ee({currentLocation:F,nextLocation:X,historyAction:J}))return ge}function oi(F){let X=gr(404,{pathname:F}),J=c||h,{matches:le,route:ge}=Y0(J);return{notFoundMatches:le,route:ge,error:X}}function Hs(F,X,J){if(_=F,E=X,v=J||null,!R&&P.navigation===pm){R=!0;let le=qi(P.location,P.matches);le!=null&&At({restoreScrollPosition:le})}return()=>{_=null,E=null,v=null}}function nr(F,X){return v&&v(F,X.map(le=>wT(le,P.loaderData)))||F.key}function _r(F,X){if(_&&E){let J=nr(F,X);_[J]=E()}}function qi(F,X){if(_){let J=nr(F,X),le=_[J];if(typeof le=="number")return le}return null}function Rn(F,X,J){if(r.patchRoutesOnNavigation)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:nh(X,J,m,!0)}}else return{active:!0,matches:nh(X,J,m,!0)||[]};return{active:!1,matches:null}}async function kr(F,X,J,le){if(!r.patchRoutesOnNavigation)return{type:"success",matches:F};let ge=F;for(;;){let Ee=c==null,Oe=c||h,we=l;try{await r.patchRoutesOnNavigation({signal:J,path:X,matches:ge,fetcherKey:le,patch:(ke,Ae)=>{J.aborted||U0(ke,Ae,Oe,we,o)}})}catch(ke){return{type:"error",error:ke,partialMatches:ge}}finally{Ee&&!J.aborted&&(h=[...h])}if(J.aborted)return{type:"aborted"};let Se=ys(Oe,X,m);if(Se)return{type:"success",matches:Se};let Ie=nh(Oe,X,m,!0);if(!Ie||ge.length===Ie.length&&ge.every((ke,Ae)=>ke.route.id===Ie[Ae].route.id))return{type:"success",matches:null};ge=Ie}}function Mr(F){l={},c=ph(F,o,void 0,l)}function Hi(F,X){let J=c==null;U0(F,X,c||h,l,o),J&&(h=[...h],At({}))}return V={get basename(){return m},get future(){return b},get state(){return P},get routes(){return h},get window(){return e},initialize:Tt,subscribe:Zn,enableScrollRestoration:Hs,navigate:xr,fetch:qs,revalidate:ii,createHref:F=>r.history.createHref(F),encodeLocation:F=>r.history.encodeLocation(F),getFetcher:mn,deleteFetcher:Na,dispose:gt,getBlocker:Ln,deleteBlocker:ai,patchRoutes:Hi,_internalFetchControllers:K,_internalSetRoutes:Mr},V}function YT(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function Dm(r,e,n,s,o,l){let h,c;if(o){h=[];for(let g of e)if(h.push(g),g.route.id===o){c=g;break}}else h=e,c=e[e.length-1];let m=op(s||".",ap(h),yr(r.pathname,n)||r.pathname,l==="path");if(s==null&&(m.search=r.search,m.hash=r.hash),(s==null||s===""||s===".")&&c){let g=up(m.search);if(c.route.index&&!g)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&g){let b=new URLSearchParams(m.search),d=b.getAll("index");b.delete("index"),d.filter(_=>_).forEach(_=>b.append("index",_));let y=b.toString();m.search=y?`?${y}`:""}}return n!=="/"&&(m.pathname=m.pathname==="/"?n:Xr([n,m.pathname])),Os(m)}function L0(r,e,n){if(!n||!YT(n))return{path:e};if(n.formMethod&&!aS(n.formMethod))return{path:e,error:gr(405,{method:n.formMethod})};let s=()=>({path:e,error:gr(400,{type:"invalid-body"})}),l=(n.formMethod||"get").toUpperCase(),h=Gb(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Qn(l))return s();let d=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((y,[_,v])=>`${y}${_}=${v}
`,""):String(n.body);return{path:e,submission:{formMethod:l,formAction:h,formEncType:n.formEncType,formData:void 0,json:void 0,text:d}}}else if(n.formEncType==="application/json"){if(!Qn(l))return s();try{let d=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:l,formAction:h,formEncType:n.formEncType,formData:void 0,json:d,text:void 0}}}catch{return s()}}}Je(typeof FormData=="function","FormData is not available in this environment");let c,m;if(n.formData)c=km(n.formData),m=n.formData;else if(n.body instanceof FormData)c=km(n.body),m=n.body;else if(n.body instanceof URLSearchParams)c=n.body,m=H0(c);else if(n.body==null)c=new URLSearchParams,m=new FormData;else try{c=new URLSearchParams(n.body),m=H0(c)}catch{return s()}let g={formMethod:l,formAction:h,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Qn(g.formMethod))return{path:e,submission:g};let b=Li(e);return r&&b.search&&up(b.search)&&c.append("index",""),b.search=`?${c}`,{path:Os(b),submission:g}}function j0(r,e,n,s,o,l,h,c,m,g,b,d,y,_,v,E,R,w,A){var $;let x=A?Yn(A[1])?A[1].error:A[1].data:void 0,M=o.createURL(l.location),V=o.createURL(m),P;if(b&&l.errors){let j=Object.keys(l.errors)[0];P=h.findIndex(ce=>ce.route.id===j)}else if(A&&Yn(A[1])){let j=A[0];P=h.findIndex(ce=>ce.route.id===j)-1}let O=A?A[1].statusCode:void 0,S=O&&O>=400,C={currentUrl:M,currentParams:(($=l.matches[0])==null?void 0:$.params)||{},nextUrl:V,nextParams:h[0].params,...c,actionResult:x,actionStatus:O},D=h.map((j,ce)=>{let{route:pe}=j,K=null;if(P!=null&&ce>P?K=!1:pe.lazy?K=!0:pe.loader==null?K=!1:b?K=Om(pe,l.loaderData,l.errors):QT(l.loaderData,l.matches[ce],j)&&(K=!0),K!==null)return Nm(n,s,r,j,g,e,K);let ae=S?!1:d||M.pathname+M.search===V.pathname+V.search||M.search!==V.search||XT(l.matches[ce],j),ye={...C,defaultShouldRevalidate:ae},Re=vh(j,ye);return Nm(n,s,r,j,g,e,Re,ye)}),L=[];return v.forEach((j,ce)=>{if(b||!h.some(re=>re.route.id===j.routeId)||_.has(ce))return;let pe=ys(R,j.path,w);if(!pe){L.push({key:ce,routeId:j.routeId,path:j.path,matches:null,match:null,request:null,controller:null});return}if(E.has(ce))return;let K=l.fetchers.get(ce),ae=Wl(pe,j.path),ye=new AbortController,Re=vo(o,j.path,ye.signal),B=null;if(y.has(ce))y.delete(ce),B=So(n,s,Re,pe,ae,g,e);else if(K&&K.state!=="idle"&&K.data===void 0)d&&(B=So(n,s,Re,pe,ae,g,e));else{let re={...C,defaultShouldRevalidate:S?!1:d};vh(ae,re)&&(B=So(n,s,Re,pe,ae,g,e,re))}B&&L.push({key:ce,routeId:j.routeId,path:j.path,matches:B,match:ae,request:Re,controller:ye})}),{dsMatches:D,revalidatingFetchers:L}}function Om(r,e,n){if(r.lazy)return!0;if(!r.loader)return!1;let s=e!=null&&e[r.id]!==void 0,o=n!=null&&n[r.id]!==void 0;return!s&&o?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!s&&!o}function QT(r,e,n){let s=!e||n.route.id!==e.route.id,o=!r.hasOwnProperty(n.route.id);return s||o}function XT(r,e){let n=r.route.path;return r.pathname!==e.pathname||n!=null&&n.endsWith("*")&&r.params["*"]!==e.params["*"]}function vh(r,e){if(r.route.shouldRevalidate){let n=r.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function U0(r,e,n,s,o){let l;if(r){let m=s[r];Je(m,`No route found to patch children into: routeId = ${r}`),m.children||(m.children=[]),l=m.children}else l=n;let h=e.filter(m=>!l.some(g=>$b(m,g))),c=ph(h,o,[r||"_","patch",String((l==null?void 0:l.length)||"0")],s);l.push(...c)}function $b(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((n,s)=>{var o;return(o=e.children)==null?void 0:o.some(l=>$b(n,l))}):!1}var z0=new WeakMap,Bb=({key:r,route:e,manifest:n,mapRouteProperties:s})=>{let o=n[e.id];if(Je(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let l=o.lazy[r];if(!l)return;let h=z0.get(o);h||(h={},z0.set(o,h));let c=h[r];if(c)return c;let m=(async()=>{let g=vT(r),d=o[r]!==void 0&&r!=="hasErrorBoundary";if(g)Pt(!g,"Route property "+r+" is not a supported lazy route property. This property will be ignored."),h[r]=Promise.resolve();else if(d)Pt(!1,`Route "${o.id}" has a static property "${r}" defined. The lazy property will be ignored.`);else{let y=await l();y!=null&&(Object.assign(o,{[r]:y}),Object.assign(o,s(o)))}typeof o.lazy=="object"&&(o.lazy[r]=void 0,Object.values(o.lazy).every(y=>y===void 0)&&(o.lazy=void 0))})();return h[r]=m,m},$0=new WeakMap;function WT(r,e,n,s,o){let l=n[r.id];if(Je(l,"No route found in manifest"),!r.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof r.lazy=="function"){let b=$0.get(l);if(b)return{lazyRoutePromise:b,lazyHandlerPromise:b};let d=(async()=>{Je(typeof r.lazy=="function","No lazy route function found");let y=await r.lazy(),_={};for(let v in y){let E=y[v];if(E===void 0)continue;let R=bT(v),A=l[v]!==void 0&&v!=="hasErrorBoundary";R?Pt(!R,"Route property "+v+" is not a supported property to be returned from a lazy route function. This property will be ignored."):A?Pt(!A,`Route "${l.id}" has a static property "${v}" defined but its lazy function is also returning a value for this property. The lazy route property "${v}" will be ignored.`):_[v]=E}Object.assign(l,_),Object.assign(l,{...s(l),lazy:void 0})})();return $0.set(l,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let h=Object.keys(r.lazy),c=[],m;for(let b of h){if(o&&o.includes(b))continue;let d=Bb({key:b,route:r,manifest:n,mapRouteProperties:s});d&&(c.push(d),b===e&&(m=d))}let g=c.length>0?Promise.all(c).then(()=>{}):void 0;return g==null||g.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:m}}async function B0(r){let e=r.matches.filter(o=>o.shouldLoad),n={};return(await Promise.all(e.map(o=>o.resolve()))).forEach((o,l)=>{n[e[l].route.id]=o}),n}async function ZT(r){return r.matches.some(e=>e.route.unstable_middleware)?qb(r,!1,()=>B0(r),(e,n)=>({[n]:{type:"error",result:e}})):B0(r)}async function qb(r,e,n,s){let{matches:o,request:l,params:h,context:c}=r,m={handlerResult:void 0};try{let g=o.flatMap(d=>d.route.unstable_middleware?d.route.unstable_middleware.map(y=>[d.route.id,y]):[]),b=await Hb({request:l,params:h,context:c},g,e,m,n);return e?b:m.handlerResult}catch(g){if(!m.middlewareError)throw g;let b=await s(m.middlewareError.error,m.middlewareError.routeId);return m.handlerResult?Object.assign(m.handlerResult,b):b}}async function Hb(r,e,n,s,o,l=0){let{request:h}=r;if(h.signal.aborted)throw h.signal.reason?h.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${h.method} ${h.url}`);let c=e[l];if(!c)return s.handlerResult=await o(),s.handlerResult;let[m,g]=c,b=!1,d,y=async()=>{if(b)throw new Error("You may only call `next()` once per middleware");b=!0,await Hb(r,e,n,s,o,l+1)};try{let _=await g({request:r.request,params:r.params,context:r.context},y);return b?_===void 0?d:_:y()}catch(_){throw s.middlewareError?s.middlewareError.error!==_&&(s.middlewareError={routeId:m,error:_}):s.middlewareError={routeId:m,error:_},_}}function Fb(r,e,n,s,o){let l=Bb({key:"unstable_middleware",route:s.route,manifest:e,mapRouteProperties:r}),h=WT(s.route,Qn(n.method)?"action":"loader",e,r,o);return{middleware:l,route:h.lazyRoutePromise,handler:h.lazyHandlerPromise}}function Nm(r,e,n,s,o,l,h,c=null){let m=!1,g=Fb(r,e,n,s,o);return{...s,_lazyPromises:g,shouldLoad:h,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler(b){return m=!0,c?typeof b=="boolean"?vh(s,{...c,defaultShouldRevalidate:b}):vh(s,c):h},resolve(b){return m||h||b&&n.method==="GET"&&(s.route.lazy||s.route.loader)?eS({request:n,match:s,lazyHandlerPromise:g==null?void 0:g.handler,lazyRoutePromise:g==null?void 0:g.route,handlerOverride:b,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function So(r,e,n,s,o,l,h,c=null){return s.map(m=>m.route.id!==o.route.id?{...m,shouldLoad:!1,unstable_shouldRevalidateArgs:c,unstable_shouldCallHandler:()=>!1,_lazyPromises:Fb(r,e,n,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Nm(r,e,n,m,l,h,!0,c))}async function JT(r,e,n,s,o,l){n.some(g=>{var b;return(b=g._lazyPromises)==null?void 0:b.middleware})&&await Promise.all(n.map(g=>{var b;return(b=g._lazyPromises)==null?void 0:b.middleware}));let h={request:e,params:n[0].params,context:o,matches:n},m=await r({...h,fetcherKey:s,unstable_runClientMiddleware:g=>{let b=h;return qb(b,!1,()=>g({...b,fetcherKey:s,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(d,y)=>({[y]:{type:"error",result:d}}))}});try{await Promise.all(n.flatMap(g=>{var b,d;return[(b=g._lazyPromises)==null?void 0:b.handler,(d=g._lazyPromises)==null?void 0:d.route]}))}catch{}return m}async function eS({request:r,match:e,lazyHandlerPromise:n,lazyRoutePromise:s,handlerOverride:o,scopedContext:l}){let h,c,m=Qn(r.method),g=m?"action":"loader",b=d=>{let y,_=new Promise((R,w)=>y=w);c=()=>y(),r.signal.addEventListener("abort",c);let v=R=>typeof d!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${e.route.id}]`)):d({request:r,params:e.params,context:l},...R!==void 0?[R]:[]),E=(async()=>{try{return{type:"data",result:await(o?o(w=>v(w)):v())}}catch(R){return{type:"error",result:R}}})();return Promise.race([E,_])};try{let d=m?e.route.action:e.route.loader;if(n||s)if(d){let y,[_]=await Promise.all([b(d).catch(v=>{y=v}),n,s]);if(y!==void 0)throw y;h=_}else{await n;let y=m?e.route.action:e.route.loader;if(y)[h]=await Promise.all([b(y),s]);else if(g==="action"){let _=new URL(r.url),v=_.pathname+_.search;throw gr(405,{method:r.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(d)h=await b(d);else{let y=new URL(r.url),_=y.pathname+y.search;throw gr(404,{pathname:_})}}catch(d){return{type:"error",result:d}}finally{c&&r.signal.removeEventListener("abort",c)}return h}async function tS(r){var s,o,l,h,c,m;let{result:e,type:n}=r;if(Kb(e)){let g;try{let b=e.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?e.body==null?g=null:g=await e.json():g=await e.text()}catch(b){return{type:"error",error:b}}return n==="error"?{type:"error",error:new yh(e.status,e.statusText,g),statusCode:e.status,headers:e.headers}:{type:"data",data:g,statusCode:e.status,headers:e.headers}}return n==="error"?Q0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new yh(((l=e.init)==null?void 0:l.status)||500,void 0,e.data),statusCode:hu(e)?e.status:void 0,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:hu(e)?e.status:void 0}:Q0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(m=e.init)!=null&&m.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function nS(r,e,n,s,o){let l=r.headers.get("Location");if(Je(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!lp.test(l)){let h=s.slice(0,s.findIndex(c=>c.route.id===n)+1);l=Dm(new URL(e.url),h,o,l),r.headers.set("Location",l)}return r}function q0(r,e,n){if(lp.test(r)){let s=r,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s),l=yr(o.pathname,n)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return r}function vo(r,e,n,s){let o=r.createURL(Gb(e)).toString(),l={signal:n};if(s&&Qn(s.formMethod)){let{formMethod:h,formEncType:c}=s;l.method=h.toUpperCase(),c==="application/json"?(l.headers=new Headers({"Content-Type":c}),l.body=JSON.stringify(s.json)):c==="text/plain"?l.body=s.text:c==="application/x-www-form-urlencoded"&&s.formData?l.body=km(s.formData):l.body=s.formData}return new Request(o,l)}function km(r){let e=new URLSearchParams;for(let[n,s]of r.entries())e.append(n,typeof s=="string"?s:s.name);return e}function H0(r){let e=new FormData;for(let[n,s]of r.entries())e.append(n,s);return e}function rS(r,e,n,s=!1,o=!1){let l={},h=null,c,m=!1,g={},b=n&&Yn(n[1])?n[1].error:void 0;return r.forEach(d=>{if(!(d.route.id in e))return;let y=d.route.id,_=e[y];if(Je(!_a(_),"Cannot handle redirect results in processLoaderData"),Yn(_)){let v=_.error;if(b!==void 0&&(v=b,b=void 0),h=h||{},o)h[y]=v;else{let E=va(r,y);h[E.route.id]==null&&(h[E.route.id]=v)}s||(l[y]=zb),m||(m=!0,c=hu(_.error)?_.error.status:500),_.headers&&(g[y]=_.headers)}else l[y]=_.data,_.statusCode&&_.statusCode!==200&&!m&&(c=_.statusCode),_.headers&&(g[y]=_.headers)}),b!==void 0&&n&&(h={[n[0]]:b},n[2]&&(l[n[2]]=void 0)),{loaderData:l,errors:h,statusCode:c||200,loaderHeaders:g}}function F0(r,e,n,s,o,l){let{loaderData:h,errors:c}=rS(e,n,s);return o.filter(m=>!m.matches||m.matches.some(g=>g.shouldLoad)).forEach(m=>{let{key:g,match:b,controller:d}=m,y=l[g];if(Je(y,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Yn(y)){let _=va(r.matches,b==null?void 0:b.route.id);c&&c[_.route.id]||(c={...c,[_.route.id]:y.error}),r.fetchers.delete(g)}else if(_a(y))Je(!1,"Unhandled fetcher revalidation redirect");else{let _=gs(y.data);r.fetchers.set(g,_)}}),{loaderData:h,errors:c}}function G0(r,e,n,s){let o=Object.entries(e).filter(([,l])=>l!==zb).reduce((l,[h,c])=>(l[h]=c,l),{});for(let l of n){let h=l.route.id;if(!e.hasOwnProperty(h)&&r.hasOwnProperty(h)&&l.route.loader&&(o[h]=r[h]),s&&s.hasOwnProperty(h))break}return o}function K0(r){return r?Yn(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function va(r,e){return(e?r.slice(0,r.findIndex(s=>s.route.id===e)+1):[...r]).reverse().find(s=>s.route.hasErrorBoundary===!0)||r[0]}function Y0(r){let e=r.length===1?r[0]:r.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function gr(r,{pathname:e,routeId:n,method:s,type:o,message:l}={}){let h="Unknown Server Error",c="Unknown @remix-run/router error";return r===400?(h="Bad Request",s&&e&&n?c=`You made a ${s} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(c="Unable to encode submission body")):r===403?(h="Forbidden",c=`Route "${n}" does not match URL "${e}"`):r===404?(h="Not Found",c=`No route matches URL "${e}"`):r===405&&(h="Method Not Allowed",s&&e&&n?c=`You made a ${s.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:s&&(c=`Invalid request method "${s.toUpperCase()}"`)),new yh(r||500,h,new Error(c),!0)}function Yc(r){let e=Object.entries(r);for(let n=e.length-1;n>=0;n--){let[s,o]=e[n];if(_a(o))return{key:s,result:o}}}function Gb(r){let e=typeof r=="string"?Li(r):r;return Os({...e,hash:""})}function iS(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function sS(r){return Kb(r.result)&&qT.has(r.result.status)}function Yn(r){return r.type==="error"}function _a(r){return(r&&r.type)==="redirect"}function Q0(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function Kb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function aS(r){return BT.has(r.toUpperCase())}function Qn(r){return zT.has(r.toUpperCase())}function up(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function Wl(r,e){let n=typeof e=="string"?Li(e).search:e.search;if(r[r.length-1].route.index&&up(n||""))return r[r.length-1];let s=Lb(r);return s[s.length-1]}function X0(r){let{formMethod:e,formAction:n,formEncType:s,text:o,formData:l,json:h}=r;if(!(!e||!n||!s)){if(o!=null)return{formMethod:e,formAction:n,formEncType:s,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:n,formEncType:s,formData:l,json:void 0,text:void 0};if(h!==void 0)return{formMethod:e,formAction:n,formEncType:s,formData:void 0,json:h,text:void 0}}}function gm(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function oS(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yl(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function lS(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function gs(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function uS(r,e){try{let n=r.sessionStorage.getItem(Ub);if(n){let s=JSON.parse(n);for(let[o,l]of Object.entries(s||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function cS(r,e){if(e.size>0){let n={};for(let[s,o]of e)n[s]=[...o];try{r.sessionStorage.setItem(Ub,JSON.stringify(n))}catch(s){Pt(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function hS(){let r,e,n=new Promise((s,o)=>{r=async l=>{s(l);try{await n}catch{}},e=async l=>{o(l);try{await n}catch{}}});return{promise:n,resolve:r,reject:e}}var Ra=Q.createContext(null);Ra.displayName="DataRouter";var Eu=Q.createContext(null);Eu.displayName="DataRouterState";var cp=Q.createContext({isTransitioning:!1});cp.displayName="ViewTransition";var Yb=Q.createContext(new Map);Yb.displayName="Fetchers";var fS=Q.createContext(null);fS.displayName="Await";var ri=Q.createContext(null);ri.displayName="Navigation";var Uh=Q.createContext(null);Uh.displayName="Location";var Ir=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var hp=Q.createContext(null);hp.displayName="RouteError";function dS(r,{relative:e}={}){Je(wu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=Q.useContext(ri),{hash:o,pathname:l,search:h}=Tu(r,{relative:e}),c=l;return n!=="/"&&(c=l==="/"?n:Xr([n,l])),s.createHref({pathname:c,search:h,hash:o})}function wu(){return Q.useContext(Uh)!=null}function Ca(){return Je(wu(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Uh).location}var Qb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xb(r){Q.useContext(ri).static||Q.useLayoutEffect(r)}function js(){let{isDataRoute:r}=Q.useContext(Ir);return r?IS():mS()}function mS(){Je(wu(),"useNavigate() may be used only in the context of a <Router> component.");let r=Q.useContext(Ra),{basename:e,navigator:n}=Q.useContext(ri),{matches:s}=Q.useContext(Ir),{pathname:o}=Ca(),l=JSON.stringify(ap(s)),h=Q.useRef(!1);return Xb(()=>{h.current=!0}),Q.useCallback((m,g={})=>{if(Pt(h.current,Qb),!h.current)return;if(typeof m=="number"){n.go(m);return}let b=op(m,JSON.parse(l),o,g.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Xr([e,b.pathname])),(g.replace?n.replace:n.push)(b,g.state,g)},[e,n,l,o,r])}var pS=Q.createContext(null);function gS(r){let e=Q.useContext(Ir).outlet;return e&&Q.createElement(pS.Provider,{value:r},e)}function fp(){let{matches:r}=Q.useContext(Ir),e=r[r.length-1];return e?e.params:{}}function Tu(r,{relative:e}={}){let{matches:n}=Q.useContext(Ir),{pathname:s}=Ca(),o=JSON.stringify(ap(n));return Q.useMemo(()=>op(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function yS(r,e,n,s){Je(wu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:l}=Q.useContext(ri),{matches:h}=Q.useContext(Ir),c=h[h.length-1],m=c?c.params:{},g=c?c.pathname:"/",b=c?c.pathnameBase:"/",d=c&&c.route;{let A=d&&d.path||"";Wb(g,!d||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=Ca(),_;_=y;let v=_.pathname||"/",E=v;if(b!=="/"){let A=b.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let R=!l&&n&&n.matches&&n.matches.length>0?n.matches:ys(r,{pathname:E});return Pt(d||R!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Pt(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),wS(R&&R.map(A=>Object.assign({},A,{params:Object.assign({},m,A.params),pathname:Xr([b,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?b:Xr([b,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),h,n,s)}function vS(){let r=CS(),e=hu(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:l},"ErrorBoundary")," or"," ",Q.createElement("code",{style:l},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),n?Q.createElement("pre",{style:o},n):null,h)}var _S=Q.createElement(vS,null),bS=class extends Q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?Q.createElement(Ir.Provider,{value:this.props.routeContext},Q.createElement(hp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ES({routeContext:r,match:e,children:n}){let s=Q.useContext(Ra);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Ir.Provider,{value:r},n)}function wS(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,l=n==null?void 0:n.errors;if(l!=null){let m=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);Je(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,c=-1;if(n)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=m),g.route.id){let{loaderData:b,errors:d}=n,y=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!d||d[g.route.id]===void 0);if(g.route.lazy||y){h=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((m,g,b)=>{let d,y=!1,_=null,v=null;n&&(d=l&&g.route.id?l[g.route.id]:void 0,_=g.route.errorElement||_S,h&&(c<0&&b===0?(Wb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===b&&(y=!0,v=g.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,b+1)),R=()=>{let w;return d?w=_:y?w=v:g.route.Component?w=Q.createElement(g.route.Component,null):g.route.element?w=g.route.element:w=m,Q.createElement(ES,{match:g,routeContext:{outlet:m,matches:E,isDataRoute:n!=null},children:w})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?Q.createElement(bS,{location:n.location,revalidation:n.revalidation,component:_,error:d,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):R()},null)}function dp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TS(r){let e=Q.useContext(Ra);return Je(e,dp(r)),e}function SS(r){let e=Q.useContext(Eu);return Je(e,dp(r)),e}function AS(r){let e=Q.useContext(Ir);return Je(e,dp(r)),e}function mp(r){let e=AS(r),n=e.matches[e.matches.length-1];return Je(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function RS(){return mp("useRouteId")}function CS(){var s;let r=Q.useContext(hp),e=SS("useRouteError"),n=mp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function IS(){let{router:r}=TS("useNavigate"),e=mp("useNavigate"),n=Q.useRef(!1);return Xb(()=>{n.current=!0}),Q.useCallback(async(o,l={})=>{Pt(n.current,Qb),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var W0={};function Wb(r,e,n){!e&&!W0[r]&&(W0[r]=!0,Pt(!1,n))}var Z0={};function J0(r,e){!r&&!Z0[e]&&(Z0[e]=!0,console.warn(e))}function xS(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&Pt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Q.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&Pt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Q.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&Pt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Q.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var DS=["HydrateFallback","hydrateFallbackElement"],OS=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",e(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",n(s))}})}};function NS({router:r,flushSync:e}){let[n,s]=Q.useState(r.state),[o,l]=Q.useState(),[h,c]=Q.useState({isTransitioning:!1}),[m,g]=Q.useState(),[b,d]=Q.useState(),[y,_]=Q.useState(),v=Q.useRef(new Map),E=Q.useCallback((x,{deletedFetchers:M,flushSync:V,viewTransitionOpts:P})=>{x.fetchers.forEach((S,C)=>{S.data!==void 0&&v.current.set(C,S.data)}),M.forEach(S=>v.current.delete(S)),J0(V===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(J0(P==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!O){e&&V?e(()=>s(x)):Q.startTransition(()=>s(x));return}if(e&&V){e(()=>{b&&(m&&m.resolve(),b.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let S=r.window.document.startViewTransition(()=>{e(()=>s(x))});S.finished.finally(()=>{e(()=>{g(void 0),d(void 0),l(void 0),c({isTransitioning:!1})})}),e(()=>d(S));return}b?(m&&m.resolve(),b.skipTransition(),_({state:x,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(l(x),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[r.window,e,b,m]);Q.useLayoutEffect(()=>r.subscribe(E),[r,E]),Q.useEffect(()=>{h.isTransitioning&&!h.flushSync&&g(new OS)},[h]),Q.useEffect(()=>{if(m&&o&&r.window){let x=o,M=m.promise,V=r.window.document.startViewTransition(async()=>{Q.startTransition(()=>s(x)),await M});V.finished.finally(()=>{g(void 0),d(void 0),l(void 0),c({isTransitioning:!1})}),d(V)}},[o,m,r.window]),Q.useEffect(()=>{m&&o&&n.location.key===o.location.key&&m.resolve()},[m,b,n.location,o]),Q.useEffect(()=>{!h.isTransitioning&&y&&(l(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),_(void 0))},[h.isTransitioning,y]);let R=Q.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:x=>r.navigate(x),push:(x,M,V)=>r.navigate(x,{state:M,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(x,M,V)=>r.navigate(x,{replace:!0,state:M,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[r]),w=r.basename||"/",A=Q.useMemo(()=>({router:r,navigator:R,static:!1,basename:w}),[r,R,w]);return Q.createElement(Q.Fragment,null,Q.createElement(Ra.Provider,{value:A},Q.createElement(Eu.Provider,{value:n},Q.createElement(Yb.Provider,{value:v.current},Q.createElement(cp.Provider,{value:h},Q.createElement(VS,{basename:w,location:n.location,navigationType:n.historyAction,navigator:R},Q.createElement(kS,{routes:r.routes,future:r.future,state:n})))))),null)}var kS=Q.memo(MS);function MS({routes:r,future:e,state:n}){return yS(r,void 0,n,e)}function PS(r){return gS(r.context)}function VS({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:l=!1}){Je(!wu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),c=Q.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof n=="string"&&(n=Li(n));let{pathname:m="/",search:g="",hash:b="",state:d=null,key:y="default"}=n,_=Q.useMemo(()=>{let v=yr(m,h);return v==null?null:{location:{pathname:v,search:g,hash:b,state:d,key:y},navigationType:s}},[h,m,g,b,d,y,s]);return Pt(_!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${b}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:Q.createElement(ri.Provider,{value:c},Q.createElement(Uh.Provider,{children:e,value:_}))}var rh="get",ih="application/x-www-form-urlencoded";function zh(r){return r!=null&&typeof r.tagName=="string"}function LS(r){return zh(r)&&r.tagName.toLowerCase()==="button"}function jS(r){return zh(r)&&r.tagName.toLowerCase()==="form"}function US(r){return zh(r)&&r.tagName.toLowerCase()==="input"}function zS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function $S(r,e){return r.button===0&&(!e||e==="_self")&&!zS(r)}var Qc=null;function BS(){if(Qc===null)try{new FormData(document.createElement("form"),0),Qc=!1}catch{Qc=!0}return Qc}var qS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ym(r){return r!=null&&!qS.has(r)?(Pt(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ih}"`),null):r}function HS(r,e){let n,s,o,l,h;if(jS(r)){let c=r.getAttribute("action");s=c?yr(c,e):null,n=r.getAttribute("method")||rh,o=ym(r.getAttribute("enctype"))||ih,l=new FormData(r)}else if(LS(r)||US(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||c.getAttribute("action");if(s=m?yr(m,e):null,n=r.getAttribute("formmethod")||c.getAttribute("method")||rh,o=ym(r.getAttribute("formenctype"))||ym(c.getAttribute("enctype"))||ih,l=new FormData(c,r),!BS()){let{name:g,type:b,value:d}=r;if(b==="image"){let y=g?`${g}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else g&&l.append(g,d)}}else{if(zh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rh,s=null,o=ih,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:l,body:h}}function pp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function FS(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function KS(r,e,n){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await FS(l,n);return h.links?h.links():[]}return[]}));return WS(s.flat(1).filter(GS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function e_(r,e,n,s,o,l){let h=(m,g)=>n[g]?m.route.id!==n[g].route.id:!0,c=(m,g)=>{var b;return n[g].pathname!==m.pathname||((b=n[g].route.path)==null?void 0:b.endsWith("*"))&&n[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>h(m,g)||c(m,g)):l==="data"?e.filter((m,g)=>{var d;let b=s.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(h(m,g)||c(m,g))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function YS(r,e,{includeHydrateFallback:n}={}){return QS(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function QS(r){return[...new Set(r)]}function XS(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function WS(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(XS(o));return n.has(l)||(n.add(l),s.push({key:l,link:o})),s},[])}var ZS=new Set([100,101,204,205]);function JS(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&yr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Zb(){let r=Q.useContext(Ra);return pp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function eA(){let r=Q.useContext(Eu);return pp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var gp=Q.createContext(void 0);gp.displayName="FrameworkContext";function Jb(){let r=Q.useContext(gp);return pp(r,"You must render this element inside a <HydratedRouter> element"),r}function tA(r,e){let n=Q.useContext(gp),[s,o]=Q.useState(!1),[l,h]=Q.useState(!1),{onFocus:c,onBlur:m,onMouseEnter:g,onMouseLeave:b,onTouchStart:d}=e,y=Q.useRef(null);Q.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let E=w=>{w.forEach(A=>{h(A.isIntersecting)})},R=new IntersectionObserver(E,{threshold:.5});return y.current&&R.observe(y.current),()=>{R.disconnect()}}},[r]),Q.useEffect(()=>{if(s){let E=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(E)}}},[s]);let _=()=>{o(!0)},v=()=>{o(!1),h(!1)};return n?r!=="intent"?[l,y,{}]:[l,y,{onFocus:Ql(c,_),onBlur:Ql(m,v),onMouseEnter:Ql(g,_),onMouseLeave:Ql(b,v),onTouchStart:Ql(d,_)}]:[!1,y,{}]}function Ql(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function nA({page:r,...e}){let{router:n}=Zb(),s=Q.useMemo(()=>ys(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?Q.createElement(iA,{page:r,matches:s,...e}):null}function rA(r){let{manifest:e,routeModules:n}=Jb(),[s,o]=Q.useState([]);return Q.useEffect(()=>{let l=!1;return KS(r,e,n).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,n]),s}function iA({page:r,matches:e,...n}){let s=Ca(),{manifest:o,routeModules:l}=Jb(),{basename:h}=Zb(),{loaderData:c,matches:m}=eA(),g=Q.useMemo(()=>e_(r,e,m,o,s,"data"),[r,e,m,o,s]),b=Q.useMemo(()=>e_(r,e,m,o,s,"assets"),[r,e,m,o,s]),d=Q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let v=new Set,E=!1;if(e.forEach(w=>{var x;let A=o.routes[w.route.id];!A||!A.hasLoader||(!g.some(M=>M.route.id===w.route.id)&&w.route.id in c&&((x=l[w.route.id])!=null&&x.shouldRevalidate)||A.hasClientLoader?E=!0:v.add(w.route.id))}),v.size===0)return[];let R=JS(r,h);return E&&v.size>0&&R.searchParams.set("_routes",e.filter(w=>v.has(w.route.id)).map(w=>w.route.id).join(",")),[R.pathname+R.search]},[h,c,s,o,g,e,r,l]),y=Q.useMemo(()=>YS(b,o),[b,o]),_=rA(b);return Q.createElement(Q.Fragment,null,d.map(v=>Q.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),y.map(v=>Q.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),_.map(({key:v,link:E})=>Q.createElement("link",{key:v,...E})))}function sA(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var e2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{e2&&(window.__reactRouterVersion="7.5.3")}catch{}function aA(r,e){return KT({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:mT({window:e==null?void 0:e.window}),hydrationData:oA(),routes:r,mapRouteProperties:xS,hydrationRouteProperties:DS,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function oA(){let r=window==null?void 0:window.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:lA(r.errors)}),r}function lA(r){if(!r)return null;let e=Object.entries(r),n={};for(let[s,o]of e)if(o&&o.__type==="RouteErrorResponse")n[s]=new yh(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let h=new l(o.message);h.stack="",n[s]=h}catch{}}if(n[s]==null){let l=new Error(o.message);l.stack="",n[s]=l}}else n[s]=o;return n}var t2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n2=Q.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:c,target:m,to:g,preventScrollReset:b,viewTransition:d,...y},_){let{basename:v}=Q.useContext(ri),E=typeof g=="string"&&t2.test(g),R,w=!1;if(typeof g=="string"&&E&&(R=g,e2))try{let C=new URL(window.location.href),D=g.startsWith("//")?new URL(C.protocol+g):new URL(g),L=yr(D.pathname,v);D.origin===C.origin&&L!=null?g=L+D.search+D.hash:w=!0}catch{Pt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=dS(g,{relative:o}),[x,M,V]=tA(s,y),P=hA(g,{replace:h,state:c,target:m,preventScrollReset:b,relative:o,viewTransition:d});function O(C){e&&e(C),C.defaultPrevented||P(C)}let S=Q.createElement("a",{...y,...V,href:R||A,onClick:w||l?e:O,ref:sA(_,M),target:m,"data-discover":!E&&n==="render"?"true":void 0});return x&&!E?Q.createElement(Q.Fragment,null,S,Q.createElement(nA,{page:A})):S});n2.displayName="Link";var cn=Q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:c,children:m,...g},b){let d=Tu(h,{relative:g.relative}),y=Ca(),_=Q.useContext(Eu),{navigator:v,basename:E}=Q.useContext(ri),R=_!=null&&gA(d)&&c===!0,w=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,A=y.pathname,x=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(A=A.toLowerCase(),x=x?x.toLowerCase():null,w=w.toLowerCase()),x&&E&&(x=yr(x,E)||x);const M=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let V=A===w||!o&&A.startsWith(w)&&A.charAt(M)==="/",P=x!=null&&(x===w||!o&&x.startsWith(w)&&x.charAt(w.length)==="/"),O={isActive:V,isPending:P,isTransitioning:R},S=V?e:void 0,C;typeof s=="function"?C=s(O):C=[s,V?"active":null,P?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(O):l;return Q.createElement(n2,{...g,"aria-current":S,className:C,ref:b,style:D,to:h,viewTransition:c},typeof m=="function"?m(O):m)});cn.displayName="NavLink";var uA=Q.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:l,method:h=rh,action:c,onSubmit:m,relative:g,preventScrollReset:b,viewTransition:d,...y},_)=>{let v=mA(),E=pA(c,{relative:g}),R=h.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&t2.test(c),A=x=>{if(m&&m(x),x.defaultPrevented)return;x.preventDefault();let M=x.nativeEvent.submitter,V=(M==null?void 0:M.getAttribute("formmethod"))||h;v(M||x.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:o,state:l,relative:g,preventScrollReset:b,viewTransition:d})};return Q.createElement("form",{ref:_,method:R,action:E,onSubmit:s?m:A,...y,"data-discover":!w&&r==="render"?"true":void 0})});uA.displayName="Form";function cA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r2(r){let e=Q.useContext(Ra);return Je(e,cA(r)),e}function hA(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let c=js(),m=Ca(),g=Tu(r,{relative:l});return Q.useCallback(b=>{if($S(b,e)){b.preventDefault();let d=n!==void 0?n:Os(m)===Os(g);c(r,{replace:d,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[m,c,g,n,s,e,r,o,l,h])}var fA=0,dA=()=>`__${String(++fA)}__`;function mA(){let{router:r}=r2("useSubmit"),{basename:e}=Q.useContext(ri),n=RS();return Q.useCallback(async(s,o={})=>{let{action:l,method:h,encType:c,formData:m,body:g}=HS(s,e);if(o.navigate===!1){let b=o.fetcherKey||dA();await r.fetch(b,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||c,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function pA(r,{relative:e}={}){let{basename:n}=Q.useContext(ri),s=Q.useContext(Ir);Je(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Tu(r||".",{relative:e})},h=Ca();if(r==null){l.search=h.search;let c=new URLSearchParams(l.search),m=c.getAll("index");if(m.some(b=>b==="")){c.delete("index"),m.filter(d=>d).forEach(d=>c.append("index",d));let b=c.toString();l.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Xr([n,l.pathname])),Os(l)}function gA(r,e={}){let n=Q.useContext(cp);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=r2("useViewTransitionState"),o=Tu(r,{relative:e.relative});if(!n.isTransitioning)return!1;let l=yr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=yr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return gh(o.pathname,h)!=null||gh(o.pathname,l)!=null}new TextEncoder;[...ZS];const yA="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-menu-icon%20lucide-menu'%3e%3cpath%20d='M4%2012h16'/%3e%3cpath%20d='M4%2018h16'/%3e%3cpath%20d='M4%206h16'/%3e%3c/svg%3e",vA="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-search-icon%20lucide-search'%3e%3cpath%20d='m21%2021-4.34-4.34'/%3e%3ccircle%20cx='11'%20cy='11'%20r='8'/%3e%3c/svg%3e",_A="/Webbshop/assets/Logo-pGv3b3jR.svg",i2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-shopping-cart-icon%20lucide-shopping-cart'%3e%3ccircle%20cx='8'%20cy='21'%20r='1'/%3e%3ccircle%20cx='19'%20cy='21'%20r='1'/%3e%3cpath%20d='M2.05%202.05h2l2.66%2012.42a2%202%200%200%200%202%201.58h9.78a2%202%200%200%200%201.95-1.57l1.65-7.43H5.12'/%3e%3c/svg%3e",t_=r=>{let e;const n=new Set,s=(g,b)=>{const d=typeof g=="function"?g(e):g;if(!Object.is(d,e)){const y=e;e=b??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(_=>_(e,y))}},o=()=>e,c={setState:s,getState:o,getInitialState:()=>m,subscribe:g=>(n.add(g),()=>n.delete(g))},m=e=r(s,o,c);return c},bA=r=>r?t_(r):t_,EA=r=>r;function wA(r,e=EA){const n=A0.useSyncExternalStore(r.subscribe,()=>e(r.getState()),()=>e(r.getInitialState()));return A0.useDebugValue(n),n}const n_=r=>{const e=bA(r),n=s=>wA(e,s);return Object.assign(n,e),n},TA=r=>r?n_(r):n_,ws=TA(r=>({items:[],addToCart:e=>r(n=>n.items.find(o=>o.id===e.id)?{items:n.items.map(o=>o.id===e.id?{...o,quantity:o.quantity+1}:o)}:{items:[...n.items,{...e,quantity:1}]}),removeFromCart:e=>r(n=>({items:n.items.filter(s=>s.id!==e)})),clearCart:()=>r({items:[]}),updateQuantity:(e,n)=>r(s=>({items:n<1?s.items.filter(o=>o.id!==e):s.items.map(o=>o.id===e?{...o,quantity:n}:o)}))}));function SA(){const e=ws(n=>n.items).reduce((n,s)=>n+(s.quantity||1),0);return q.jsxs("div",{className:"cart-counter-badge-wrapper",children:[q.jsx("img",{src:i2,alt:"Kundvagnsikon",className:"cart-counter-badge-icon"}),e>0&&q.jsx("span",{className:"cart-counter-badge",children:e})]})}const AA=()=>{};var r_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},RA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[n++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[n++],h=r[n++],c=r[n++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},a2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,c=h?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,b=l>>2,d=(l&3)<<4|c>>4;let y=(c&15)<<2|g>>6,_=g&63;m||(_=64,h||(y=64)),s.push(n[b],n[d],n[y],n[_])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(s2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):RA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=n[r.charAt(o++)],c=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const d=o<r.length?n[r.charAt(o)]:64;if(++o,l==null||c==null||g==null||d==null)throw new CA;const y=l<<2|c>>4;if(s.push(y),g!==64){const _=c<<4&240|g>>2;if(s.push(_),d!==64){const v=g<<6&192|d;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class CA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IA=function(r){const e=s2(r);return a2.encodeByteArray(e,!0)},_h=function(r){return IA(r).replace(/\./g,"")},o2=function(r){try{return a2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=()=>xA().__FIREBASE_DEFAULTS__,OA=()=>{if(typeof process>"u"||typeof r_>"u")return;const r=r_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},NA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&o2(r[1]);return e&&JSON.parse(e)},$h=()=>{try{return AA()||DA()||OA()||NA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},l2=r=>{var e,n;return(n=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},kA=r=>{const e=l2(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},u2=()=>{var r;return(r=$h())===null||r===void 0?void 0:r.config},c2=r=>{var e;return(e=$h())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[_h(JSON.stringify(n)),_h(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function LA(){var r;const e=(r=$h())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $A(){const r=wn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function BA(){return!LA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qA(){try{return typeof indexedDB=="object"}catch{return!1}}function HA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="FirebaseError";class ji extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=FA,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?GA(l,s):"Error",c=`${this.serviceName}: ${h} (${o}).`;return new ji(o,c,s)}}function GA(r,e){return r.replace(KA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const KA=/\{\$([^}]+)}/g;function YA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ea(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(i_(l)&&i_(h)){if(!Ea(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Zl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Jl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function QA(r,e){const n=new XA(r,e);return n.subscribe.bind(n)}class XA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");WA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new MA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eR(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,h]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);s===c&&h.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:JA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JA(r){return r===ya?void 0:r}function eR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const nR={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},rR=et.INFO,iR={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},sR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=iR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=rR,this._logHandler=sR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const aR=(r,e)=>e.some(n=>r instanceof n);let s_,a_;function oR(){return s_||(s_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lR(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h2=new WeakMap,Mm=new WeakMap,f2=new WeakMap,_m=new WeakMap,vp=new WeakMap;function uR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{n(As(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&h2.set(n,r)}).catch(()=>{}),vp.set(e,r),e}function cR(r){if(Mm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Mm.set(r,e)}let Pm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Mm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||f2.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function hR(r){Pm=r(Pm)}function fR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(bm(this),e,...n);return f2.set(s,e.sort?e.sort():[e]),As(s)}:lR().includes(r)?function(...e){return r.apply(bm(this),e),As(h2.get(this))}:function(...e){return As(r.apply(bm(this),e))}}function dR(r){return typeof r=="function"?fR(r):(r instanceof IDBTransaction&&cR(r),aR(r,oR())?new Proxy(r,Pm):r)}function As(r){if(r instanceof IDBRequest)return uR(r);if(_m.has(r))return _m.get(r);const e=dR(r);return e!==r&&(_m.set(r,e),vp.set(e,r)),e}const bm=r=>vp.get(r);function mR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),c=As(h);return s&&h.addEventListener("upgradeneeded",m=>{s(As(h.result),m.oldVersion,m.newVersion,As(h.transaction),m)}),n&&h.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),c.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),c}const pR=["get","getKey","getAll","getAllKeys","count"],gR=["put","add","delete","clear"],Em=new Map;function o_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=gR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||pR.includes(n)))return;const l=async function(h,...c){const m=this.transaction(h,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(c.shift())),(await Promise.all([g[n](...c),o&&m.done]))[0]};return Em.set(e,l),l}hR(r=>({...r,get:(e,n,s)=>o_(e,n)||r.get(e,n,s),has:(e,n)=>!!o_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function vR(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vm="@firebase/app",l_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new yp("@firebase/app"),_R="@firebase/app-compat",bR="@firebase/analytics-compat",ER="@firebase/analytics",wR="@firebase/app-check-compat",TR="@firebase/app-check",SR="@firebase/auth",AR="@firebase/auth-compat",RR="@firebase/database",CR="@firebase/data-connect",IR="@firebase/database-compat",xR="@firebase/functions",DR="@firebase/functions-compat",OR="@firebase/installations",NR="@firebase/installations-compat",kR="@firebase/messaging",MR="@firebase/messaging-compat",PR="@firebase/performance",VR="@firebase/performance-compat",LR="@firebase/remote-config",jR="@firebase/remote-config-compat",UR="@firebase/storage",zR="@firebase/storage-compat",$R="@firebase/firestore",BR="@firebase/vertexai",qR="@firebase/firestore-compat",HR="firebase",FR="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",GR={[Vm]:"fire-core",[_R]:"fire-core-compat",[ER]:"fire-analytics",[bR]:"fire-analytics-compat",[TR]:"fire-app-check",[wR]:"fire-app-check-compat",[SR]:"fire-auth",[AR]:"fire-auth-compat",[RR]:"fire-rtdb",[CR]:"fire-data-connect",[IR]:"fire-rtdb-compat",[xR]:"fire-fn",[DR]:"fire-fn-compat",[OR]:"fire-iid",[NR]:"fire-iid-compat",[kR]:"fire-fcm",[MR]:"fire-fcm-compat",[PR]:"fire-perf",[VR]:"fire-perf-compat",[LR]:"fire-rc",[jR]:"fire-rc-compat",[UR]:"fire-gcs",[zR]:"fire-gcs-compat",[$R]:"fire-fst",[qR]:"fire-fst-compat",[BR]:"fire-vertex","fire-js":"fire-js",[HR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,KR=new Map,jm=new Map;function u_(r,e){try{r.container.addComponent(e)}catch(n){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function xo(r){const e=r.name;if(jm.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,r);for(const n of bh.values())u_(n,r);for(const n of KR.values())u_(n,r);return!0}function _p(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Sr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Su("app","Firebase",YR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=FR;function d2(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Lm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Rs.create("bad-app-name",{appName:String(o)});if(n||(n=u2()),!n)throw Rs.create("no-options");const l=bh.get(o);if(l){if(Ea(n,l.options)&&Ea(s,l.config))return l;throw Rs.create("duplicate-app",{appName:o})}const h=new tR(o);for(const m of jm.values())h.addComponent(m);const c=new QR(n,s,h);return bh.set(o,c),c}function m2(r=Lm){const e=bh.get(r);if(!e&&r===Lm&&u2())return d2();if(!e)throw Rs.create("no-app",{appName:r});return e}function Cs(r,e,n){var s;let o=(s=GR[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const c=[`Unable to register library "${o}" with version "${e}":`];l&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&c.push("and"),h&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(c.join(" "));return}xo(new wa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="firebase-heartbeat-database",WR=1,fu="firebase-heartbeat-store";let wm=null;function p2(){return wm||(wm=mR(XR,WR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Rs.create("idb-open",{originalErrorMessage:r.message})})),wm}async function ZR(r){try{const n=(await p2()).transaction(fu),s=await n.objectStore(fu).get(g2(r));return await n.done,s}catch(e){if(e instanceof ji)Ni.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ni.warn(n.message)}}}async function c_(r,e){try{const s=(await p2()).transaction(fu,"readwrite");await s.objectStore(fu).put(e,g2(r)),await s.done}catch(n){if(n instanceof ji)Ni.warn(n.message);else{const s=Rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(s.message)}}}function g2(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=1024,eC=30;class tC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=h_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>eC){const h=iC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ni.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h_(),{heartbeatsToSend:s,unsentEntries:o}=nC(this._heartbeatsCache.heartbeats),l=_h(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Ni.warn(n),""}}}function h_(){return new Date().toISOString().substring(0,10)}function nC(r,e=JR){const n=[];let s=r.slice();for(const o of r){const l=n.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),f_(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class rC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qA()?HA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function f_(r){return _h(JSON.stringify({version:2,heartbeats:r})).length}function iC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(r){xo(new wa("platform-logger",e=>new yR(e),"PRIVATE")),xo(new wa("heartbeat",e=>new tC(e),"PRIVATE")),Cs(Vm,l_,r),Cs(Vm,l_,"esm2017"),Cs("fire-js","")}sC("");var d_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,y2;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,S){function C(){}C.prototype=S.prototype,O.D=S.prototype,O.prototype=new C,O.prototype.constructor=O,O.C=function(D,L,$){for(var j=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)j[ce-2]=arguments[ce];return S.prototype[L].apply(D,j)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,S,C){C||(C=0);var D=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)D[L]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(L=0;16>L;++L)D[L]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=O.g[0],C=O.g[1],L=O.g[2];var $=O.g[3],j=S+($^C&(L^$))+D[0]+3614090360&4294967295;S=C+(j<<7&4294967295|j>>>25),j=$+(L^S&(C^L))+D[1]+3905402710&4294967295,$=S+(j<<12&4294967295|j>>>20),j=L+(C^$&(S^C))+D[2]+606105819&4294967295,L=$+(j<<17&4294967295|j>>>15),j=C+(S^L&($^S))+D[3]+3250441966&4294967295,C=L+(j<<22&4294967295|j>>>10),j=S+($^C&(L^$))+D[4]+4118548399&4294967295,S=C+(j<<7&4294967295|j>>>25),j=$+(L^S&(C^L))+D[5]+1200080426&4294967295,$=S+(j<<12&4294967295|j>>>20),j=L+(C^$&(S^C))+D[6]+2821735955&4294967295,L=$+(j<<17&4294967295|j>>>15),j=C+(S^L&($^S))+D[7]+4249261313&4294967295,C=L+(j<<22&4294967295|j>>>10),j=S+($^C&(L^$))+D[8]+1770035416&4294967295,S=C+(j<<7&4294967295|j>>>25),j=$+(L^S&(C^L))+D[9]+2336552879&4294967295,$=S+(j<<12&4294967295|j>>>20),j=L+(C^$&(S^C))+D[10]+4294925233&4294967295,L=$+(j<<17&4294967295|j>>>15),j=C+(S^L&($^S))+D[11]+2304563134&4294967295,C=L+(j<<22&4294967295|j>>>10),j=S+($^C&(L^$))+D[12]+1804603682&4294967295,S=C+(j<<7&4294967295|j>>>25),j=$+(L^S&(C^L))+D[13]+4254626195&4294967295,$=S+(j<<12&4294967295|j>>>20),j=L+(C^$&(S^C))+D[14]+2792965006&4294967295,L=$+(j<<17&4294967295|j>>>15),j=C+(S^L&($^S))+D[15]+1236535329&4294967295,C=L+(j<<22&4294967295|j>>>10),j=S+(L^$&(C^L))+D[1]+4129170786&4294967295,S=C+(j<<5&4294967295|j>>>27),j=$+(C^L&(S^C))+D[6]+3225465664&4294967295,$=S+(j<<9&4294967295|j>>>23),j=L+(S^C&($^S))+D[11]+643717713&4294967295,L=$+(j<<14&4294967295|j>>>18),j=C+($^S&(L^$))+D[0]+3921069994&4294967295,C=L+(j<<20&4294967295|j>>>12),j=S+(L^$&(C^L))+D[5]+3593408605&4294967295,S=C+(j<<5&4294967295|j>>>27),j=$+(C^L&(S^C))+D[10]+38016083&4294967295,$=S+(j<<9&4294967295|j>>>23),j=L+(S^C&($^S))+D[15]+3634488961&4294967295,L=$+(j<<14&4294967295|j>>>18),j=C+($^S&(L^$))+D[4]+3889429448&4294967295,C=L+(j<<20&4294967295|j>>>12),j=S+(L^$&(C^L))+D[9]+568446438&4294967295,S=C+(j<<5&4294967295|j>>>27),j=$+(C^L&(S^C))+D[14]+3275163606&4294967295,$=S+(j<<9&4294967295|j>>>23),j=L+(S^C&($^S))+D[3]+4107603335&4294967295,L=$+(j<<14&4294967295|j>>>18),j=C+($^S&(L^$))+D[8]+1163531501&4294967295,C=L+(j<<20&4294967295|j>>>12),j=S+(L^$&(C^L))+D[13]+2850285829&4294967295,S=C+(j<<5&4294967295|j>>>27),j=$+(C^L&(S^C))+D[2]+4243563512&4294967295,$=S+(j<<9&4294967295|j>>>23),j=L+(S^C&($^S))+D[7]+1735328473&4294967295,L=$+(j<<14&4294967295|j>>>18),j=C+($^S&(L^$))+D[12]+2368359562&4294967295,C=L+(j<<20&4294967295|j>>>12),j=S+(C^L^$)+D[5]+4294588738&4294967295,S=C+(j<<4&4294967295|j>>>28),j=$+(S^C^L)+D[8]+2272392833&4294967295,$=S+(j<<11&4294967295|j>>>21),j=L+($^S^C)+D[11]+1839030562&4294967295,L=$+(j<<16&4294967295|j>>>16),j=C+(L^$^S)+D[14]+4259657740&4294967295,C=L+(j<<23&4294967295|j>>>9),j=S+(C^L^$)+D[1]+2763975236&4294967295,S=C+(j<<4&4294967295|j>>>28),j=$+(S^C^L)+D[4]+1272893353&4294967295,$=S+(j<<11&4294967295|j>>>21),j=L+($^S^C)+D[7]+4139469664&4294967295,L=$+(j<<16&4294967295|j>>>16),j=C+(L^$^S)+D[10]+3200236656&4294967295,C=L+(j<<23&4294967295|j>>>9),j=S+(C^L^$)+D[13]+681279174&4294967295,S=C+(j<<4&4294967295|j>>>28),j=$+(S^C^L)+D[0]+3936430074&4294967295,$=S+(j<<11&4294967295|j>>>21),j=L+($^S^C)+D[3]+3572445317&4294967295,L=$+(j<<16&4294967295|j>>>16),j=C+(L^$^S)+D[6]+76029189&4294967295,C=L+(j<<23&4294967295|j>>>9),j=S+(C^L^$)+D[9]+3654602809&4294967295,S=C+(j<<4&4294967295|j>>>28),j=$+(S^C^L)+D[12]+3873151461&4294967295,$=S+(j<<11&4294967295|j>>>21),j=L+($^S^C)+D[15]+530742520&4294967295,L=$+(j<<16&4294967295|j>>>16),j=C+(L^$^S)+D[2]+3299628645&4294967295,C=L+(j<<23&4294967295|j>>>9),j=S+(L^(C|~$))+D[0]+4096336452&4294967295,S=C+(j<<6&4294967295|j>>>26),j=$+(C^(S|~L))+D[7]+1126891415&4294967295,$=S+(j<<10&4294967295|j>>>22),j=L+(S^($|~C))+D[14]+2878612391&4294967295,L=$+(j<<15&4294967295|j>>>17),j=C+($^(L|~S))+D[5]+4237533241&4294967295,C=L+(j<<21&4294967295|j>>>11),j=S+(L^(C|~$))+D[12]+1700485571&4294967295,S=C+(j<<6&4294967295|j>>>26),j=$+(C^(S|~L))+D[3]+2399980690&4294967295,$=S+(j<<10&4294967295|j>>>22),j=L+(S^($|~C))+D[10]+4293915773&4294967295,L=$+(j<<15&4294967295|j>>>17),j=C+($^(L|~S))+D[1]+2240044497&4294967295,C=L+(j<<21&4294967295|j>>>11),j=S+(L^(C|~$))+D[8]+1873313359&4294967295,S=C+(j<<6&4294967295|j>>>26),j=$+(C^(S|~L))+D[15]+4264355552&4294967295,$=S+(j<<10&4294967295|j>>>22),j=L+(S^($|~C))+D[6]+2734768916&4294967295,L=$+(j<<15&4294967295|j>>>17),j=C+($^(L|~S))+D[13]+1309151649&4294967295,C=L+(j<<21&4294967295|j>>>11),j=S+(L^(C|~$))+D[4]+4149444226&4294967295,S=C+(j<<6&4294967295|j>>>26),j=$+(C^(S|~L))+D[11]+3174756917&4294967295,$=S+(j<<10&4294967295|j>>>22),j=L+(S^($|~C))+D[2]+718787259&4294967295,L=$+(j<<15&4294967295|j>>>17),j=C+($^(L|~S))+D[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+$&4294967295}s.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var C=S-this.blockSize,D=this.B,L=this.h,$=0;$<S;){if(L==0)for(;$<=C;)o(this,O,$),$+=this.blockSize;if(typeof O=="string"){for(;$<S;)if(D[L++]=O.charCodeAt($++),L==this.blockSize){o(this,D),L=0;break}}else for(;$<S;)if(D[L++]=O[$++],L==this.blockSize){o(this,D),L=0;break}}this.h=L,this.o+=S},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var C=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=C&255,C/=256;for(this.u(O),O=Array(16),S=C=0;4>S;++S)for(var D=0;32>D;D+=8)O[C++]=this.g[S]>>>D&255;return O};function l(O,S){var C=c;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=S(O)}function h(O,S){this.h=S;for(var C=[],D=!0,L=O.length-1;0<=L;L--){var $=O[L]|0;D&&$==S||(C[L]=$,D=!1)}this.g=C}var c={};function m(O){return-128<=O&&128>O?l(O,function(S){return new h([S|0],0>S?-1:0)}):new h([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return d;if(0>O)return R(g(-O));for(var S=[],C=1,D=0;O>=C;D++)S[D]=O/C|0,C*=4294967296;return new h(S,0)}function b(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return R(b(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(S,8)),D=d,L=0;L<O.length;L+=8){var $=Math.min(8,O.length-L),j=parseInt(O.substring(L,L+$),S);8>$?($=g(Math.pow(S,$)),D=D.j($).add(g(j))):(D=D.j(C),D=D.add(g(j)))}return D}var d=m(0),y=m(1),_=m(16777216);r=h.prototype,r.m=function(){if(E(this))return-R(this).m();for(var O=0,S=1,C=0;C<this.g.length;C++){var D=this.i(C);O+=(0<=D?D:4294967296+D)*S,S*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(v(this))return"0";if(E(this))return"-"+R(this).toString(O);for(var S=g(Math.pow(O,6)),C=this,D="";;){var L=M(C,S).g;C=w(C,L.j(S));var $=((0<C.g.length?C.g[0]:C.h)>>>0).toString(O);if(C=L,v(C))return $+D;for(;6>$.length;)$="0"+$;D=$+D}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function v(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function E(O){return O.h==-1}r.l=function(O){return O=w(this,O),E(O)?-1:v(O)?0:1};function R(O){for(var S=O.g.length,C=[],D=0;D<S;D++)C[D]=~O.g[D];return new h(C,~O.h).add(y)}r.abs=function(){return E(this)?R(this):this},r.add=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],D=0,L=0;L<=S;L++){var $=D+(this.i(L)&65535)+(O.i(L)&65535),j=($>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);D=j>>>16,$&=65535,j&=65535,C[L]=j<<16|$}return new h(C,C[C.length-1]&-2147483648?-1:0)};function w(O,S){return O.add(R(S))}r.j=function(O){if(v(this)||v(O))return d;if(E(this))return E(O)?R(this).j(R(O)):R(R(this).j(O));if(E(O))return R(this.j(R(O)));if(0>this.l(_)&&0>O.l(_))return g(this.m()*O.m());for(var S=this.g.length+O.g.length,C=[],D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var L=0;L<O.g.length;L++){var $=this.i(D)>>>16,j=this.i(D)&65535,ce=O.i(L)>>>16,pe=O.i(L)&65535;C[2*D+2*L]+=j*pe,A(C,2*D+2*L),C[2*D+2*L+1]+=$*pe,A(C,2*D+2*L+1),C[2*D+2*L+1]+=j*ce,A(C,2*D+2*L+1),C[2*D+2*L+2]+=$*ce,A(C,2*D+2*L+2)}for(D=0;D<S;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=S;D<2*S;D++)C[D]=0;return new h(C,0)};function A(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function x(O,S){this.g=O,this.h=S}function M(O,S){if(v(S))throw Error("division by zero");if(v(O))return new x(d,d);if(E(O))return S=M(R(O),S),new x(R(S.g),R(S.h));if(E(S))return S=M(O,R(S)),new x(R(S.g),S.h);if(30<O.g.length){if(E(O)||E(S))throw Error("slowDivide_ only works with positive integers.");for(var C=y,D=S;0>=D.l(O);)C=V(C),D=V(D);var L=P(C,1),$=P(D,1);for(D=P(D,2),C=P(C,2);!v(D);){var j=$.add(D);0>=j.l(O)&&(L=L.add(C),$=j),D=P(D,1),C=P(C,1)}return S=w(O,L.j(S)),new x(L,S)}for(L=d;0<=O.l(S);){for(C=Math.max(1,Math.floor(O.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),$=g(C),j=$.j(S);E(j)||0<j.l(O);)C-=D,$=g(C),j=$.j(S);v($)&&($=y),L=L.add($),O=w(O,j)}return new x(L,O)}r.A=function(O){return M(this,O).h},r.and=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],D=0;D<S;D++)C[D]=this.i(D)&O.i(D);return new h(C,this.h&O.h)},r.or=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],D=0;D<S;D++)C[D]=this.i(D)|O.i(D);return new h(C,this.h|O.h)},r.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],D=0;D<S;D++)C[D]=this.i(D)^O.i(D);return new h(C,this.h^O.h)};function V(O){for(var S=O.g.length+1,C=[],D=0;D<S;D++)C[D]=O.i(D)<<1|O.i(D-1)>>>31;return new h(C,O.h)}function P(O,S){var C=S>>5;S%=32;for(var D=O.g.length-C,L=[],$=0;$<D;$++)L[$]=0<S?O.i($+C)>>>S|O.i($+C+1)<<32-S:O.i($+C);return new h(L,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,y2=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=b,Is=h}).apply(typeof d_<"u"?d_:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v2,eu,_2,sh,Um,b2,E2,w2;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,I,N){return f==Array.prototype||f==Object.prototype||(f[I]=N.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var I=0;I<f.length;++I){var N=f[I];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=n(this);function o(f,I){if(I)e:{var N=s;f=f.split(".");for(var z=0;z<f.length-1;z++){var W=f[z];if(!(W in N))break e;N=N[W]}f=f[f.length-1],z=N[f],I=I(z),I!=z&&I!=null&&e(N,f,{configurable:!0,writable:!0,value:I})}}function l(f,I){f instanceof String&&(f+="");var N=0,z=!1,W={next:function(){if(!z&&N<f.length){var ie=N++;return{value:I(ie,f[ie]),done:!1}}return z=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}o("Array.prototype.values",function(f){return f||function(){return l(this,function(I,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},c=this||self;function m(f){var I=typeof f;return I=I!="object"?I:f?Array.isArray(f)?"array":I:"null",I=="array"||I=="object"&&typeof f.length=="number"}function g(f){var I=typeof f;return I=="object"&&f!=null||I=="function"}function b(f,I,N){return f.call.apply(f.bind,arguments)}function d(f,I,N){if(!f)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,z),f.apply(I,W)}}return function(){return f.apply(I,arguments)}}function y(f,I,N){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:d,y.apply(null,arguments)}function _(f,I){var N=Array.prototype.slice.call(arguments,1);return function(){var z=N.slice();return z.push.apply(z,arguments),f.apply(this,z)}}function v(f,I){function N(){}N.prototype=I.prototype,f.aa=I.prototype,f.prototype=new N,f.prototype.constructor=f,f.Qb=function(z,W,ie){for(var ve=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ve[rt-2]=arguments[rt];return I.prototype[W].apply(z,ve)}}function E(f){const I=f.length;if(0<I){const N=Array(I);for(let z=0;z<I;z++)N[z]=f[z];return N}return[]}function R(f,I){for(let N=1;N<arguments.length;N++){const z=arguments[N];if(m(z)){const W=f.length||0,ie=z.length||0;f.length=W+ie;for(let ve=0;ve<ie;ve++)f[W+ve]=z[ve]}else f.push(z)}}class w{constructor(I,N){this.i=I,this.j=N,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function A(f){return/^[\s\xa0]*$/.test(f)}function x(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function M(f){return M[" "](f),f}M[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function P(f,I,N){for(const z in f)I.call(N,f[z],z,f)}function O(f,I){for(const N in f)I.call(void 0,f[N],N,f)}function S(f){const I={};for(const N in f)I[N]=f[N];return I}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(f,I){let N,z;for(let W=1;W<arguments.length;W++){z=arguments[W];for(N in z)f[N]=z[N];for(let ie=0;ie<C.length;ie++)N=C[ie],Object.prototype.hasOwnProperty.call(z,N)&&(f[N]=z[N])}}function L(f){var I=1;f=f.split(":");const N=[];for(;0<I&&f.length;)N.push(f.shift()),I--;return f.length&&N.push(f.join(":")),N}function $(f){c.setTimeout(()=>{throw f},0)}function j(){var f=Re;let I=null;return f.g&&(I=f.g,f.g=f.g.next,f.g||(f.h=null),I.next=null),I}class ce{constructor(){this.h=this.g=null}add(I,N){const z=pe.get();z.set(I,N),this.h?this.h.next=z:this.g=z,this.h=z}}var pe=new w(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(I,N){this.h=I,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ye=!1,Re=new ce,B=()=>{const f=c.Promise.resolve(void 0);ae=()=>{f.then(re)}};var re=()=>{for(var f;f=j();){try{f.h.call(f.g)}catch(N){$(N)}var I=pe;I.j(f),100>I.h&&(I.h++,f.next=I.g,I.g=f)}ye=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(f,I){this.type=f,this.g=this.target=I,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,I=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const N=()=>{};c.addEventListener("test",N,I),c.removeEventListener("test",N,I)}catch{}return f}();function Le(f,I){if(he.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var N=this.type=f.type,z=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=I,I=f.relatedTarget){if(V){e:{try{M(I.nodeName);var W=!0;break e}catch{}W=!1}W||(I=null)}}else N=="mouseover"?I=f.fromElement:N=="mouseout"&&(I=f.toElement);this.relatedTarget=I,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Le.aa.h.call(this)}}v(Le,he);var Ce={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),gt=0;function Zn(f,I,N,z,W){this.listener=f,this.proxy=null,this.src=I,this.type=N,this.capture=!!z,this.ha=W,this.key=++gt,this.da=this.fa=!1}function At(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function dn(f){this.src=f,this.g={},this.h=0}dn.prototype.add=function(f,I,N,z,W){var ie=f.toString();f=this.g[ie],f||(f=this.g[ie]=[],this.h++);var ve=ii(f,I,z,W);return-1<ve?(I=f[ve],N||(I.fa=!1)):(I=new Zn(I,this.src,ie,!!z,W),I.fa=N,f.push(I)),I};function xr(f,I){var N=I.type;if(N in f.g){var z=f.g[N],W=Array.prototype.indexOf.call(z,I,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(z,W,1),ie&&(At(I),f.g[N].length==0&&(delete f.g[N],f.h--))}}function ii(f,I,N,z){for(var W=0;W<f.length;++W){var ie=f[W];if(!ie.da&&ie.listener==I&&ie.capture==!!N&&ie.ha==z)return W}return-1}var Sn="closure_lm_"+(1e6*Math.random()|0),Bs={};function Oa(f,I,N,z,W){if(Array.isArray(I)){for(var ie=0;ie<I.length;ie++)Oa(f,I[ie],N,z,W);return null}return N=$i(N),f&&f[Tt]?f.K(I,N,g(z)?!!z.capture:!1,W):An(f,I,N,!1,z,W)}function An(f,I,N,z,W,ie){if(!I)throw Error("Invalid event type");var ve=g(W)?!!W.capture:!!W,rt=Jn(f);if(rt||(f[Sn]=rt=new dn(f)),N=rt.add(I,N,z,ve,ie),N.proxy)return N;if(z=Go(),N.proxy=z,z.src=f,z.listener=N,f.addEventListener)_e||(W=ve),W===void 0&&(W=!1),f.addEventListener(I.toString(),z,W);else if(f.attachEvent)f.attachEvent(si(I.toString()),z);else if(f.addListener&&f.removeListener)f.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Go(){function f(N){return I.call(f.src,f.listener,N)}const I=vr;return f}function qs(f,I,N,z,W){if(Array.isArray(I))for(var ie=0;ie<I.length;ie++)qs(f,I[ie],N,z,W);else z=g(z)?!!z.capture:!!z,N=$i(N),f&&f[Tt]?(f=f.i,I=String(I).toString(),I in f.g&&(ie=f.g[I],N=ii(ie,N,z,W),-1<N&&(At(ie[N]),Array.prototype.splice.call(ie,N,1),ie.length==0&&(delete f.g[I],f.h--)))):f&&(f=Jn(f))&&(I=f.g[I.toString()],f=-1,I&&(f=ii(I,N,z,W)),(N=-1<f?I[f]:null)&&Ui(N))}function Ui(f){if(typeof f!="number"&&f&&!f.da){var I=f.src;if(I&&I[Tt])xr(I.i,f);else{var N=f.type,z=f.proxy;I.removeEventListener?I.removeEventListener(N,z,f.capture):I.detachEvent?I.detachEvent(si(N),z):I.addListener&&I.removeListener&&I.removeListener(z),(N=Jn(I))?(xr(N,f),N.h==0&&(N.src=null,I[Sn]=null)):At(f)}}}function si(f){return f in Bs?Bs[f]:Bs[f]="on"+f}function vr(f,I){if(f.da)f=!0;else{I=new Le(I,this);var N=f.listener,z=f.ha||f.src;f.fa&&Ui(f),f=N.call(z,I)}return f}function Jn(f){return f=f[Sn],f instanceof dn?f:null}var zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function $i(f){return typeof f=="function"?f:(f[zi]||(f[zi]=function(I){return f.handleEvent(I)}),f[zi])}function ut(){me.call(this),this.i=new dn(this),this.M=this,this.F=null}v(ut,me),ut.prototype[Tt]=!0,ut.prototype.removeEventListener=function(f,I,N,z){qs(this,f,I,N,z)};function Fe(f,I){var N,z=f.F;if(z)for(N=[];z;z=z.F)N.push(z);if(f=f.M,z=I.type||I,typeof I=="string")I=new he(I,f);else if(I instanceof he)I.target=I.target||f;else{var W=I;I=new he(z,f),D(I,W)}if(W=!0,N)for(var ie=N.length-1;0<=ie;ie--){var ve=I.g=N[ie];W=mn(ve,z,!0,I)&&W}if(ve=I.g=f,W=mn(ve,z,!0,I)&&W,W=mn(ve,z,!1,I)&&W,N)for(ie=0;ie<N.length;ie++)ve=I.g=N[ie],W=mn(ve,z,!1,I)&&W}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var f=this.i,I;for(I in f.g){for(var N=f.g[I],z=0;z<N.length;z++)At(N[z]);delete f.g[I],f.h--}}this.F=null},ut.prototype.K=function(f,I,N,z){return this.i.add(String(f),I,!1,N,z)},ut.prototype.L=function(f,I,N,z){return this.i.add(String(f),I,!0,N,z)};function mn(f,I,N,z){if(I=f.i.g[String(I)],!I)return!0;I=I.concat();for(var W=!0,ie=0;ie<I.length;++ie){var ve=I[ie];if(ve&&!ve.da&&ve.capture==N){var rt=ve.listener,qt=ve.ha||ve.src;ve.fa&&xr(f.i,ve),W=rt.call(qt,z)!==!1&&W}}return W&&!z.defaultPrevented}function Vt(f,I,N){if(typeof f=="function")N&&(f=y(f,N));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:c.setTimeout(f,I||0)}function Na(f){f.g=Vt(()=>{f.g=null,f.i&&(f.i=!1,Na(f))},f.l);const I=f.h;f.h=null,f.m.apply(null,I)}class er extends me{constructor(I,N){super(),this.m=I,this.l=N,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(f){me.call(this),this.h=f,this.g={}}v(Dr,me);var Or=[];function Nr(f){P(f.g,function(I,N){this.g.hasOwnProperty(N)&&Ui(I)},f),f.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),Nr(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=c.JSON.stringify,ai=c.JSON.parse,tr=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Bi(){}Bi.prototype.h=null;function oi(f){return f.h||(f.h=f.i())}function Hs(){}var nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _r(){he.call(this,"d")}v(_r,he);function qi(){he.call(this,"c")}v(qi,he);var Rn={},kr=null;function Mr(){return kr=kr||new ut}Rn.La="serverreachability";function Hi(f){he.call(this,Rn.La,f)}v(Hi,he);function F(f){const I=Mr();Fe(I,new Hi(I))}Rn.STAT_EVENT="statevent";function X(f,I){he.call(this,Rn.STAT_EVENT,f),this.stat=I}v(X,he);function J(f){const I=Mr();Fe(I,new X(I,f))}Rn.Ma="timingevent";function le(f,I){he.call(this,Rn.Ma,f),this.size=I}v(le,he);function ge(f,I){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},I)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Oe(f,I,N,z,W,ie){f.info(function(){if(f.g)if(ie)for(var ve="",rt=ie.split("&"),qt=0;qt<rt.length;qt++){var it=rt[qt].split("=");if(1<it.length){var Wt=it[0];it=it[1];var Ht=Wt.split("_");ve=2<=Ht.length&&Ht[1]=="type"?ve+(Wt+"="+it+"&"):ve+(Wt+"=redacted&")}}else ve=null;else ve=ie;return"XMLHTTP REQ ("+z+") [attempt "+W+"]: "+I+`
`+N+`
`+ve})}function we(f,I,N,z,W,ie,ve){f.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+W+"]: "+I+`
`+N+`
`+ie+" "+ve})}function Se(f,I,N,z){f.info(function(){return"XMLHTTP TEXT ("+I+"): "+ke(f,N)+(z?" "+z:"")})}function Ie(f,I){f.info(function(){return"TIMEOUT: "+I})}Ee.prototype.info=function(){};function ke(f,I){if(!f.g)return I;if(!I)return null;try{var N=JSON.parse(I);if(N){for(f=0;f<N.length;f++)if(Array.isArray(N[f])){var z=N[f];if(!(2>z.length)){var W=z[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ve=1;ve<W.length;ve++)W[ve]=""}}}}return Ln(N)}catch{return I}}var Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xe;function ht(){}v(ht,Bi),ht.prototype.g=function(){return new XMLHttpRequest},ht.prototype.i=function(){return{}},Xe=new ht;function ot(f,I,N,z){this.j=f,this.i=I,this.l=N,this.R=z||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nt}function nt(){this.i=null,this.g="",this.h=!1}var Ye={},rr={};function Bt(f,I,N){f.L=1,f.v=Ks(zn(I)),f.m=N,f.P=!0,Cn(f,null)}function Cn(f,I){f.F=Date.now(),jn(f),f.A=zn(f.v);var N=f.A,z=f.R;Array.isArray(z)||(z=[String(z)]),Wo(N.i,"t",z),f.C=0,N=f.j.J,f.h=new nt,f.g=Hu(f.j,N?I:null,!f.m),0<f.O&&(f.M=new er(y(f.Y,f,f.g),f.O)),I=f.U,N=f.g,z=f.ca;var W="readystatechange";Array.isArray(W)||(W&&(Or[0]=W.toString()),W=Or);for(var ie=0;ie<W.length;ie++){var ve=Oa(N,W[ie],z||I.handleEvent,!1,I.h||I);if(!ve)break;I.g[ve.key]=ve}I=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,I)):(f.u="GET",f.g.ea(f.A,f.u,null,I)),F(),Oe(f.i,f.u,f.A,f.l,f.R,f.m)}ot.prototype.ca=function(f){f=f.target;const I=this.M;I&&lr(f)==3?I.j():this.Y(f)},ot.prototype.Y=function(f){try{if(f==this.g)e:{const Ht=lr(this.g);var I=this.g.Ba();const pi=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||Ht!=4||I==7||(I==8||0>=pi?F(3):F(2)),pn(this);var N=this.g.Z();this.X=N;t:if(nn(this)){var z=Vu(this.g);f="";var W=z.length,ie=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$e(this),In(this);var ve="";break t}this.h.i=new c.TextDecoder}for(I=0;I<W;I++)this.h.h=!0,f+=this.h.i.decode(z[I],{stream:!(ie&&I==W-1)});z.length=0,this.h.g+=f,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=N==200,we(this.i,this.u,this.A,this.l,this.R,Ht,N),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,qt=this.g;if((rt=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(rt)){var it=rt;break t}}it=null}if(N=it)Se(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lt(this,N);else{this.o=!1,this.s=3,J(12),$e(this),In(this);break e}}if(this.P){N=!0;let sn;for(;!this.J&&this.C<ve.length;)if(sn=Pr(this,ve),sn==rr){Ht==4&&(this.s=4,J(14),N=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Ye){this.s=4,J(15),Se(this.i,this.l,ve,"[Invalid Chunk]"),N=!1;break}else Se(this.i,this.l,sn,null),Lt(this,sn);if(nn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ve.length!=0||this.h.h||(this.s=1,J(16),N=!1),this.o=this.o&&N,!N)Se(this.i,this.l,ve,"[Invalid Chunked Response]"),$e(this),In(this);else if(0<ve.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),ta(Wt),Wt.M=!0,J(11))}}else Se(this.i,this.l,ve,null),Lt(this,ve);Ht==4&&$e(this),this.o&&!this.J&&(Ht==4?$u(this.j,this):(this.o=!1,jn(this)))}else pf(this.g),N==400&&0<ve.indexOf("Unknown SID")?(this.s=3,J(12)):(this.s=0,J(13)),$e(this),In(this)}}}catch{}finally{}};function nn(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Pr(f,I){var N=f.C,z=I.indexOf(`
`,N);return z==-1?rr:(N=Number(I.substring(N,z)),isNaN(N)?Ye:(z+=1,z+N>I.length?rr:(I=I.slice(z,z+N),f.C=z+N,I)))}ot.prototype.cancel=function(){this.J=!0,$e(this)};function jn(f){f.S=Date.now()+f.I,Fi(f,f.I)}function Fi(f,I){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ge(y(f.ba,f),I)}function pn(f){f.B&&(c.clearTimeout(f.B),f.B=null)}ot.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ie(this.i,this.A),this.L!=2&&(F(),J(17)),$e(this),this.s=2,In(this)):Fi(this,this.S-f)};function In(f){f.j.G==0||f.J||$u(f.j,f)}function $e(f){pn(f);var I=f.M;I&&typeof I.ma=="function"&&I.ma(),f.M=null,Nr(f.U),f.g&&(I=f.g,f.g=null,I.abort(),I.ma())}function Lt(f,I){try{var N=f.j;if(N.G!=0&&(N.g==f||ir(N.h,f))){if(!f.K&&ir(N.h,f)&&N.G==3){try{var z=N.Da.g.parse(I)}catch{z=null}if(Array.isArray(z)&&z.length==3){var W=z;if(W[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<f.F)$a(N),Ua(N);else break e;nl(N),J(18)}}else N.za=W[1],0<N.za-N.T&&37500>W[2]&&N.F&&N.v==0&&!N.C&&(N.C=ge(y(N.Za,N),6e3));if(1>=Et(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else mi(N,11)}else if((f.K||N.g==f)&&$a(N),!A(I))for(W=N.Da.g.parse(I),I=0;I<W.length;I++){let it=W[I];if(N.T=it[0],it=it[1],N.G==2)if(it[0]=="c"){N.K=it[1],N.ia=it[2];const Wt=it[3];Wt!=null&&(N.la=Wt,N.j.info("VER="+N.la));const Ht=it[4];Ht!=null&&(N.Aa=Ht,N.j.info("SVER="+N.Aa));const pi=it[5];pi!=null&&typeof pi=="number"&&0<pi&&(z=1.5*pi,N.L=z,N.j.info("backChannelRequestTimeoutMs_="+z)),z=N;const sn=f.g;if(sn){const qr=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var ie=z.h;ie.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(li(ie,ie.h),ie.h=null))}if(z.D){const il=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(z.ya=il,yt(z.I,z.D,il))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-f.F,N.j.info("Handshake RTT: "+N.R+"ms")),z=N;var ve=f;if(z.qa=qu(z,z.J?z.ia:null,z.W),ve.K){rn(z.h,ve);var rt=ve,qt=z.L;qt&&(rt.I=qt),rt.B&&(pn(rt),jn(rt)),z.g=ve}else Uu(z);0<N.i.length&&za(N)}else it[0]!="stop"&&it[0]!="close"||mi(N,7);else N.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?mi(N,7):el(N):it[0]!="noop"&&N.l&&N.l.ta(it),N.v=0)}}F(4)}catch{}}var Un=class{constructor(f,I){this.g=f,this.map=I}};function On(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Et(f){return f.h?1:f.g?f.g.size:0}function ir(f,I){return f.h?f.h==I:f.g?f.g.has(I):!1}function li(f,I){f.g?f.g.add(I):f.h=I}function rn(f,I){f.h&&f.h==I?f.h=null:f.g&&f.g.has(I)&&f.g.delete(I)}On.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ko(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let I=f.i;for(const N of f.g.values())I=I.concat(N.D);return I}return E(f.i)}function hf(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(m(f)){for(var I=[],N=f.length,z=0;z<N;z++)I.push(f[z]);return I}I=[],N=0;for(z in f)I[N++]=f[z];return I}function ka(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(m(f)||typeof f=="string"){var I=[];f=f.length;for(var N=0;N<f;N++)I.push(N);return I}I=[],N=0;for(const z in f)I[N++]=z;return I}}}function Yo(f,I){if(f.forEach&&typeof f.forEach=="function")f.forEach(I,void 0);else if(m(f)||typeof f=="string")Array.prototype.forEach.call(f,I,void 0);else for(var N=ka(f),z=hf(f),W=z.length,ie=0;ie<W;ie++)I.call(void 0,z[ie],N&&N[ie],f)}var Fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ff(f,I){if(f){f=f.split("&");for(var N=0;N<f.length;N++){var z=f[N].indexOf("="),W=null;if(0<=z){var ie=f[N].substring(0,z);W=f[N].substring(z+1)}else ie=f[N];I(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function jt(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof jt){this.h=f.h,Gs(this,f.j),this.o=f.o,this.g=f.g,Gi(this,f.s),this.l=f.l;var I=f.i,N=new ci;N.i=I.i,I.g&&(N.g=new Map(I.g),N.h=I.h),ui(this,N),this.m=f.m}else f&&(I=String(f).match(Fs))?(this.h=!1,Gs(this,I[1]||"",!0),this.o=sr(I[2]||""),this.g=sr(I[3]||"",!0),Gi(this,I[4]),this.l=sr(I[5]||"",!0),ui(this,I[6]||"",!0),this.m=sr(I[7]||"")):(this.h=!1,this.i=new ci(null,this.h))}jt.prototype.toString=function(){var f=[],I=this.j;I&&f.push(Ys(I,Qo,!0),":");var N=this.g;return(N||I=="file")&&(f.push("//"),(I=this.o)&&f.push(Ys(I,Qo,!0),"@"),f.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&f.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&f.push("/"),f.push(Ys(N,N.charAt(0)=="/"?df:Xo,!0))),(N=this.i.toString())&&f.push("?",N),(N=this.m)&&f.push("#",Ys(N,Ma)),f.join("")};function zn(f){return new jt(f)}function Gs(f,I,N){f.j=N?sr(I,!0):I,f.j&&(f.j=f.j.replace(/:$/,""))}function Gi(f,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);f.s=I}else f.s=null}function ui(f,I,N){I instanceof ci?(f.i=I,Mu(f.i,f.h)):(N||(I=Ys(I,mf)),f.i=new ci(I,f.h))}function yt(f,I,N){f.i.set(I,N)}function Ks(f){return yt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function sr(f,I){return f?I?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ys(f,I,N){return typeof f=="string"?(f=encodeURI(f).replace(I,ku),N&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ku(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Qo=/[#\/\?@]/g,Xo=/[#\?:]/g,df=/[#\?]/g,mf=/[#\?@]/g,Ma=/#/g;function ci(f,I){this.h=this.g=null,this.i=f||null,this.j=!!I}function ar(f){f.g||(f.g=new Map,f.h=0,f.i&&ff(f.i,function(I,N){f.add(decodeURIComponent(I.replace(/\+/g," ")),N)}))}r=ci.prototype,r.add=function(f,I){ar(this),this.i=null,f=Lr(this,f);var N=this.g.get(f);return N||this.g.set(f,N=[]),N.push(I),this.h+=1,this};function hi(f,I){ar(f),I=Lr(f,I),f.g.has(I)&&(f.i=null,f.h-=f.g.get(I).length,f.g.delete(I))}function fi(f,I){return ar(f),I=Lr(f,I),f.g.has(I)}r.forEach=function(f,I){ar(this),this.g.forEach(function(N,z){N.forEach(function(W){f.call(I,W,z,this)},this)},this)},r.na=function(){ar(this);const f=Array.from(this.g.values()),I=Array.from(this.g.keys()),N=[];for(let z=0;z<I.length;z++){const W=f[z];for(let ie=0;ie<W.length;ie++)N.push(I[z])}return N},r.V=function(f){ar(this);let I=[];if(typeof f=="string")fi(this,f)&&(I=I.concat(this.g.get(Lr(this,f))));else{f=Array.from(this.g.values());for(let N=0;N<f.length;N++)I=I.concat(f[N])}return I},r.set=function(f,I){return ar(this),this.i=null,f=Lr(this,f),fi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[I]),this.h+=1,this},r.get=function(f,I){return f?(f=this.V(f),0<f.length?String(f[0]):I):I};function Wo(f,I,N){hi(f,I),0<N.length&&(f.i=null,f.g.set(Lr(f,I),E(N)),f.h+=N.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],I=Array.from(this.g.keys());for(var N=0;N<I.length;N++){var z=I[N];const ie=encodeURIComponent(String(z)),ve=this.V(z);for(z=0;z<ve.length;z++){var W=ie;ve[z]!==""&&(W+="="+encodeURIComponent(String(ve[z]))),f.push(W)}}return this.i=f.join("&")};function Lr(f,I){return I=String(I),f.j&&(I=I.toLowerCase()),I}function Mu(f,I){I&&!f.j&&(ar(f),f.i=null,f.g.forEach(function(N,z){var W=z.toLowerCase();z!=W&&(hi(this,z),Wo(this,W,N))},f)),f.j=I}function Qs(f,I){const N=new Ee;if(c.Image){const z=new Image;z.onload=_(or,N,"TestLoadImage: loaded",!0,I,z),z.onerror=_(or,N,"TestLoadImage: error",!1,I,z),z.onabort=_(or,N,"TestLoadImage: abort",!1,I,z),z.ontimeout=_(or,N,"TestLoadImage: timeout",!1,I,z),c.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=f}else I(!1)}function br(f,I){const N=new Ee,z=new AbortController,W=setTimeout(()=>{z.abort(),or(N,"TestPingServer: timeout",!1,I)},1e4);fetch(f,{signal:z.signal}).then(ie=>{clearTimeout(W),ie.ok?or(N,"TestPingServer: ok",!0,I):or(N,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(W),or(N,"TestPingServer: error",!1,I)})}function or(f,I,N,z,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),z(N)}catch{}}function Xs(){this.g=new tr}function jr(f,I,N){const z=N||"";try{Yo(f,function(W,ie){let ve=W;g(W)&&(ve=Ln(W)),I.push(z+ie+"="+encodeURIComponent(ve))})}catch(W){throw I.push(z+"type="+encodeURIComponent("_badmap")),W}}function Ki(f){this.l=f.Ub||null,this.j=f.eb||!1}v(Ki,Bi),Ki.prototype.g=function(){return new di(this.l,this.j)},Ki.prototype.i=function(f){return function(){return f}}({});function di(f,I){ut.call(this),this.D=f,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(di,ut),r=di.prototype,r.open=function(f,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=I,this.readyState=1,zr(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(I.body=f),(this.D||c).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zo(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zo(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var I=f.value?f.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!f.done}))&&(this.response=this.responseText+=I)}f.done?Ur(this):zr(this),this.readyState==3&&Zo(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Ur(this))},r.Qa=function(f){this.g&&(this.response=f,Ur(this))},r.ga=function(){this.g&&Ur(this)};function Ur(f){f.readyState=4,f.l=null,f.j=null,f.v=null,zr(f)}r.setRequestHeader=function(f,I){this.u.append(f,I)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],I=this.h.entries();for(var N=I.next();!N.done;)N=N.value,f.push(N[0]+": "+N[1]),N=I.next();return f.join(`\r
`)};function zr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Jo(f){let I="";return P(f,function(N,z){I+=z,I+=":",I+=N,I+=`\r
`}),I}function Xt(f,I,N){e:{for(z in N){var z=!1;break e}z=!0}z||(N=Jo(N),typeof f=="string"?N!=null&&encodeURIComponent(String(N)):yt(f,I,N))}function ft(f){ut.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ft,ut);var Pa=/^https?$/i,Ws=["POST","PUT"];r=ft.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,I,N,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);I=I?I.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xe.g(),this.v=this.o?oi(this.o):oi(Xe),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(I,String(f),!0),this.B=!1}catch(ie){Pu(this,ie);return}if(f=N||"",N=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var W in z)N.set(W,z[W]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ie of z.keys())N.set(ie,z.get(ie));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(N.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ws,I,void 0))||z||W||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ve]of N)this.g.setRequestHeader(ie,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(f),this.u=!1}catch(ie){Pu(this,ie)}};function Pu(f,I){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=I,f.m=5,Va(f),$r(f)}function Va(f){f.A||(f.A=!0,Fe(f,"complete"),Fe(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Fe(this,"complete"),Fe(this,"abort"),$r(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$r(this,!0)),ft.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},r.bb=function(){La(this)};function La(f){if(f.h&&typeof h<"u"&&(!f.v[1]||lr(f)!=4||f.Z()!=2)){if(f.u&&lr(f)==4)Vt(f.Ea,0,f);else if(Fe(f,"readystatechange"),lr(f)==4){f.h=!1;try{const ve=f.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var N;if(!(N=I)){var z;if(z=ve===0){var W=String(f.D).match(Fs)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),z=!Pa.test(W?W.toLowerCase():"")}N=z}if(N)Fe(f,"complete"),Fe(f,"success");else{f.m=6;try{var ie=2<lr(f)?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.Z()+"]",Va(f)}}finally{$r(f)}}}}function $r(f,I){if(f.g){Zs(f);const N=f.g,z=f.v[0]?()=>{}:null;f.g=null,f.v=null,I||Fe(f,"ready");try{N.onreadystatechange=z}catch{}}}function Zs(f){f.I&&(c.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function lr(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var I=this.g.responseText;return f&&I.indexOf(f)==0&&(I=I.substring(f.length)),ai(I)}};function Vu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function pf(f){const I={};f=(f.g&&2<=lr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<f.length;z++){if(A(f[z]))continue;var N=L(f[z]);const W=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ie=I[W]||[];I[W]=ie,ie.push(N)}O(I,function(z){return z.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(f,I,N){return N&&N.internalChannelParams&&N.internalChannelParams[f]||I}function ja(f){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,f),this.cb=Js("retryDelaySeedMs",1e4,f),this.Wa=Js("forwardChannelMaxRetries",2,f),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new On(f&&f.concurrentRequestLimit),this.Da=new Xs,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ja.prototype,r.la=8,r.G=1,r.connect=function(f,I,N,z){J(0),this.W=f,this.H=I||{},N&&z!==void 0&&(this.H.OSID=N,this.H.OAID=z),this.F=this.X,this.I=qu(this,null,this.W),za(this)};function el(f){if(Lu(f),f.G==3){var I=f.U++,N=zn(f.I);if(yt(N,"SID",f.K),yt(N,"RID",I),yt(N,"TYPE","terminate"),ea(f,N),I=new ot(f,f.j,I),I.L=2,I.v=Ks(zn(N)),N=!1,c.navigator&&c.navigator.sendBeacon)try{N=c.navigator.sendBeacon(I.v.toString(),"")}catch{}!N&&c.Image&&(new Image().src=I.v,N=!0),N||(I.g=Hu(I.j,null),I.g.ea(I.v)),I.F=Date.now(),jn(I)}Bu(f)}function Ua(f){f.g&&(ta(f),f.g.cancel(),f.g=null)}function Lu(f){Ua(f),f.u&&(c.clearTimeout(f.u),f.u=null),$a(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function za(f){if(!Vr(f.h)&&!f.s){f.s=!0;var I=f.Ga;ae||B(),ye||(ae(),ye=!0),Re.add(I,f),f.B=0}}function gf(f,I){return Et(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=I.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ge(y(f.Ga,f,I),rl(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const W=new ot(this,this.j,f);let ie=this.o;if(this.S&&(ie?(ie=S(ie),D(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var I=0,N=0;N<this.i.length;N++){t:{var z=this.i[N];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(I+=z,4096<I){I=N;break e}if(I===4096||N===this.i.length-1){I=N+1;break e}}I=1e3}else I=1e3;I=ju(this,W,I),N=zn(this.I),yt(N,"RID",f),yt(N,"CVER",22),this.D&&yt(N,"X-HTTP-Session-Id",this.D),ea(this,N),ie&&(this.O?I="headers="+encodeURIComponent(String(Jo(ie)))+"&"+I:this.m&&Xt(N,this.m,ie)),li(this.h,W),this.Ua&&yt(N,"TYPE","init"),this.P?(yt(N,"$req",I),yt(N,"SID","null"),W.T=!0,Bt(W,N,null)):Bt(W,N,I),this.G=2}}else this.G==3&&(f?tl(this,f):this.i.length==0||Vr(this.h)||tl(this))};function tl(f,I){var N;I?N=I.l:N=f.U++;const z=zn(f.I);yt(z,"SID",f.K),yt(z,"RID",N),yt(z,"AID",f.T),ea(f,z),f.m&&f.o&&Xt(z,f.m,f.o),N=new ot(f,f.j,N,f.B+1),f.m===null&&(N.H=f.o),I&&(f.i=I.D.concat(f.i)),I=ju(f,N,1e3),N.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),li(f.h,N),Bt(N,z,I)}function ea(f,I){f.H&&P(f.H,function(N,z){yt(I,z,N)}),f.l&&Yo({},function(N,z){yt(I,z,N)})}function ju(f,I,N){N=Math.min(f.i.length,N);var z=f.l?y(f.l.Na,f.l,f):null;e:{var W=f.i;let ie=-1;for(;;){const ve=["count="+N];ie==-1?0<N?(ie=W[0].g,ve.push("ofs="+ie)):ie=0:ve.push("ofs="+ie);let rt=!0;for(let qt=0;qt<N;qt++){let it=W[qt].g;const Wt=W[qt].map;if(it-=ie,0>it)ie=Math.max(0,W[qt].g-100),rt=!1;else try{jr(Wt,ve,"req"+it+"_")}catch{z&&z(Wt)}}if(rt){z=ve.join("&");break e}}}return f=f.i.splice(0,N),I.D=f,z}function Uu(f){if(!f.g&&!f.u){f.Y=1;var I=f.Fa;ae||B(),ye||(ae(),ye=!0),Re.add(I,f),f.v=0}}function nl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ge(y(f.Fa,f),rl(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ge(y(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,J(10),Ua(this),zu(this))};function ta(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function zu(f){f.g=new ot(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var I=zn(f.qa);yt(I,"RID","rpc"),yt(I,"SID",f.K),yt(I,"AID",f.T),yt(I,"CI",f.F?"0":"1"),!f.F&&f.ja&&yt(I,"TO",f.ja),yt(I,"TYPE","xmlhttp"),ea(f,I),f.m&&f.o&&Xt(I,f.m,f.o),f.L&&(f.g.I=f.L);var N=f.g;f=f.ia,N.L=1,N.v=Ks(zn(I)),N.m=null,N.P=!0,Cn(N,f)}r.Za=function(){this.C!=null&&(this.C=null,Ua(this),nl(this),J(19))};function $a(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function $u(f,I){var N=null;if(f.g==I){$a(f),ta(f),f.g=null;var z=2}else if(ir(f.h,I))N=I.D,rn(f.h,I),z=1;else return;if(f.G!=0){if(I.o)if(z==1){N=I.m?I.m.length:0,I=Date.now()-I.F;var W=f.B;z=Mr(),Fe(z,new le(z,N)),za(f)}else Uu(f);else if(W=I.s,W==3||W==0&&0<I.X||!(z==1&&gf(f,I)||z==2&&nl(f)))switch(N&&0<N.length&&(I=f.h,I.i=I.i.concat(N)),W){case 1:mi(f,5);break;case 4:mi(f,10);break;case 3:mi(f,6);break;default:mi(f,2)}}}function rl(f,I){let N=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(N*=2),N*I}function mi(f,I){if(f.j.info("Error code "+I),I==2){var N=y(f.fb,f),z=f.Xa;const W=!z;z=new jt(z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gs(z,"https"),Ks(z),W?Qs(z.toString(),N):br(z.toString(),N)}else J(2);f.G=0,f.l&&f.l.sa(I),Bu(f),Lu(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1))};function Bu(f){if(f.G=0,f.ka=[],f.l){const I=Ko(f.h);(I.length!=0||f.i.length!=0)&&(R(f.ka,I),R(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function qu(f,I,N){var z=N instanceof jt?zn(N):new jt(N);if(z.g!="")I&&(z.g=I+"."+z.g),Gi(z,z.s);else{var W=c.location;z=W.protocol,I=I?I+"."+W.hostname:W.hostname,W=+W.port;var ie=new jt(null);z&&Gs(ie,z),I&&(ie.g=I),W&&Gi(ie,W),N&&(ie.l=N),z=ie}return N=f.D,I=f.ya,N&&I&&yt(z,N,I),yt(z,"VER",f.la),ea(f,z),z}function Hu(f,I,N){if(I&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=f.Ca&&!f.pa?new ft(new Ki({eb:N})):new ft(f.pa),I.Ha(f.J),I}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}r=Fu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ba(){}Ba.prototype.g=function(f,I){return new xn(f,I)};function xn(f,I){ut.call(this),this.g=new ja(I),this.l=f,this.h=I&&I.messageUrlParams||null,f=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(f?f["X-WebChannel-Content-Type"]=I.messageContentType:f={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(f?f["X-WebChannel-Client-Profile"]=I.va:f={"X-WebChannel-Client-Profile":I.va}),this.g.S=f,(f=I&&I.Sb)&&!A(f)&&(this.g.m=f),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!A(I)&&(this.g.D=I,f=this.h,f!==null&&I in f&&(f=this.h,I in f&&delete f[I])),this.j=new Br(this)}v(xn,ut),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){el(this.g)},xn.prototype.o=function(f){var I=this.g;if(typeof f=="string"){var N={};N.__data__=f,f=N}else this.u&&(N={},N.__data__=Ln(f),f=N);I.i.push(new Un(I.Ya++,f)),I.G==3&&za(I)},xn.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,xn.aa.N.call(this)};function Gu(f){_r.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var I=f.__sm__;if(I){e:{for(const N in I){f=N;break e}f=void 0}(this.i=f)&&(f=this.i,I=I!==null&&f in I?I[f]:void 0),this.data=I}else this.data=f}v(Gu,_r);function Ku(){qi.call(this),this.status=1}v(Ku,qi);function Br(f){this.g=f}v(Br,Fu),Br.prototype.ua=function(){Fe(this.g,"a")},Br.prototype.ta=function(f){Fe(this.g,new Gu(f))},Br.prototype.sa=function(f){Fe(this.g,new Ku)},Br.prototype.ra=function(){Fe(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,w2=function(){return new Ba},E2=function(){return Mr()},b2=Rn,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,sh=Ae,Pe.COMPLETE="complete",_2=Pe,Hs.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,eu=Hs,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,v2=ft}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});const m_="@firebase/firestore",p_="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new yp("@firebase/firestore");function _o(){return Ta.logLevel}function be(r,...e){if(Ta.logLevel<=et.DEBUG){const n=e.map(bp);Ta.debug(`Firestore (${Uo}): ${r}`,...n)}}function ki(r,...e){if(Ta.logLevel<=et.ERROR){const n=e.map(bp);Ta.error(`Firestore (${Uo}): ${r}`,...n)}}function Do(r,...e){if(Ta.logLevel<=et.WARN){const n=e.map(bp);Ta.warn(`Firestore (${Uo}): ${r}`,...n)}}function bp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,T2(r,s,n)}function T2(r,e,n){let s=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ki(s),new Error(s)}function dt(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||T2(e,o,s)}function qe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_n.UNAUTHENTICATED))}shutdown(){}}class oC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lC{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let l=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Oi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},c=m=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(m=>c(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?c(m):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Oi)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dt(typeof s.accessToken=="string",31837,{l:s}),new S2(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class uC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new uC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dt(this.o===void 0,3512);const s=l=>{l.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,be("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new g_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new g_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=fC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<n&&(s+=e.charAt(o[l]%62))}return s}}function Ke(r,e){return r<e?-1:r>e?1:0}function zm(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ke(s,o);{const l=A2(),h=dC(l.encode(y_(r,n)),l.encode(y_(e,n)));return h!==0?h:Ke(s,o)}}n+=s>65535?2:1}return Ke(r.length,e.length)}function y_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function dC(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return Ke(r[n],e[n]);return Ke(r.length,e.length)}function Oo(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=-62135596800,__=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*__);return new Yt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new De(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new De(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<v_)throw new De(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/__}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-v_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Yt(0,0))}static max(){return new Be(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="__name__";class Qr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ue(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const l=Qr.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return Ke(e.length,n.length)}static compareSegments(e,n){const s=Qr.isNumericId(e),o=Qr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Qr.extractNumericId(e).compare(Qr.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class Ct extends Qr{construct(e,n,s){return new Ct(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new De(de.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new Ct(n)}static emptyPath(){return new Ct([])}}const mC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Qr{construct(e,n,s){return new hn(e,n,s)}static isValidIdentifier(e){return mC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b_}static keyField(){return new hn([b_])}static fromServerFormat(e){const n=[];let s="",o=0;const l=()=>{if(s.length===0)throw new De(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const c=e[o];if(c==="\\"){if(o+1===e.length)throw new De(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new De(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else c==="`"?(h=!h,o++):c!=="."||h?(s+=c,o++):(l(),o++)}if(l(),h)throw new De(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Ct.fromString(e))}static fromName(e){return new Ne(Ct.fromString(e).popFirst(5))}static empty(){return new Ne(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function pC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Be.fromTimestamp(s===1e9?new Yt(n+1,0):new Yt(n,s));return new Ns(o,Ne.empty(),e)}function gC(r){return new Ns(r.readTime,r.key,du)}class Ns{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ns(Be.min(),Ne.empty(),du)}static max(){return new Ns(Be.max(),Ne.empty(),du)}}function yC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(r.documentKey,e.documentKey),n!==0?n:Ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==vC)throw r;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.reject(n)}static resolve(e){return new fe((n,s)=>{n(e)})}static reject(e){return new fe((n,s)=>{s(e)})}static waitFor(e){return new fe((n,s)=>{let o=0,l=0,h=!1;e.forEach(c=>{++o,c.next(()=>{++l,h&&l===o&&n()},m=>s(m))}),h=!0,l===o&&n()})}static or(e){let n=fe.resolve(!1);for(const s of e)n=n.next(o=>o?fe.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,l)=>{s.push(n.call(this,o,l))}),this.waitFor(s)}static mapArray(e,n){return new fe((s,o)=>{const l=e.length,h=new Array(l);let c=0;for(let m=0;m<l;m++){const g=m;n(e[g]).next(b=>{h[g]=b,++c,c===l&&s(h)},b=>o(b))}})}static doWhile(e,n){return new fe((s,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):s()};l()})}}function bC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $o(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Bh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=-1;function qh(r){return r==null}function Eh(r){return r===0&&1/r==-1/0}function EC(r){return typeof r=="number"&&Number.isInteger(r)&&!Eh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="";function wC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=E_(e)),e=TC(r.get(n),e);return E_(e)}function TC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":n+="";break;case C2:n+="";break;default:n+=l}}return n}function E_(r){return r+C2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Us(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function I2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,n,s,o,l){this.key=e,this.value=n,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,l){return new un(e??this.key,n??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,s),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,s,o,l){return this}insert(e,n,s){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new T_(this.data.getIterator())}getIteratorFrom(e){return new T_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class T_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Qt(hn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new x2("Invalid base64 string: "+l):l}}(e);return new fn(n)}static fromUint8Array(e){const n=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const SC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const n=SC.exec(r);if(dt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(r.seconds),nanos:Mt(r.nanos)}}function Mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?fn.fromBase64String(r):fn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="server_timestamp",O2="__type__",N2="__previous_value__",k2="__local_write_time__";function wp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[O2])===null||n===void 0?void 0:n.stringValue)===D2}function Hh(r){const e=r.mapValue.fields[N2];return wp(e)?Hh(e):e}function mu(r){const e=ks(r.mapValue.fields[k2].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,s,o,l,h,c,m,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=c,this.longPollingOptions=m,this.useFetchStreams=g}}const wh="(default)";class pu{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="__type__",RC="__max__",Zc={mapValue:{}},P2="__vector__",Th="value";function Ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?wp(r)?4:IC(r)?9007199254740991:CC(r)?10:11:Ue(28295,{value:r})}function ti(r,e){if(r===e)return!0;const n=Ps(r);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return mu(r).isEqual(mu(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ks(o.timestampValue),c=ks(l.timestampValue);return h.seconds===c.seconds&&h.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ms(o.bytesValue).isEqual(Ms(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return Mt(o.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Mt(o.integerValue)===Mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Mt(o.doubleValue),c=Mt(l.doubleValue);return h===c?Eh(h)===Eh(c):isNaN(h)&&isNaN(c)}return!1}(r,e);case 9:return Oo(r.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},c=l.mapValue.fields||{};if(w_(h)!==w_(c))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(c[m]===void 0||!ti(h[m],c[m])))return!1;return!0}(r,e);default:return Ue(52216,{left:r})}}function gu(r,e){return(r.values||[]).find(n=>ti(n,e))!==void 0}function No(r,e){if(r===e)return 0;const n=Ps(r),s=Ps(e);if(n!==s)return Ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(r.booleanValue,e.booleanValue);case 2:return function(l,h){const c=Mt(l.integerValue||l.doubleValue),m=Mt(h.integerValue||h.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(r,e);case 3:return S_(r.timestampValue,e.timestampValue);case 4:return S_(mu(r),mu(e));case 5:return zm(r.stringValue,e.stringValue);case 6:return function(l,h){const c=Ms(l),m=Ms(h);return c.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const c=l.split("/"),m=h.split("/");for(let g=0;g<c.length&&g<m.length;g++){const b=Ke(c[g],m[g]);if(b!==0)return b}return Ke(c.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const c=Ke(Mt(l.latitude),Mt(h.latitude));return c!==0?c:Ke(Mt(l.longitude),Mt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return A_(r.arrayValue,e.arrayValue);case 10:return function(l,h){var c,m,g,b;const d=l.fields||{},y=h.fields||{},_=(c=d[Th])===null||c===void 0?void 0:c.arrayValue,v=(m=y[Th])===null||m===void 0?void 0:m.arrayValue,E=Ke(((g=_==null?void 0:_.values)===null||g===void 0?void 0:g.length)||0,((b=v==null?void 0:v.values)===null||b===void 0?void 0:b.length)||0);return E!==0?E:A_(_,v)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Zc.mapValue&&h===Zc.mapValue)return 0;if(l===Zc.mapValue)return 1;if(h===Zc.mapValue)return-1;const c=l.fields||{},m=Object.keys(c),g=h.fields||{},b=Object.keys(g);m.sort(),b.sort();for(let d=0;d<m.length&&d<b.length;++d){const y=zm(m[d],b[d]);if(y!==0)return y;const _=No(c[m[d]],g[b[d]]);if(_!==0)return _}return Ke(m.length,b.length)}(r.mapValue,e.mapValue);default:throw Ue(23264,{Pe:n})}}function S_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ke(r,e);const n=ks(r),s=ks(e),o=Ke(n.seconds,s.seconds);return o!==0?o:Ke(n.nanos,s.nanos)}function A_(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const l=No(n[o],s[o]);if(l)return l}return Ke(n.length,s.length)}function ko(r){return $m(r)}function $m(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=ks(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Ms(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Ne.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const l of n.values||[])o?o=!1:s+=",",s+=$m(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${$m(n.fields[h])}`;return o+"}"}(r.mapValue):Ue(61005,{value:r})}function ah(r){switch(Ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(r);return e?16+ah(e):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+ah(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Us(s.fields,(l,h)=>{o+=l.length+ah(h)}),o}(r.mapValue);default:throw Ue(13486,{value:r})}}function Bm(r){return!!r&&"integerValue"in r}function Tp(r){return!!r&&"arrayValue"in r}function R_(r){return!!r&&"nullValue"in r}function C_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function oh(r){return!!r&&"mapValue"in r}function CC(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[M2])===null||n===void 0?void 0:n.stringValue)===P2}function iu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Us(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=iu(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=iu(r.arrayValue.values[n]);return e}return Object.assign({},r)}function IC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===RC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(n)}setAll(e){let n=hn.emptyPath(),s={},o=[];e.forEach((h,c)=>{if(!n.isImmediateParentOf(c)){const m=this.getFieldsMap(n);this.applyChanges(m,s,o),s={},o=[],n=c.popLast()}h?s[c.lastSegment()]=iu(h):o.push(c.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,s,o)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Us(n,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new Vn(iu(this.value))}}function V2(r){const e=[];return Us(r.fields,(n,s)=>{const o=new hn([n]);if(oh(s)){const l=V2(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n,s,o,l,h,c){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=c}static newInvalidDocument(e){return new En(e,0,Be.min(),Be.min(),Be.min(),Vn.empty(),0)}static newFoundDocument(e,n,s,o){return new En(e,1,n,Be.min(),s,o,0)}static newNoDocument(e,n){return new En(e,2,n,Be.min(),Be.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new En(e,3,n,Be.min(),Be.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.position=e,this.inclusive=n}}function I_(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Ne.comparator(Ne.fromName(h.referenceValue),n.key):s=No(h,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function x_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ti(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function xC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{}class Kt extends L2{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new OC(e,n,s):n==="array-contains"?new MC(e,s):n==="in"?new PC(e,s):n==="not-in"?new VC(e,s):n==="array-contains-any"?new LC(e,s):new Kt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new NC(e,s):new kC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends L2{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ni(e,n)}matches(e){return j2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function j2(r){return r.op==="and"}function U2(r){return DC(r)&&j2(r)}function DC(r){for(const e of r.filters)if(e instanceof ni)return!1;return!0}function qm(r){if(r instanceof Kt)return r.field.canonicalString()+r.op.toString()+ko(r.value);if(U2(r))return r.filters.map(e=>qm(e)).join(",");{const e=r.filters.map(n=>qm(n)).join(",");return`${r.op}(${e})`}}function z2(r,e){return r instanceof Kt?function(s,o){return o instanceof Kt&&s.op===o.op&&s.field.isEqual(o.field)&&ti(s.value,o.value)}(r,e):r instanceof ni?function(s,o){return o instanceof ni&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,c)=>l&&z2(h,o.filters[c]),!0):!1}(r,e):void Ue(19439)}function $2(r){return r instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`}(r):r instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map($2).join(" ,")+"}"}(r):"Filter"}class OC extends Kt{constructor(e,n,s){super(e,n,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class NC extends Kt{constructor(e,n){super(e,"in",n),this.keys=B2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kC extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=B2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B2(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ne.fromName(s.referenceValue))}class MC extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tp(n)&&gu(n.arrayValue,this.value)}}class PC extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gu(this.value.arrayValue,n)}}class VC extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gu(this.value.arrayValue,n)}}class LC extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>gu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n=null,s=[],o=[],l=null,h=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=c,this.Ie=null}}function D_(r,e=null,n=[],s=[],o=null,l=null,h=null){return new jC(r,e,n,s,o,l,h)}function Sp(r){const e=qe(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>qm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ko(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ko(s)).join(",")),e.Ie=n}return e.Ie}function Ap(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!xC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!z2(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!x_(r.startAt,e.startAt)&&x_(r.endAt,e.endAt)}function Hm(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n=null,s=[],o=[],l=null,h="F",c=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=c,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function UC(r,e,n,s,o,l,h,c){return new Fh(r,e,n,s,o,l,h,c)}function Rp(r){return new Fh(r)}function O_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function zC(r){return r.collectionGroup!==null}function su(r){const e=qe(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let c=new Qt(hn.comparator);return h.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(c=c.add(g.field))})}),c})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Ah(l,s))}),n.has(hn.keyField().canonicalString())||e.Ee.push(new Ah(hn.keyField(),s))}return e.Ee}function Wr(r){const e=qe(r);return e.de||(e.de=$C(e,su(r))),e.de}function $C(r,e){if(r.limitType==="F")return D_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Ah(o.field,l)});const n=r.endAt?new Sh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Sh(r.startAt.position,r.startAt.inclusive):null;return D_(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Fm(r,e,n){return new Fh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Gh(r,e){return Ap(Wr(r),Wr(e))&&r.limitType===e.limitType}function q2(r){return`${Sp(Wr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>$2(o)).join(", ")}]`),qh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ko(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ko(o)).join(",")),`Target(${s})`}(Wr(r))}; limitType=${r.limitType})`}function Kh(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ne.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of su(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,c,m){const g=I_(h,c,m);return h.inclusive?g<=0:g<0}(s.startAt,su(s),o)||s.endAt&&!function(h,c,m){const g=I_(h,c,m);return h.inclusive?g>=0:g>0}(s.endAt,su(s),o))}(r,e)}function BC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function H2(r){return(e,n)=>{let s=!1;for(const o of su(r)){const l=qC(o,e,n);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function qC(r,e,n){const s=r.field.isKeyField()?Ne.comparator(e.key,n.key):function(l,h,c){const m=h.data.field(l),g=c.data.field(l);return m!==null&&g!==null?No(m,g):Ue(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ue(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(n,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return I2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new xt(Ne.comparator);function Mi(){return HC}const F2=new xt(Ne.comparator);function tu(...r){let e=F2;for(const n of r)e=e.insert(n.key,n);return e}function G2(r){let e=F2;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ba(){return au()}function K2(){return au()}function au(){return new Ia(r=>r.toString(),(r,e)=>r.isEqual(e))}const FC=new xt(Ne.comparator),GC=new Qt(Ne.comparator);function tt(...r){let e=GC;for(const n of r)e=e.add(n);return e}const KC=new Qt(Ke);function YC(){return KC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function Y2(r){return{integerValue:""+r}}function QC(r,e){return EC(e)?Y2(e):Cp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function XC(r,e,n){return r instanceof Rh?function(o,l){const h={fields:{[O2]:{stringValue:D2},[k2]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&wp(l)&&(l=Hh(l)),l&&(h.fields[N2]=l),{mapValue:h}}(n,e):r instanceof yu?X2(r,e):r instanceof vu?W2(r,e):function(o,l){const h=Q2(o,l),c=N_(h)+N_(o.Re);return Bm(h)&&Bm(o.Re)?Y2(c):Cp(o.serializer,c)}(r,e)}function WC(r,e,n){return r instanceof yu?X2(r,e):r instanceof vu?W2(r,e):n}function Q2(r,e){return r instanceof Ch?function(s){return Bm(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Rh extends Yh{}class yu extends Yh{constructor(e){super(),this.elements=e}}function X2(r,e){const n=Z2(e);for(const s of r.elements)n.some(o=>ti(o,s))||n.push(s);return{arrayValue:{values:n}}}class vu extends Yh{constructor(e){super(),this.elements=e}}function W2(r,e){let n=Z2(e);for(const s of r.elements)n=n.filter(o=>!ti(o,s));return{arrayValue:{values:n}}}class Ch extends Yh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function N_(r){return Mt(r.integerValue||r.doubleValue)}function Z2(r){return Tp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function ZC(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof yu&&o instanceof yu||s instanceof vu&&o instanceof vu?Oo(s.elements,o.elements,ti):s instanceof Ch&&o instanceof Ch?ti(s.Re,o.Re):s instanceof Rh&&o instanceof Rh}(r.transform,e.transform)}class JC{constructor(e,n){this.version=e,this.transformResults=n}}class Rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qh{}function J2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ip(r.key,Rr.none()):new Ru(r.key,r.data,Rr.none());{const n=r.data,s=Vn.empty();let o=new Qt(hn.comparator);for(let l of e.fields)if(!o.has(l)){let h=n.field(l);h===null&&l.length>1&&(l=l.popLast(),h=n.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new zs(r.key,s,new Xn(o.toArray()),Rr.none())}}function eI(r,e,n){r instanceof Ru?function(o,l,h){const c=o.value.clone(),m=M_(o.fieldTransforms,l,h.transformResults);c.setAll(m),l.convertToFoundDocument(h.version,c).setHasCommittedMutations()}(r,e,n):r instanceof zs?function(o,l,h){if(!lh(o.precondition,l))return void l.convertToUnknownDocument(h.version);const c=M_(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(eE(o)),m.setAll(c),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,n):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function ou(r,e,n,s){return r instanceof Ru?function(l,h,c,m){if(!lh(l.precondition,h))return c;const g=l.value.clone(),b=P_(l.fieldTransforms,m,h);return g.setAll(b),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof zs?function(l,h,c,m){if(!lh(l.precondition,h))return c;const g=P_(l.fieldTransforms,m,h),b=h.data;return b.setAll(eE(l)),b.setAll(g),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),c===null?null:c.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(d=>d.field))}(r,e,n,s):function(l,h,c){return lh(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):c}(r,e,n)}function tI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Q2(s.transform,o||null);l!=null&&(n===null&&(n=Vn.empty()),n.set(s.field,l))}return n||null}function k_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Oo(s,o,(l,h)=>ZC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ru extends Qh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zs extends Qh{constructor(e,n,s,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function eE(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function M_(r,e,n){const s=new Map;dt(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const l=r[o],h=l.transform,c=e.data.field(l.field);s.set(l.field,WC(h,c,n[o]))}return s}function P_(r,e,n){const s=new Map;for(const o of r){const l=o.transform,h=n.data.field(o.field);s.set(o.field,XC(l,h,e))}return s}class Ip extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&eI(l,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ou(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ou(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=K2();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let c=this.applyToLocalView(h,l.mutatedFields);c=n.has(o.key)?null:c;const m=J2(h,c);m!==null&&s.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Be.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),tt())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,s)=>k_(n,s))&&Oo(this.baseMutations,e.baseMutations,(n,s)=>k_(n,s))}}class xp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){dt(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return FC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new xp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,at;function aI(r){switch(r){case de.OK:return Ue(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ue(15467,{code:r})}}function tE(r){if(r===void 0)return ki("GRPC error has no .code"),de.UNKNOWN;switch(r){case $t.OK:return de.OK;case $t.CANCELLED:return de.CANCELLED;case $t.UNKNOWN:return de.UNKNOWN;case $t.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case $t.INTERNAL:return de.INTERNAL;case $t.UNAVAILABLE:return de.UNAVAILABLE;case $t.UNAUTHENTICATED:return de.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case $t.NOT_FOUND:return de.NOT_FOUND;case $t.ALREADY_EXISTS:return de.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return de.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case $t.ABORTED:return de.ABORTED;case $t.OUT_OF_RANGE:return de.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return de.UNIMPLEMENTED;case $t.DATA_LOSS:return de.DATA_LOSS;default:return Ue(39323,{code:r})}}(at=$t||($t={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new Is([4294967295,4294967295],0);function V_(r){const e=A2().encode(r),n=new y2;return n.update(e),new Uint8Array(n.digest())}function L_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([n,s],0),new Is([o,l],0)]}class Dp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new nu(`Invalid padding: ${n}`);if(s<0)throw new nu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new nu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Is.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(Is.fromNumber(s)));return o.compare(oI)===1&&(o=new Is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=V_(e),[s,o]=L_(n);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);if(!this.be(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Dp(l,o,n);return s.forEach(c=>h.insert(c)),h}insert(e){if(this.pe===0)return;const n=V_(e),[s,o]=L_(n);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,s,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Xh(Be.min(),o,new xt(Ke),Mi(),tt())}}class Cu{constructor(e,n,s,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Cu(s,n,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class nE{constructor(e,n){this.targetId=e,this.Ce=n}}class rE{constructor(e,n,s=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class j_{constructor(){this.Fe=0,this.Me=U_(),this.xe=fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=tt(),n=tt(),s=tt();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ue(38017,{changeType:l})}}),new Cu(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=U_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class lI{constructor(e){this.ze=e,this.je=new Map,this.He=Mi(),this.Je=Jc(),this.Ye=Jc(),this.Ze=new xt(Ke)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const l=o.target;if(Hm(l))if(s===0){const h=new Ne(l.path);this.tt(n,h,En.newNoDocument(h,Be.min()))}else dt(s===1,20013,{expectedCount:s});else{const h=this.ut(n);if(h!==s){const c=this.ct(e),m=c?this.lt(c,e,h):1;if(m!==0){this.st(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=n;let h,c;try{h=Ms(s).toUint8Array()}catch(m){if(m instanceof x2)return Do("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{c=new Dp(h,o,l)}catch(m){return Do(m instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return c.pe===0?null:c}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(l=>{const h=this.ze.Pt(),c=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,l,null),o++)}),o}It(e){const n=new Map;this.je.forEach((l,h)=>{const c=this._t(h);if(c){if(l.current&&Hm(c.target)){const m=new Ne(c.target.path);this.Et(m).has(h)||this.dt(h,m)||this.tt(h,m,En.newNoDocument(m,e))}l.Le&&(n.set(h,l.qe()),l.Qe())}});let s=tt();this.Ye.forEach((l,h)=>{let c=!0;h.forEachWhile(m=>{const g=this._t(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Xh(e,n,this.Ze,this.He,s);return this.He=Mi(),this.Je=Jc(),this.Ye=Jc(),this.Ze=new xt(Ke),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new j_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Qt(Ke),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Qt(Ke),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new j_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Jc(){return new xt(Ne.comparator)}function U_(){return new xt(Ne.comparator)}const uI={asc:"ASCENDING",desc:"DESCENDING"},cI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hI={and:"AND",or:"OR"};class fI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gm(r,e){return r.useProto3Json||qh(e)?e:{value:e}}function Ih(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function dI(r,e){return Ih(r,e.toTimestamp())}function Zr(r){return dt(!!r,49232),Be.fromTimestamp(function(n){const s=ks(n);return new Yt(s.seconds,s.nanos)}(r))}function Op(r,e){return Km(r,e).canonicalString()}function Km(r,e){const n=function(o){return new Ct(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function sE(r){const e=Ct.fromString(r);return dt(cE(e),10190,{key:e.toString()}),e}function Ym(r,e){return Op(r.databaseId,e.path)}function Tm(r,e){const n=sE(e);if(n.get(1)!==r.databaseId.projectId)throw new De(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new De(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ne(oE(n))}function aE(r,e){return Op(r.databaseId,e)}function mI(r){const e=sE(r);return e.length===4?Ct.emptyPath():oE(e)}function Qm(r){return new Ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function oE(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function z_(r,e,n){return{name:Ym(r,e),fields:n.value.mapValue.fields}}function pI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ue(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(g,b){return g.useProto3Json?(dt(b===void 0||typeof b=="string",58123),fn.fromBase64String(b||"")):(dt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),fn.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,c=h&&function(g){const b=g.code===void 0?de.UNKNOWN:tE(g.code);return new De(b,g.message||"")}(h);n=new rE(s,o,l,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Tm(r,s.document.name),l=Zr(s.document.updateTime),h=s.document.createTime?Zr(s.document.createTime):Be.min(),c=new Vn({mapValue:{fields:s.document.fields}}),m=En.newFoundDocument(o,l,h,c),g=s.targetIds||[],b=s.removedTargetIds||[];n=new uh(g,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Tm(r,s.document),l=s.readTime?Zr(s.readTime):Be.min(),h=En.newNoDocument(o,l),c=s.removedTargetIds||[];n=new uh([],c,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Tm(r,s.document),l=s.removedTargetIds||[];n=new uh([],l,o,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new sI(o,l),c=s.targetId;n=new nE(c,h)}}return n}function gI(r,e){let n;if(e instanceof Ru)n={update:z_(r,e.key,e.value)};else if(e instanceof Ip)n={delete:Ym(r,e.key)};else if(e instanceof zs)n={update:z_(r,e.key,e.data),updateMask:AI(e.fieldMask)};else{if(!(e instanceof nI))return Ue(16599,{ft:e.type});n={verify:Ym(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const c=h.transform;if(c instanceof Rh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof yu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ch)return{fieldPath:h.field.canonicalString(),increment:c.Re};throw Ue(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:dI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ue(27497)}(r,e.precondition)),n}function yI(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map(n=>function(o,l){let h=o.updateTime?Zr(o.updateTime):Zr(l);return h.isEqual(Be.min())&&(h=Zr(l)),new JC(h,o.transformResults||[])}(n,e))):[]}function vI(r,e){return{documents:[aE(r,e.path)]}}function _I(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=aE(r,o);const l=function(g){if(g.length!==0)return uE(ni.create(g,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const h=function(g){if(g.length!==0)return g.map(b=>function(y){return{field:Eo(y.field),direction:wI(y.dir)}}(b))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const c=Gm(r,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:o}}function bI(r){let e=mI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){dt(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let l=[];n.where&&(l=function(d){const y=lE(d);return y instanceof ni&&U2(y)?y.getFilters():[y]}(n.where));let h=[];n.orderBy&&(h=function(d){return d.map(y=>function(v){return new Ah(wo(v.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(d){let y;return y=typeof d=="object"?d.value:d,qh(y)?null:y}(n.limit));let m=null;n.startAt&&(m=function(d){const y=!!d.before,_=d.values||[];return new Sh(_,y)}(n.startAt));let g=null;return n.endAt&&(g=function(d){const y=!d.before,_=d.values||[];return new Sh(_,y)}(n.endAt)),UC(e,o,h,l,c,"F",m,g)}function EI(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=wo(n.unaryFilter.field);return Kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(n.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(n.unaryFilter.field);return Kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(n.unaryFilter.field);return Kt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(r):r.fieldFilter!==void 0?function(n){return Kt.create(wo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(s=>lE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(n.compositeFilter.op))}(r):Ue(30097,{filter:r})}function wI(r){return uI[r]}function TI(r){return cI[r]}function SI(r){return hI[r]}function Eo(r){return{fieldPath:r.canonicalString()}}function wo(r){return hn.fromServerFormat(r.fieldPath)}function uE(r){return r instanceof Kt?function(n){if(n.op==="=="){if(C_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NAN"}};if(R_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NAN"}};if(R_(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(n.field),op:TI(n.op),value:n.value}}}(r):r instanceof ni?function(n){const s=n.getFilters().map(o=>uE(o));return s.length===1?s[0]:{compositeFilter:{op:SI(n.op),filters:s}}}(r):Ue(54877,{filter:r})}function AI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,s,o,l=Be.min(),h=Be.min(),c=fn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=c,this.expectedCount=m}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.wt=e}}function CI(r){const e=bI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.yn=new xI}addToCollectionParentIndex(e,n){return this.yn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Ns.min())}updateCollectionGroup(e,n,s){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class xI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Qt(Ct.comparator),l=!o.has(s);return this.index[n]=o.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Qt(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hE=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(hE,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Mo(0)}static ir(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="LruGarbageCollector",DI=1048576;function q_([r,e],[n,s]){const o=Ke(r,n);return o===0?Ke(e,s):o}class OI{constructor(e){this.cr=e,this.buffer=new Qt(q_),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();q_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){be(B_,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$o(n)?be(B_,"Ignoring IndexedDB error during garbage collection: ",n):await zo(n)}await this.Ir(3e5)})}}class kI{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Bh.le);const s=new OI(n);return this.Er.forEachTarget(e,o=>s.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>s.Pr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Er.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve($_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$_):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let s,o,l,h,c,m,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),o=this.params.maximumSequenceNumbersToCollect):o=d,h=Date.now(),this.nthSequenceNumber(e,o))).next(d=>(s=d,c=Date.now(),this.removeTargets(e,s,n))).next(d=>(l=d,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(g=Date.now(),_o()<=et.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(c-h)+`ms
	Removed ${l} targets in `+(m-c)+`ms
	Removed ${d} documents in `+(g-m)+`ms
Total Duration: ${g-b}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:d})))}}function MI(r,e){return new kI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?fe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&ou(s.mutation,o,Xn.empty(),Yt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,tt()).next(()=>s))}getLocalViewOfDocuments(e,n,s=tt()){const o=ba();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(l=>{let h=tu();return l.forEach((c,m)=>{h=h.insert(c,m.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=ba();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,tt()))}populateOverlays(e,n,s){const o=[];return s.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,c)=>{n.set(h,c)})})}computeViews(e,n,s,o){let l=Mi();const h=au(),c=function(){return au()}();return n.forEach((m,g)=>{const b=s.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof zs)?l=l.insert(g.key,g):b!==void 0?(h.set(g.key,b.mutation.getFieldMask()),ou(b.mutation,g,b.mutation.getFieldMask(),Yt.now())):h.set(g.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,b)=>h.set(g,b)),n.forEach((g,b)=>{var d;return c.set(g,new VI(b,(d=h.get(g))!==null&&d!==void 0?d:null))}),c))}recalculateAndSaveOverlays(e,n){const s=au();let o=new xt((h,c)=>h-c),l=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const c of h)c.keys().forEach(m=>{const g=n.get(m);if(g===null)return;let b=s.get(m)||Xn.empty();b=c.applyToLocalView(g,b),s.set(m,b);const d=(o.get(c.batchId)||tt()).add(m);o=o.insert(c.batchId,d)})}).next(()=>{const h=[],c=o.getReverseIterator();for(;c.hasNext();){const m=c.getNext(),g=m.key,b=m.value,d=K2();b.forEach(y=>{if(!l.has(y)){const _=J2(n.get(y),s.get(y));_!==null&&d.set(y,_),l=l.add(y)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,d))}return fe.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(h){return Ne.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-l.size):fe.resolve(ba());let c=du,m=l;return h.next(g=>fe.forEach(g,(b,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),l.get(b)?fe.resolve():this.remoteDocumentCache.getEntry(e,b).next(y=>{m=m.insert(b,y)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,tt())).next(b=>({batchId:c,changes:G2(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(s=>{let o=tu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const l=n.collectionGroup;let h=tu();return this.indexManager.getCollectionParents(e,l).next(c=>fe.forEach(c,m=>{const g=function(d,y){return new Fh(y,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(b=>{b.forEach((d,y)=>{h=h.insert(d,y)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,o))).next(h=>{l.forEach((m,g)=>{const b=g.getKey();h.get(b)===null&&(h=h.insert(b,En.newInvalidDocument(b)))});let c=tu();return h.forEach((m,g)=>{const b=l.get(m);b!==void 0&&ou(b.mutation,g,Xn.empty(),Yt.now()),Kh(n,g)&&(c=c.insert(m,g))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Zr(o.createTime)}}(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(o){return{name:o.name,query:CI(o.bundledQuery),readTime:Zr(o.readTime)}}(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.overlays=new xt(Ne.comparator),this.Or=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ba();return fe.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,l)=>{this.St(e,n,l)}),fe.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Or.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(s)),fe.resolve()}getOverlaysForCollection(e,n,s){const o=ba(),l=n.length+1,h=new Ne(n.child("")),c=this.overlays.getIteratorFrom(h);for(;c.hasNext();){const m=c.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let l=new xt((g,b)=>g-b);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let b=l.get(g.largestBatchId);b===null&&(b=ba(),l=l.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const c=ba(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,b)=>c.set(g,b)),!(c.size()>=o)););return fe.resolve(c)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Or.get(o.largestBatchId).delete(s.key);this.Or.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new iI(n,s));let l=this.Or.get(n);l===void 0&&(l=tt(),this.Or.set(n,l)),this.Or.set(n,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.Nr=new Qt(tn.Br),this.Lr=new Qt(tn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const s=new tn(e,n);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Qr(new tn(e,n))}$r(e,n){e.forEach(s=>this.removeReference(s,n))}Ur(e){const n=new Ne(new Ct([])),s=new tn(n,e),o=new tn(n,e+1),l=[];return this.Lr.forEachInRange([s,o],h=>{this.Qr(h),l.push(h.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new Ne(new Ct([])),s=new tn(n,e),o=new tn(n,e+1);let l=tt();return this.Lr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const n=new tn(e,0),s=this.Nr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class tn{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return Ne.comparator(e.key,n.key)||Ke(e.Gr,n.Gr)}static kr(e,n){return Ke(e.Gr,n.Gr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Qt(tn.Br)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new rI(l,n,s,o);this.mutationQueue.push(h);for(const c of o)this.zr=this.zr.add(new tn(c.key,l)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return fe.resolve(h)}lookupMutationBatch(e,n){return fe.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Hr(s),l=o<0?0:o;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Ep:this.Jn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new tn(n,0),o=new tn(n,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([s,o],h=>{const c=this.jr(h.Gr);l.push(c)}),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Qt(Ke);return n.forEach(o=>{const l=new tn(o,0),h=new tn(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,h],c=>{s=s.add(c.Gr)})}),fe.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let l=s;Ne.isDocumentKey(l)||(l=l.child(""));const h=new tn(new Ne(l),0);let c=new Qt(Ke);return this.zr.forEachWhile(m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(c=c.add(m.Gr)),!0)},h),fe.resolve(this.Jr(c))}Jr(e){const n=[];return e.forEach(s=>{const o=this.jr(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){dt(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return fe.forEach(n.mutations,o=>{const l=new tn(o.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=s})}Xn(e){}containsKey(e,n){const s=new tn(n,0),o=this.zr.firstAfterOrEqual(s);return fe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.Zr=e,this.docs=function(){return new xt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),l=o?o.size:0,h=this.Zr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return fe.resolve(s?s.document.mutableCopy():En.newInvalidDocument(n))}getEntries(e,n){let s=Mi();return n.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():En.newInvalidDocument(o))}),fe.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let l=Mi();const h=n.path,c=new Ne(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(c);for(;m.hasNext();){const{key:g,value:{document:b}}=m.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||yC(gC(b),s)<=0||(o.has(b.key)||Kh(n,b))&&(l=l.insert(b.key,b.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,n,s,o){Ue(9500)}Xr(e,n){return fe.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new qI(this)}getSize(e){return fe.resolve(this.size)}}class qI extends PI{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.vr.addEntry(e,o)):this.vr.removeEntry(s)}),fe.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.persistence=e,this.ei=new Ia(n=>Sp(n),Ap),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.ti=0,this.ni=new Np,this.targetCount=0,this.ri=Mo.rr()}forEachTarget(e,n){return this.ei.forEach((s,o)=>n(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ti&&(this.ti=n),fe.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Mo(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.ar(n),fe.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,s){let o=0;const l=[];return this.ei.forEach((h,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.ei.delete(h),l.push(this.removeMatchingKeysForTargetId(e,c.targetId)),o++)}),fe.waitFor(l).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const s=this.ei.get(n)||null;return fe.resolve(s)}addMatchingKeys(e,n,s){return this.ni.qr(n,s),fe.resolve()}removeMatchingKeys(e,n,s){this.ni.$r(n,s);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),fe.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ni.Wr(n);return fe.resolve(s)}containsKey(e,n){return fe.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.ii={},this.overlays={},this.si=new Bh(0),this.oi=!1,this.oi=!0,this._i=new zI,this.referenceDelegate=e(this),this.ai=new HI(this),this.indexManager=new II,this.remoteDocumentCache=function(o){return new BI(o)}(s=>this.referenceDelegate.ui(s)),this.serializer=new RI(n),this.ci=new jI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ii[e.toKey()];return s||(s=new $I(n,this.referenceDelegate),this.ii[e.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,s){be("MemoryPersistence","Starting transaction:",e);const o=new FI(this.si.next());return this.referenceDelegate.li(),s(o).next(l=>this.referenceDelegate.hi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Pi(e,n){return fe.or(Object.values(this.ii).map(s=>()=>s.containsKey(e,n)))}}class FI extends _C{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.Ti=new Np,this.Ii=null}static Ei(e){return new kp(e)}get di(){if(this.Ii)return this.Ii;throw Ue(60996)}addReference(e,n,s){return this.Ti.addReference(s,n),this.di.delete(s.toString()),fe.resolve()}removeReference(e,n,s){return this.Ti.removeReference(s,n),this.di.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(o=>this.di.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.di.add(l.toString()))}).next(()=>s.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,s=>{const o=Ne.fromPath(s);return this.Ai(e,o).next(l=>{l||n.removeEntry(o,Be.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return fe.or([()=>fe.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.Ri=new Ia(s=>wC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=MI(this,n)}static Ei(e,n){return new xh(e,n)}li(){}hi(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}Vr(e){let n=0;return this.Ar(e,s=>{n++}).next(()=>n)}Ar(e,n){return fe.forEach(this.Ri,(s,o)=>this.gr(e,s,o).next(l=>l?fe.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Xr(e,h=>this.gr(e,h,n).next(c=>{c||(s++,l.removeEntry(h,Be.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.Ri.set(s,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,s){return this.Ri.set(s,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),fe.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}gr(e,n,s){return fe.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.Ri.get(n);return fe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ls=s,this.hs=o}static Ps(e,n){let s=tt(),o=tt();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return BA()?8:bC(wn())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,s,o){const l={result:null};return this.Rs(e,n).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Vs(e,n,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new GI;return this.fs(e,n,h).next(c=>{if(l.result=c,this.Is)return this.gs(e,n,h,c.size)})}).next(()=>l.result)}gs(e,n,s,o){return s.documentReadCount<this.Es?(_o()<=et.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),fe.resolve()):(_o()<=et.DEBUG&&be("QueryEngine","Query:",bo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(_o()<=et.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(n))):fe.resolve())}Rs(e,n){if(O_(n))return fe.resolve(null);let s=Wr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Fm(n,null,"F"),s=Wr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=tt(...l);return this.As.getDocuments(e,h).next(c=>this.indexManager.getMinOffset(e,s).next(m=>{const g=this.ps(n,c);return this.ys(n,g,h,m.readTime)?this.Rs(e,Fm(n,null,"F")):this.ws(e,g,n,m)}))})))}Vs(e,n,s,o){return O_(n)||o.isEqual(Be.min())?fe.resolve(null):this.As.getDocuments(e,s).next(l=>{const h=this.ps(n,l);return this.ys(n,h,s,o)?fe.resolve(null):(_o()<=et.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(n)),this.ws(e,h,n,pC(o,du)).next(c=>c))})}ps(e,n){let s=new Qt(H2(e));return n.forEach((o,l)=>{Kh(e,l)&&(s=s.add(l))}),s}ys(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}fs(e,n,s){return _o()<=et.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",bo(n)),this.As.getDocumentsMatchingQuery(e,n,Ns.min(),s)}ws(e,n,s,o){return this.As.getDocumentsMatchingQuery(e,s,o).next(l=>(n.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="LocalStore",YI=3e8;class QI{constructor(e,n,s,o){this.persistence=e,this.bs=n,this.serializer=o,this.Ss=new xt(Ke),this.Ds=new Ia(l=>Sp(l),Ap),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(s)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LI(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function XI(r,e,n,s){return new QI(r,e,n,s)}async function dE(r,e){const n=qe(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,n.Fs(e),n.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],c=[];let m=tt();for(const g of o){h.push(g.batchId);for(const b of g.mutations)m=m.add(b.key)}for(const g of l){c.push(g.batchId);for(const b of g.mutations)m=m.add(b.key)}return n.localDocuments.getDocuments(s,m).next(g=>({Ms:g,removedBatchIds:h,addedBatchIds:c}))})})}function WI(r,e){const n=qe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=n.Cs.newChangeBuffer({trackRemovals:!0});return function(c,m,g,b){const d=g.batch,y=d.keys();let _=fe.resolve();return y.forEach(v=>{_=_.next(()=>b.getEntry(m,v)).next(E=>{const R=g.docVersions.get(v);dt(R!==null,48541),E.version.compareTo(R)<0&&(d.applyToRemoteDocument(E,g),E.isValidDocument()&&(E.setReadTime(g.commitVersion),b.addEntry(E)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(m,d))}(n,s,e,l).next(()=>l.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let m=tt();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(m=m.add(c.batch.mutations[g].key));return m}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function mE(r){const e=qe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function ZI(r,e){const n=qe(r),s=e.snapshotVersion;let o=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=n.Cs.newChangeBuffer({trackRemovals:!0});o=n.Ss;const c=[];e.targetChanges.forEach((b,d)=>{const y=o.get(d);if(!y)return;c.push(n.ai.removeMatchingKeys(l,b.removedDocuments,d).next(()=>n.ai.addMatchingKeys(l,b.addedDocuments,d)));let _=y.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(fn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):b.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(b.resumeToken,s)),o=o.insert(d,_),function(E,R,w){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=YI?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(y,_,b)&&c.push(n.ai.updateTargetData(l,_))});let m=Mi(),g=tt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(l,b))}),c.push(JI(l,h,e.documentUpdates).next(b=>{m=b.xs,g=b.Os})),!s.isEqual(Be.min())){const b=n.ai.getLastRemoteSnapshotVersion(l).next(d=>n.ai.setTargetsMetadata(l,l.currentSequenceNumber,s));c.push(b)}return fe.waitFor(c).next(()=>h.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(n.Ss=o,l))}function JI(r,e,n){let s=tt(),o=tt();return n.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Mi();return n.forEach((c,m)=>{const g=l.get(c);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(c)),m.isNoDocument()&&m.version.isEqual(Be.min())?(e.removeEntry(c,m.readTime),h=h.insert(c,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),h=h.insert(c,m)):be(Pp,"Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",m.version)}),{xs:h,Os:o}})}function ex(r,e){const n=qe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ep),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function tx(r,e){const n=qe(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.ai.getTargetData(s,e).next(l=>l?(o=l,fe.resolve(o)):n.ai.allocateTargetId(s).next(h=>(o=new Ts(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.ai.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ss.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(s.targetId,s),n.Ds.set(e,s.targetId)),s})}async function Xm(r,e,n){const s=qe(r),o=s.Ss.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!$o(h))throw h;be(Pp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ss=s.Ss.remove(e),s.Ds.delete(o.target)}function H_(r,e,n){const s=qe(r);let o=Be.min(),l=tt();return s.persistence.runTransaction("Execute query","readwrite",h=>function(m,g,b){const d=qe(m),y=d.Ds.get(b);return y!==void 0?fe.resolve(d.Ss.get(y)):d.ai.getTargetData(g,b)}(s,h,Wr(e)).next(c=>{if(c)return o=c.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(h,c.targetId).next(m=>{l=m})}).next(()=>s.bs.getDocumentsMatchingQuery(h,e,n?o:Be.min(),n?l:tt())).next(c=>(nx(s,BC(e),c),{documents:c,Ns:l})))}function nx(r,e,n){let s=r.vs.get(e)||Be.min();n.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.vs.set(e,s)}class F_{constructor(){this.activeTargetIds=YC()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rx{constructor(){this.So=new F_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,s){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new F_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="ConnectivityMonitor";class K_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){be(G_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){be(G_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh=null;function Wm(){return eh===null?eh=function(){return 268435456+Math.round(2147483648*Math.random())}():eh++,"0x"+eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",sx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ax{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${s}/databases/${o}`,this.qo=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Qo(e,n,s,o,l){const h=Wm(),c=this.$o(e,n.toUriEncodedString());be(Sm,`Sending RPC '${e}' ${h}:`,c,s);const m={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(m,o,l),this.Ko(e,c,m,s).then(g=>(be(Sm,`Received RPC '${e}' ${h}: `,g),g),g=>{throw Do(Sm,`RPC '${e}' ${h} failed with error: `,g,"url: ",c,"request:",s),g})}Wo(e,n,s,o,l,h){return this.Qo(e,n,s,o,l)}Uo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}$o(e,n){const s=sx[e];return`${this.Lo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class lx extends ax{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,s,o){const l=Wm();return new Promise((h,c)=>{const m=new v2;m.setWithCredentials(!0),m.listenOnce(_2.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case sh.NO_ERROR:const b=m.getResponseJson();be(vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),h(b);break;case sh.TIMEOUT:be(vn,`RPC '${e}' ${l} timed out`),c(new De(de.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const d=m.getStatus();if(be(vn,`RPC '${e}' ${l} failed with status:`,d,"response text:",m.getResponseText()),d>0){let y=m.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const v=function(R){const w=R.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(w)>=0?w:de.UNKNOWN}(_.status);c(new De(v,_.message))}else c(new De(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else c(new De(de.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{s_:e,streamId:l,o_:m.getLastErrorCode(),__:m.getLastError()})}}finally{be(vn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(o);be(vn,`RPC '${e}' ${l} sending request:`,o),m.send(n,"POST",g,s,15)})}a_(e,n,s){const o=Wm(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=w2(),c=E2(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Uo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const b=l.join("");be(vn,`Creating RPC '${e}' stream ${o}: ${b}`,m);const d=h.createWebChannel(b,m);let y=!1,_=!1;const v=new ox({Go:R=>{_?be(vn,`Not sending because RPC '${e}' stream ${o} is closed:`,R):(y||(be(vn,`Opening RPC '${e}' stream ${o} transport.`),d.open(),y=!0),be(vn,`RPC '${e}' stream ${o} sending:`,R),d.send(R))},zo:()=>d.close()}),E=(R,w,A)=>{R.listen(w,x=>{try{A(x)}catch(M){setTimeout(()=>{throw M},0)}})};return E(d,eu.EventType.OPEN,()=>{_||(be(vn,`RPC '${e}' stream ${o} transport opened.`),v.t_())}),E(d,eu.EventType.CLOSE,()=>{_||(_=!0,be(vn,`RPC '${e}' stream ${o} transport closed`),v.r_())}),E(d,eu.EventType.ERROR,R=>{_||(_=!0,Do(vn,`RPC '${e}' stream ${o} transport errored. Name:`,R.name,"Message:",R.message),v.r_(new De(de.UNAVAILABLE,"The operation could not be completed")))}),E(d,eu.EventType.MESSAGE,R=>{var w;if(!_){const A=R.data[0];dt(!!A,16349);const x=A,M=(x==null?void 0:x.error)||((w=x[0])===null||w===void 0?void 0:w.error);if(M){be(vn,`RPC '${e}' stream ${o} received error:`,M);const V=M.status;let P=function(C){const D=$t[C];if(D!==void 0)return tE(D)}(V),O=M.message;P===void 0&&(P=de.INTERNAL,O="Unknown error status: "+V+" with message "+M.message),_=!0,v.r_(new De(P,O)),d.close()}else be(vn,`RPC '${e}' stream ${o} received:`,A),v.i_(A)}}),E(c,b2.STAT_EVENT,R=>{R.stat===Um.PROXY?be(vn,`RPC '${e}' stream ${o} detected buffering proxy`):R.stat===Um.NOPROXY&&be(vn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{v.n_()},0),v}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(r){return new fI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,s=1e3,o=1.5,l=6e4){this.bi=e,this.timerId=n,this.u_=s,this.c_=o,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),o=Math.max(0,n-s);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="PersistentStream";class gE{constructor(e,n,s,o,l,h,c,m){this.bi=e,this.R_=s,this.V_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=c,this.listener=m,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new pE(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.m_===n&&this.B_(s,o)},s=>{e(()=>{const o=new De(de.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(o)})})}B_(e,n){const s=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{s(()=>this.L_(o))}),this.stream.onMessage(o=>{s(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return be(Y_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(be(Y_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ux extends gE{constructor(e,n,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=l}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=pI(this.serializer,e),s=function(l){if(!("targetChange"in l))return Be.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Be.min():h.readTime?Zr(h.readTime):Be.min()}(e);return this.listener.Q_(n,s)}U_(e){const n={};n.database=Qm(this.serializer),n.addTarget=function(l,h){let c;const m=h.target;if(c=Hm(m)?{documents:vI(l,m)}:{query:_I(l,m).gt},c.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){c.resumeToken=iE(l,h.resumeToken);const g=Gm(l,h.expectedCount);g!==null&&(c.expectedCount=g)}else if(h.snapshotVersion.compareTo(Be.min())>0){c.readTime=Ih(l,h.snapshotVersion.toTimestamp());const g=Gm(l,h.expectedCount);g!==null&&(c.expectedCount=g)}return c}(this.serializer,e);const s=EI(this.serializer,e);s&&(n.labels=s),this.F_(n)}K_(e){const n={};n.database=Qm(this.serializer),n.removeTarget=e,this.F_(n)}}class cx extends gE{constructor(e,n,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=yI(e.writeResults,e.commitTime),s=Zr(e.commitTime);return this.listener.j_(s,n)}H_(){const e={};e.database=Qm(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>gI(this.serializer,s))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{}class fx extends hx{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new De(de.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,s,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Qo(e,Km(n,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new De(de.UNKNOWN,l.toString())})}Wo(e,n,s,o,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,c])=>this.connection.Wo(e,Km(n,s),o,h,c,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new De(de.UNKNOWN,h.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class dx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ki(n),this.ea=!1):be("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class mx{constructor(e,n,s,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(h=>{s.enqueueAndForget(async()=>{xa(this)&&(be(Sa,"Restarting streams for network reachability change."),await async function(m){const g=qe(m);g.aa.add(4),await Iu(g),g.la.set("Unknown"),g.aa.delete(4),await Zh(g)}(this))})}),this.la=new dx(s,o)}}async function Zh(r){if(xa(r))for(const e of r.ua)await e(!0)}async function Iu(r){for(const e of r.ua)await e(!1)}function yE(r,e){const n=qe(r);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Up(n)?jp(n):Bo(n).b_()&&Lp(n,e))}function Vp(r,e){const n=qe(r),s=Bo(n);n._a.delete(e),s.b_()&&vE(n,e),n._a.size===0&&(s.b_()?s.v_():xa(n)&&n.la.set("Unknown"))}function Lp(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bo(r).U_(e)}function vE(r,e){r.ha.Ke(e),Bo(r).K_(e)}function jp(r){r.ha=new lI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Bo(r).start(),r.la.ta()}function Up(r){return xa(r)&&!Bo(r).w_()&&r._a.size>0}function xa(r){return qe(r).aa.size===0}function _E(r){r.ha=void 0}async function px(r){r.la.set("Online")}async function gx(r){r._a.forEach((e,n)=>{Lp(r,e)})}async function yx(r,e){_E(r),Up(r)?(r.la.ia(e),jp(r)):r.la.set("Unknown")}async function vx(r,e,n){if(r.la.set("Online"),e instanceof rE&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const c of l.targetIds)o._a.has(c)&&(await o.remoteSyncer.rejectListen(c,h),o._a.delete(c),o.ha.removeTarget(c))}(r,e)}catch(s){be(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dh(r,s)}else if(e instanceof uh?r.ha.Xe(e):e instanceof nE?r.ha.ot(e):r.ha.nt(e),!n.isEqual(Be.min()))try{const s=await mE(r.localStore);n.compareTo(s)>=0&&await function(l,h){const c=l.ha.It(h);return c.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const b=l._a.get(g);b&&l._a.set(g,b.withResumeToken(m.resumeToken,h))}}),c.targetMismatches.forEach((m,g)=>{const b=l._a.get(m);if(!b)return;l._a.set(m,b.withResumeToken(fn.EMPTY_BYTE_STRING,b.snapshotVersion)),vE(l,m);const d=new Ts(b.target,m,g,b.sequenceNumber);Lp(l,d)}),l.remoteSyncer.applyRemoteEvent(c)}(r,n)}catch(s){be(Sa,"Failed to raise snapshot:",s),await Dh(r,s)}}async function Dh(r,e,n){if(!$o(e))throw e;r.aa.add(1),await Iu(r),r.la.set("Offline"),n||(n=()=>mE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{be(Sa,"Retrying IndexedDB access"),await n(),r.aa.delete(1),await Zh(r)})}function bE(r,e){return e().catch(n=>Dh(r,n,e))}async function Jh(r){const e=qe(r),n=Vs(e);let s=e.oa.length>0?e.oa[e.oa.length-1].batchId:Ep;for(;_x(e);)try{const o=await ex(e.localStore,s);if(o===null){e.oa.length===0&&n.v_();break}s=o.batchId,bx(e,o)}catch(o){await Dh(e,o)}EE(e)&&wE(e)}function _x(r){return xa(r)&&r.oa.length<10}function bx(r,e){r.oa.push(e);const n=Vs(r);n.b_()&&n.W_&&n.G_(e.mutations)}function EE(r){return xa(r)&&!Vs(r).w_()&&r.oa.length>0}function wE(r){Vs(r).start()}async function Ex(r){Vs(r).H_()}async function wx(r){const e=Vs(r);for(const n of r.oa)e.G_(n.mutations)}async function Tx(r,e,n){const s=r.oa.shift(),o=xp.from(s,e,n);await bE(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Jh(r)}async function Sx(r,e){e&&Vs(r).W_&&await async function(s,o){if(function(h){return aI(h)&&h!==de.ABORTED}(o.code)){const l=s.oa.shift();Vs(s).D_(),await bE(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Jh(s)}}(r,e),EE(r)&&wE(r)}async function Q_(r,e){const n=qe(r);n.asyncQueue.verifyOperationInProgress(),be(Sa,"RemoteStore received new credentials");const s=xa(n);n.aa.add(3),await Iu(n),s&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Zh(n)}async function Ax(r,e){const n=qe(r);e?(n.aa.delete(2),await Zh(n)):e||(n.aa.add(2),await Iu(n),n.la.set("Unknown"))}function Bo(r){return r.Pa||(r.Pa=function(n,s,o){const l=qe(n);return l.Y_(),new ux(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{jo:px.bind(null,r),Jo:gx.bind(null,r),Zo:yx.bind(null,r),Q_:vx.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),Up(r)?jp(r):r.la.set("Unknown")):(await r.Pa.stop(),_E(r))})),r.Pa}function Vs(r){return r.Ta||(r.Ta=function(n,s,o){const l=qe(n);return l.Y_(),new cx(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:Ex.bind(null,r),Zo:Sx.bind(null,r),z_:wx.bind(null,r),j_:Tx.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await Jh(r)):(await r.Ta.stop(),r.oa.length>0&&(be(Sa,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,l){const h=Date.now()+s,c=new zp(e,n,h,o,l);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $p(r,e){if(ki("AsyncQueue",`${e}: ${r}`),$o(r))return new De(de.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ne.comparator(n.key,s.key):(n,s)=>Ne.comparator(n.key,s.key),this.keyedMap=tu(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.Ia=new xt(Ne.comparator)}track(e){const n=e.doc.key,s=this.Ia.get(n);s?e.type!==0&&s.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&s.type!==1?this.Ia=this.Ia.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Ia=this.Ia.remove(n):e.type===1&&s.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):Ue(63341,{Vt:e,Ea:s}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,s)=>{e.push(s)}),e}}class Po{constructor(e,n,s,o,l,h,c,m,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=c,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,l){const h=[];return n.forEach(c=>{h.push({type:0,doc:c})}),new Po(e,n,Ao.emptySet(n),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Cx{constructor(){this.queries=W_(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,s){const o=qe(n),l=o.queries;o.queries=W_(),l.forEach((h,c)=>{for(const m of c.Ra)m.onError(s)})})(this,new De(de.ABORTED,"Firestore shutting down"))}}function W_(){return new Ia(r=>q2(r),Gh)}async function TE(r,e){const n=qe(r);let s=3;const o=e.query;let l=n.queries.get(o);l?!l.Va()&&e.ma()&&(s=2):(l=new Rx,s=e.ma()?0:1);try{switch(s){case 0:l.Aa=await n.onListen(o,!0);break;case 1:l.Aa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const c=$p(h,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(c)}n.queries.set(o,l),l.Ra.push(e),e.ga(n.onlineState),l.Aa&&e.pa(l.Aa)&&Bp(n)}async function SE(r,e){const n=qe(r),s=e.query;let o=3;const l=n.queries.get(s);if(l){const h=l.Ra.indexOf(e);h>=0&&(l.Ra.splice(h,1),l.Ra.length===0?o=e.ma()?0:1:!l.Va()&&e.ma()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Ix(r,e){const n=qe(r);let s=!1;for(const o of e){const l=o.query,h=n.queries.get(l);if(h){for(const c of h.Ra)c.pa(o)&&(s=!0);h.Aa=o}}s&&Bp(n)}function xx(r,e,n){const s=qe(r),o=s.queries.get(e);if(o)for(const l of o.Ra)l.onError(n);s.queries.delete(e)}function Bp(r){r.fa.forEach(e=>{e.next()})}var Zm,Z_;(Z_=Zm||(Zm={})).ya="default",Z_.Cache="cache";class AE{constructor(e,n,s){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const s=n!=="Offline";return(!this.options.Fa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.key=e}}class CE{constructor(e){this.key=e}}class Dx{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=tt(),this.mutatedKeys=tt(),this.Ua=H2(e),this.Ka=new Ao(this.Ua)}get Wa(){return this.qa}Ga(e,n){const s=n?n.za:new X_,o=n?n.Ka:this.Ka;let l=n?n.mutatedKeys:this.mutatedKeys,h=o,c=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,d)=>{const y=o.get(b),_=Kh(this.query,d)?d:null,v=!!y&&this.mutatedKeys.has(y.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let R=!1;y&&_?y.data.isEqual(_.data)?v!==E&&(s.track({type:3,doc:_}),R=!0):this.ja(y,_)||(s.track({type:2,doc:_}),R=!0,(m&&this.Ua(_,m)>0||g&&this.Ua(_,g)<0)&&(c=!0)):!y&&_?(s.track({type:0,doc:_}),R=!0):y&&!_&&(s.track({type:1,doc:y}),R=!0,(m||g)&&(c=!0)),R&&(_?(h=h.add(_),l=E?l.add(b):l.delete(b)):(h=h.delete(b),l=l.delete(b)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{Ka:h,za:s,ys:c,mutatedKeys:l}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const h=e.za.da();h.sort((b,d)=>function(_,v){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:R})}};return E(_)-E(v)}(b.type,d.type)||this.Ua(b.doc,d.doc)),this.Ha(s),o=o!=null&&o;const c=n&&!o?this.Ja():[],m=this.$a.size===0&&this.current&&!o?1:0,g=m!==this.Qa;return this.Qa=m,h.length!==0||g?{snapshot:new Po(this.query,e.Ka,l,h,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new X_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=tt(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const n=[];return e.forEach(s=>{this.$a.has(s)||n.push(new CE(s))}),this.$a.forEach(s=>{e.has(s)||n.push(new RE(s))}),n}Xa(e){this.qa=e.Ns,this.$a=tt();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Po.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const qp="SyncEngine";class Ox{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Nx{constructor(e){this.key=e,this.tu=!1}}class kx{constructor(e,n,s,o,l,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.nu={},this.ru=new Ia(c=>q2(c),Gh),this.iu=new Map,this.su=new Set,this.ou=new xt(Ne.comparator),this._u=new Map,this.au=new Np,this.uu={},this.cu=new Map,this.lu=Mo.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function Mx(r,e,n=!0){const s=kE(r);let o;const l=s.ru.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.eu()):o=await IE(s,e,n,!0),o}async function Px(r,e){const n=kE(r);await IE(n,e,!0,!1)}async function IE(r,e,n,s){const o=await tx(r.localStore,Wr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,n);let c;return s&&(c=await Vx(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&yE(r.remoteStore,o),c}async function Vx(r,e,n,s,o){r.Pu=(d,y,_)=>async function(E,R,w,A){let x=R.view.Ga(w);x.ys&&(x=await H_(E.localStore,R.query,!1).then(({documents:O})=>R.view.Ga(O,x)));const M=A&&A.targetChanges.get(R.targetId),V=A&&A.targetMismatches.get(R.targetId)!=null,P=R.view.applyChanges(x,E.isPrimaryClient,M,V);return eb(E,R.targetId,P.Ya),P.snapshot}(r,d,y,_);const l=await H_(r.localStore,e,!0),h=new Dx(e,l.Ns),c=h.Ga(l.documents),m=Cu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=h.applyChanges(c,r.isPrimaryClient,m);eb(r,n,g.Ya);const b=new Ox(e,n,h);return r.ru.set(e,b),r.iu.has(n)?r.iu.get(n).push(e):r.iu.set(n,[e]),g.snapshot}async function Lx(r,e,n){const s=qe(r),o=s.ru.get(e),l=s.iu.get(o.targetId);if(l.length>1)return s.iu.set(o.targetId,l.filter(h=>!Gh(h,e))),void s.ru.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Xm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Vp(s.remoteStore,o.targetId),Jm(s,o.targetId)}).catch(zo)):(Jm(s,o.targetId),await Xm(s.localStore,o.targetId,!0))}async function jx(r,e){const n=qe(r),s=n.ru.get(e),o=n.iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Vp(n.remoteStore,s.targetId))}async function Ux(r,e,n){const s=Gx(r);try{const o=await function(h,c){const m=qe(h),g=Yt.now(),b=c.reduce((_,v)=>_.add(v.key),tt());let d,y;return m.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=Mi(),E=tt();return m.Cs.getEntries(_,b).next(R=>{v=R,v.forEach((w,A)=>{A.isValidDocument()||(E=E.add(w))})}).next(()=>m.localDocuments.getOverlayedDocuments(_,v)).next(R=>{d=R;const w=[];for(const A of c){const x=tI(A,d.get(A.key).overlayedDocument);x!=null&&w.push(new zs(A.key,x,V2(x.value.mapValue),Rr.exists(!0)))}return m.mutationQueue.addMutationBatch(_,g,w,c)}).next(R=>{y=R;const w=R.applyToLocalDocumentSet(d,E);return m.documentOverlayCache.saveOverlays(_,R.batchId,w)})}).then(()=>({batchId:y.batchId,changes:G2(d)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,c,m){let g=h.uu[h.currentUser.toKey()];g||(g=new xt(Ke)),g=g.insert(c,m),h.uu[h.currentUser.toKey()]=g}(s,o.batchId,n),await xu(s,o.changes),await Jh(s.remoteStore)}catch(o){const l=$p(o,"Failed to persist write");n.reject(l)}}async function xE(r,e){const n=qe(r);try{const s=await ZI(n.localStore,e);e.targetChanges.forEach((o,l)=>{const h=n._u.get(l);h&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.tu=!0:o.modifiedDocuments.size>0?dt(h.tu,14607):o.removedDocuments.size>0&&(dt(h.tu,42227),h.tu=!1))}),await xu(n,s,e)}catch(s){await zo(s)}}function J_(r,e,n){const s=qe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ru.forEach((l,h)=>{const c=h.view.ga(e);c.snapshot&&o.push(c.snapshot)}),function(h,c){const m=qe(h);m.onlineState=c;let g=!1;m.queries.forEach((b,d)=>{for(const y of d.Ra)y.ga(c)&&(g=!0)}),g&&Bp(m)}(s.eventManager,e),o.length&&s.nu.Q_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function zx(r,e,n){const s=qe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s._u.get(e),l=o&&o.key;if(l){let h=new xt(Ne.comparator);h=h.insert(l,En.newNoDocument(l,Be.min()));const c=tt().add(l),m=new Xh(Be.min(),new Map,new xt(Ke),h,c);await xE(s,m),s.ou=s.ou.remove(l),s._u.delete(e),Hp(s)}else await Xm(s.localStore,e,!1).then(()=>Jm(s,e,n)).catch(zo)}async function $x(r,e){const n=qe(r),s=e.batch.batchId;try{const o=await WI(n.localStore,e);OE(n,s,null),DE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await xu(n,o)}catch(o){await zo(o)}}async function Bx(r,e,n){const s=qe(r);try{const o=await function(h,c){const m=qe(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return m.mutationQueue.lookupMutationBatch(g,c).next(d=>(dt(d!==null,37113),b=d.keys(),m.mutationQueue.removeMutationBatch(g,d))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,b,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b)).next(()=>m.localDocuments.getDocuments(g,b))})}(s.localStore,e);OE(s,e,n),DE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await xu(s,o)}catch(o){await zo(o)}}function DE(r,e){(r.cu.get(e)||[]).forEach(n=>{n.resolve()}),r.cu.delete(e)}function OE(r,e,n){const s=qe(r);let o=s.uu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),s.uu[s.currentUser.toKey()]=o}}function Jm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.iu.get(e))r.ru.delete(s),n&&r.nu.Tu(s,n);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(s=>{r.au.containsKey(s)||NE(r,s)})}function NE(r,e){r.su.delete(e.path.canonicalString());const n=r.ou.get(e);n!==null&&(Vp(r.remoteStore,n),r.ou=r.ou.remove(e),r._u.delete(n),Hp(r))}function eb(r,e,n){for(const s of n)s instanceof RE?(r.au.addReference(s.key,e),qx(r,s)):s instanceof CE?(be(qp,"Document no longer in limbo: "+s.key),r.au.removeReference(s.key,e),r.au.containsKey(s.key)||NE(r,s.key)):Ue(19791,{Iu:s})}function qx(r,e){const n=e.key,s=n.path.canonicalString();r.ou.get(n)||r.su.has(s)||(be(qp,"New document in limbo: "+n),r.su.add(s),Hp(r))}function Hp(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const n=new Ne(Ct.fromString(e)),s=r.lu.next();r._u.set(s,new Nx(n)),r.ou=r.ou.insert(n,s),yE(r.remoteStore,new Ts(Wr(Rp(n.path)),s,"TargetPurposeLimboResolution",Bh.le))}}async function xu(r,e,n){const s=qe(r),o=[],l=[],h=[];s.ru.isEmpty()||(s.ru.forEach((c,m)=>{h.push(s.Pu(m,e,n).then(g=>{var b;if((g||n)&&s.isPrimaryClient){const d=g?!g.fromCache:(b=n==null?void 0:n.targetChanges.get(m.targetId))===null||b===void 0?void 0:b.current;s.sharedClientState.updateQueryState(m.targetId,d?"current":"not-current")}if(g){o.push(g);const d=Mp.Ps(m.targetId,g);l.push(d)}}))}),await Promise.all(h),s.nu.Q_(o),await async function(m,g){const b=qe(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>fe.forEach(g,y=>fe.forEach(y.ls,_=>b.persistence.referenceDelegate.addReference(d,y.targetId,_)).next(()=>fe.forEach(y.hs,_=>b.persistence.referenceDelegate.removeReference(d,y.targetId,_)))))}catch(d){if(!$o(d))throw d;be(Pp,"Failed to update sequence numbers: "+d)}for(const d of g){const y=d.targetId;if(!d.fromCache){const _=b.Ss.get(y),v=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(v);b.Ss=b.Ss.insert(y,E)}}}(s.localStore,l))}async function Hx(r,e){const n=qe(r);if(!n.currentUser.isEqual(e)){be(qp,"User change. New user:",e.toKey());const s=await dE(n.localStore,e);n.currentUser=e,function(l,h){l.cu.forEach(c=>{c.forEach(m=>{m.reject(new De(de.CANCELLED,h))})}),l.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await xu(n,s.Ms)}}function Fx(r,e){const n=qe(r),s=n._u.get(e);if(s&&s.tu)return tt().add(s.key);{let o=tt();const l=n.iu.get(e);if(!l)return o;for(const h of l){const c=n.ru.get(h);o=o.unionWith(c.view.Wa)}return o}}function kE(r){const e=qe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=xE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zx.bind(null,e),e.nu.Q_=Ix.bind(null,e.eventManager),e.nu.Tu=xx.bind(null,e.eventManager),e}function Gx(r){const e=qe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$x.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bx.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return XI(this.persistence,new KI,e.initialUser,this.serializer)}Ru(e){return new fE(kp.Ei,this.serializer)}Au(e){return new rx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class Kx extends Oh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){dt(this.persistence.referenceDelegate instanceof xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new NI(s,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new fE(s=>xh.Ei(s,n),this.serializer)}}class ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>J_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hx.bind(null,this.syncEngine),await Ax(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Cx}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),s=function(l){return new lx(l)}(e.databaseInfo);return function(l,h,c,m){return new fx(l,h,c,m)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,l,h,c){return new mx(s,o,l,h,c)}(this.localStore,this.datastore,e.asyncQueue,n=>J_(this.syncEngine,n,0),function(){return K_.C()?new K_:new ix}())}createSyncEngine(e,n){return function(o,l,h,c,m,g,b){const d=new kx(o,l,h,c,m,g);return b&&(d.hu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=qe(o);be(Sa,"RemoteStore shutting down."),l.aa.add(5),await Iu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="FirestoreClient";class Yx{constructor(e,n,s,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=_n.UNAUTHENTICATED,this.clientId=R2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{be(Ls,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(be(Ls,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=$p(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Rm(r,e){r.asyncQueue.verifyOperationInProgress(),be(Ls,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await dE(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function tb(r,e){r.asyncQueue.verifyOperationInProgress();const n=await Qx(r);be(Ls,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>Q_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Q_(e.remoteStore,o)),r._onlineComponents=e}async function Qx(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){be(Ls,"Using user provided OfflineComponentProvider");try{await Rm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===de.FAILED_PRECONDITION||o.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await Rm(r,new Oh)}}else be(Ls,"Using default OfflineComponentProvider"),await Rm(r,new Kx(void 0));return r._offlineComponents}async function PE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(be(Ls,"Using user provided OnlineComponentProvider"),await tb(r,r._uninitializedComponentsProvider._online)):(be(Ls,"Using default OnlineComponentProvider"),await tb(r,new ep))),r._onlineComponents}function Xx(r){return PE(r).then(e=>e.syncEngine)}async function VE(r){const e=await PE(r),n=e.eventManager;return n.onListen=Mx.bind(null,e.syncEngine),n.onUnlisten=Lx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Px.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jx.bind(null,e.syncEngine),n}function Wx(r,e,n={}){const s=new Oi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,c,m,g){const b=new ME({next:y=>{b.yu(),h.enqueueAndForget(()=>SE(l,d));const _=y.docs.has(c);!_&&y.fromCache?g.reject(new De(de.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&m&&m.source==="server"?g.reject(new De(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(y)},error:y=>g.reject(y)}),d=new AE(Rp(c.path),b,{includeMetadataChanges:!0,Fa:!0});return TE(l,d)}(await VE(r),r.asyncQueue,e,n,s)),s.promise}function Zx(r,e,n={}){const s=new Oi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,c,m,g){const b=new ME({next:y=>{b.yu(),h.enqueueAndForget(()=>SE(l,d)),y.fromCache&&m.source==="server"?g.reject(new De(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(y)},error:y=>g.reject(y)}),d=new AE(c,b,{includeMetadataChanges:!0,Fa:!0});return TE(l,d)}(await VE(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(r,e,n){if(!n)throw new De(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Jx(r,e,n,s){if(e===!0&&s===!0)throw new De(de.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function rb(r){if(!Ne.isDocumentKey(r))throw new De(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ib(r){if(Ne.isDocumentKey(r))throw new De(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Fp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ue(12329,{type:typeof r})}function Pi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new De(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fp(r);throw new De(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="firestore.googleapis.com",sb=!0;class ab{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new De(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UE,this.ssl=sb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:sb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new De(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new De(de.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new De(de.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new De(de.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ab({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ab(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new aC;switch(s.type){case"firstParty":return new cC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new De(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=nb.get(n);s&&(be("ComponentProvider","Removing Datastore"),nb.delete(n),s.terminate())}(this),Promise.resolve()}}function eD(r,e,n,s={}){var o;const l=(r=Pi(r,ef))._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:r._getEmulatorOptions()}),c=`${e}:${n}`;l.host!==UE&&l.host!==c&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:c,ssl:!1,emulatorOptions:s});if(!Ea(m,h)&&(r._setSettings(m),s.mockUserToken)){let g,b;if(typeof s.mockUserToken=="string")g=s.mockUserToken,b=_n.MOCK_USER;else{g=PA(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new De(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new _n(d)}r._authCredentials=new oC(new S2(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new tf(this.firestore,e,this._query)}}class Wn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class xs extends tf{constructor(e,n,s){super(e,n,Rp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Ne(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function nf(r,e,...n){if(r=Tn(r),jE("collection","path",e),r instanceof ef){const s=Ct.fromString(e,...n);return ib(s),new xs(r,null,s)}{if(!(r instanceof Wn||r instanceof xs))throw new De(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ct.fromString(e,...n));return ib(s),new xs(r.firestore,null,s)}}function lu(r,e,...n){if(r=Tn(r),arguments.length===1&&(e=R2.newId()),jE("doc","path",e),r instanceof ef){const s=Ct.fromString(e,...n);return rb(s),new Wn(r,null,new Ne(s))}{if(!(r instanceof Wn||r instanceof xs))throw new De(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ct.fromString(e,...n));return rb(s),new Wn(r.firestore,r instanceof xs?r.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="AsyncQueue";class lb{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new pE(this,"async_queue_retry"),this.ju=()=>{const s=Am();s&&be(ob,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=e;const n=Am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Oi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!$o(e))throw e;be(ob,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(s=>{throw this.Ku=s,this.Wu=!1,ki("INTERNAL UNHANDLED ERROR: ",ub(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=n,n}enqueueAfterDelay(e,n,s){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const o=zp.createAndSchedule(this,e,n,s,l=>this.Xu(l));return this.Uu.push(o),o}Ju(){this.Ku&&Ue(47125,{ec:ub(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function ub(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class qo extends ef{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new lb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lb(e),this._firestoreClient=void 0,await e}}}function tD(r,e){const n=typeof r=="object"?r:m2(),s=typeof r=="string"?r:wh,o=_p(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=kA("firestore");l&&eD(o,...l)}return o}function Gp(r){if(r._terminated)throw new De(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||nD(r),r._firestoreClient}function nD(r){var e,n,s;const o=r._freezeSettings(),l=function(c,m,g,b){return new AC(c,m,g,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,LE(b.experimentalLongPollingOptions),b.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new Yx(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(c){const m=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(fn.fromBase64String(e))}catch(n){throw new De(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vo(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new De(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new De(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new De(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=/^__.*__$/;class iD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ru(e,this.data,n,this.fieldTransforms)}}class zE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $E(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{oc:r})}}class Xp{constructor(e,n,s,o,l,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Xp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ac({path:s,cc:!1});return o.lc(e),o}hc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ac({path:s,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Nh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if($E(this.oc)&&rD.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class sD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Wh(e)}dc(e,n,s,o=!1){return new Xp({oc:e,methodName:n,Ec:s,path:hn.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BE(r){const e=r._freezeSettings(),n=Wh(r._databaseId);return new sD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function aD(r,e,n,s,o,l={}){const h=r.dc(l.merge||l.mergeFields?2:0,e,n,o);Wp("Data must be an object, but it was:",h,s);const c=qE(s,h);let m,g;if(l.merge)m=new Xn(h.fieldMask),g=h.fieldTransforms;else if(l.mergeFields){const b=[];for(const d of l.mergeFields){const y=tp(e,d,n);if(!h.contains(y))throw new De(de.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);FE(b,y)||b.push(y)}m=new Xn(b),g=h.fieldTransforms.filter(d=>m.covers(d.field))}else m=null,g=h.fieldTransforms;return new iD(new Vn(c),m,g)}class sf extends Kp{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}function oD(r,e,n,s){const o=r.dc(1,e,n);Wp("Data must be an object, but it was:",o,s);const l=[],h=Vn.empty();Us(s,(m,g)=>{const b=Zp(e,m,n);g=Tn(g);const d=o.hc(b);if(g instanceof sf)l.push(b);else{const y=af(g,d);y!=null&&(l.push(b),h.set(b,y))}});const c=new Xn(l);return new zE(h,c,o.fieldTransforms)}function lD(r,e,n,s,o,l){const h=r.dc(1,e,n),c=[tp(e,s,n)],m=[o];if(l.length%2!=0)throw new De(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<l.length;y+=2)c.push(tp(e,l[y])),m.push(l[y+1]);const g=[],b=Vn.empty();for(let y=c.length-1;y>=0;--y)if(!FE(g,c[y])){const _=c[y];let v=m[y];v=Tn(v);const E=h.hc(_);if(v instanceof sf)g.push(_);else{const R=af(v,E);R!=null&&(g.push(_),b.set(_,R))}}const d=new Xn(g);return new zE(b,d,h.fieldTransforms)}function af(r,e){if(HE(r=Tn(r)))return Wp("Unsupported field value:",e,r),qE(r,e);if(r instanceof Kp)return function(s,o){if(!$E(o.oc))throw o.Tc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const c of s){let m=af(c,o.Pc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return QC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Yt.fromDate(s);return{timestampValue:Ih(o.serializer,l)}}if(s instanceof Yt){const l=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ih(o.serializer,l)}}if(s instanceof Yp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vo)return{bytesValue:iE(o.serializer,s._byteString)};if(s instanceof Wn){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Tc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Op(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Qp)return function(h,c){return{mapValue:{fields:{[M2]:{stringValue:P2},[Th]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw c.Tc("VectorValues must only contain numeric values.");return Cp(c.serializer,g)})}}}}}}(s,o);throw o.Tc(`Unsupported field value: ${Fp(s)}`)}(r,e)}function qE(r,e){const n={};return I2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(r,(s,o)=>{const l=af(o,e.uc(s));l!=null&&(n[s]=l)}),{mapValue:{fields:n}}}function HE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Yt||r instanceof Yp||r instanceof Vo||r instanceof Wn||r instanceof Kp||r instanceof Qp)}function Wp(r,e,n){if(!HE(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Fp(n);throw s==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+s)}}function tp(r,e,n){if((e=Tn(e))instanceof rf)return e._internalPath;if(typeof e=="string")return Zp(r,e);throw Nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const uD=new RegExp("[~\\*/\\[\\]]");function Zp(r,e,n){if(e.search(uD)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new rf(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Nh(r,e,n,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${s}`),h&&(m+=` in document ${o}`),m+=")"),new De(de.INVALID_ARGUMENT,c+r+m)}function FE(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,s,o,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(KE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cD extends GE{data(){return super.data()}}function KE(r,e){return typeof e=="string"?Zp(r,e):e instanceof rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new De(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fD{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Us(e,(o,l)=>{s[o]=this.convertValue(l,n)}),s}convertVectorValue(e){var n,s,o;const l=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Th].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>Mt(h.doubleValue));return new Qp(l)}convertGeoPoint(e){return new Yp(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Hh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const n=ks(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ct.fromString(e);dt(cE(s),9688,{name:e});const o=new pu(s.get(1),s.get(3)),l=new Ne(s.popFirst(5));return o.isEqual(n)||ki(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(r,e,n){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YE extends GE{constructor(e,n,s,o,l,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(KE("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ch extends YE{data(e={}){return super.data(e)}}class mD{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ru(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ch(this._firestore,this._userDataWriter,s.key,s,new ru(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new De(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(c=>{const m=new ch(o._firestore,o._userDataWriter,c.doc.key,c.doc,new ru(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);return c.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(c=>l||c.type!==3).map(c=>{const m=new ch(o._firestore,o._userDataWriter,c.doc.key,c.doc,new ru(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return c.type!==0&&(g=h.indexOf(c.doc.key),h=h.delete(c.doc.key)),c.type!==1&&(h=h.add(c.doc),b=h.indexOf(c.doc.key)),{type:pD(c.type),doc:m,oldIndex:g,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(r){r=Pi(r,Wn);const e=Pi(r.firestore,qo);return Wx(Gp(e),r._key).then(n=>_D(e,r,n))}class XE extends fD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,n)}}function Jp(r){r=Pi(r,tf);const e=Pi(r.firestore,qo),n=Gp(e),s=new XE(e);return hD(r._query),Zx(n,r._query).then(o=>new mD(e,s,r,o))}function gD(r,e,n,...s){r=Pi(r,Wn);const o=Pi(r.firestore,qo),l=BE(o);let h;return h=typeof(e=Tn(e))=="string"||e instanceof rf?lD(l,"updateDoc",r._key,e,n,s):oD(l,"updateDoc",r._key,e),eg(o,[h.toMutation(r._key,Rr.exists(!0))])}function yD(r){return eg(Pi(r.firestore,qo),[new Ip(r._key,Rr.none())])}function vD(r,e){const n=Pi(r.firestore,qo),s=lu(r),o=dD(r.converter,e);return eg(n,[aD(BE(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Rr.exists(!1))]).then(()=>s)}function eg(r,e){return function(s,o){const l=new Oi;return s.asyncQueue.enqueueAndForget(async()=>Ux(await Xx(s),o,l)),l.promise}(Gp(r),e)}function _D(r,e,n){const s=n.docs.get(e._key),o=new XE(r);return new YE(r,o,e._key,s,new ru(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Uo=o})(jo),xo(new wa("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),c=new qo(new lC(s.getProvider("auth-internal")),new hC(h,s.getProvider("app-check-internal")),function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new De(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(g.options.projectId,b)}(h,o),h);return l=Object.assign({useFetchStreams:n},l),c._setSettings(l),c},"PUBLIC").setMultipleInstances(!0)),Cs(m_,p_,e),Cs(m_,p_,"esm2017")})();var bD="firebase",ED="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(bD,ED,"app");function tg(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function WE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wD=WE,ZE=new Su("auth","Firebase",WE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new yp("@firebase/auth");function TD(r,...e){kh.logLevel<=et.WARN&&kh.warn(`Auth (${jo}): ${r}`,...e)}function hh(r,...e){kh.logLevel<=et.ERROR&&kh.error(`Auth (${jo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(r,...e){throw ng(r,...e)}function Jr(r,...e){return ng(r,...e)}function JE(r,e,n){const s=Object.assign(Object.assign({},wD()),{[e]:n});return new Su("auth","Firebase",s).create(e,{appName:r.name})}function Ds(r){return JE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return ZE.create(r,...e)}function je(r,e,...n){if(!r)throw ng(e,...n)}function xi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hh(e),new Error(e)}function Vi(r,e){r||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function SD(){return cb()==="http:"||cb()==="https:"}function cb(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SD()||UA()||"connection"in navigator)?navigator.onLine:!0}function RD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vi(n>e,"Short delay should be less than long delay!"),this.isMobile=VA()||zA()}get(){return AD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(r,e){Vi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xD=new Du(3e4,6e4);function Da(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function $s(r,e,n,s,o={}){return t1(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const c=Au(Object.assign({key:r.config.apiKey},h)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:m},l);return jA()||(g.referrerPolicy="no-referrer"),e1.fetch()(await n1(r,r.config.apiHost,n,c),g)})}async function t1(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},CD),e);try{const o=new OD(r),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw th(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const c=l.ok?h.errorMessage:h.error.message,[m,g]=c.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw th(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw th(r,"user-disabled",h);const b=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw JE(r,b,g);Cr(r,b)}}catch(o){if(o instanceof ji)throw o;Cr(r,"network-request-failed",{message:String(o)})}}async function of(r,e,n,s,o={}){const l=await $s(r,e,n,s,o);return"mfaPendingCredential"in l&&Cr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function n1(r,e,n,s){const o=`${e}${n}?${s}`,l=r,h=l.config.emulator?rg(r.config,o):`${r.config.apiScheme}://${o}`;return ID.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function DD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Jr(this.auth,"network-request-failed")),xD.get())})}}function th(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Jr(r,e,s);return o.customData._tokenResponse=n,o}function hb(r){return r!==void 0&&r.enterprise!==void 0}class ND{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kD(r,e){return $s(r,"GET","/v2/recaptchaConfig",Da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(r,e){return $s(r,"POST","/v1/accounts:delete",e)}async function Mh(r,e){return $s(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PD(r,e=!1){const n=Tn(r),s=await n.getIdToken(e),o=ig(s);je(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:uu(Cm(o.auth_time)),issuedAtTime:uu(Cm(o.iat)),expirationTime:uu(Cm(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cm(r){return Number(r)*1e3}function ig(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=o2(n);return o?JSON.parse(o):(hh("Failed to decode base64 JWT payload"),null)}catch(o){return hh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function fb(r){const e=ig(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ji&&VD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function VD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(r){var e;const n=r.auth,s=await r.getIdToken(),o=await _u(r,Mh(n,{idToken:s}));je(o==null?void 0:o.users.length,n,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?r1(l.providerUserInfo):[],c=UD(r.providerData,h),m=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(c!=null&&c.length),b=m?g:!1,d={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new rp(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(r,d)}async function jD(r){const e=Tn(r);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UD(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function r1(r){return r.map(e=>{var{providerId:n}=e,s=tg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(r,e){const n=await t1(r,{},async()=>{const s=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await n1(r,o,"/v1/token",`key=${l}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",e1.fetch()(h,{method:"POST",headers:c,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $D(r,e){return $s(r,"POST","/v2/accounts:revokeToken",Da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=fb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:l}=await zD(e,n);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:l}=n,h=new Ro;return s&&(je(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(je(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ar{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,l=tg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new rp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await _u(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PD(this,e)}reload(){return jD(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await _u(this,MD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,l,h,c,m,g,b;const d=(s=n.displayName)!==null&&s!==void 0?s:void 0,y=(o=n.email)!==null&&o!==void 0?o:void 0,_=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,v=(h=n.photoURL)!==null&&h!==void 0?h:void 0,E=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,w=(g=n.createdAt)!==null&&g!==void 0?g:void 0,A=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:x,emailVerified:M,isAnonymous:V,providerData:P,stsTokenManager:O}=n;je(x&&O,e,"internal-error");const S=Ro.fromJSON(this.name,O);je(typeof x=="string",e,"internal-error"),ps(d,e.name),ps(y,e.name),je(typeof M=="boolean",e,"internal-error"),je(typeof V=="boolean",e,"internal-error"),ps(_,e.name),ps(v,e.name),ps(E,e.name),ps(R,e.name),ps(w,e.name),ps(A,e.name);const C=new Ar({uid:x,auth:e,email:y,emailVerified:M,displayName:d,isAnonymous:V,photoURL:v,phoneNumber:_,tenantId:E,stsTokenManager:S,createdAt:w,lastLoginAt:A});return P&&Array.isArray(P)&&(C.providerData=P.map(D=>Object.assign({},D))),R&&(C._redirectEventId=R),C}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ro;o.updateFromServerResponse(n);const l=new Ar({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ph(l),l}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?r1(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),c=new Ro;c.updateFromIdToken(s);const m=new Ar({uid:o.localId,auth:e,stsTokenManager:c,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;function Di(r){Vi(r instanceof Function,"Expected a class definition");let e=db.get(r);return e?(Vi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,db.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i1.type="NONE";const mb=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r,e,n){return`firebase:${r}:${e}:${n}`}class Co{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=fh(this.userKey,o.apiKey,l),this.fullPersistenceKey=fh("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mh(this.auth,{idToken:e}).catch(()=>{});return n?Ar._fromGetAccountInfoResponse(this.auth,n,e):null}return Ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Co(Di(mb),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||Di(mb);const h=fh(s,e.config.apiKey,e.name);let c=null;for(const g of n)try{const b=await g._get(h);if(b){let d;if(typeof b=="string"){const y=await Mh(e,{idToken:b}).catch(()=>{});if(!y)break;d=await Ar._fromGetAccountInfoResponse(e,y,b)}else d=Ar._fromJSON(e,b);g!==l&&(c=d),l=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Co(l,e,s):(l=m[0],c&&await l._set(h,c.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(h)}catch{}})),new Co(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c1(e))return"Blackberry";if(h1(e))return"Webos";if(a1(e))return"Safari";if((e.includes("chrome/")||o1(e))&&!e.includes("edge/"))return"Chrome";if(u1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function s1(r=wn()){return/firefox\//i.test(r)}function a1(r=wn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o1(r=wn()){return/crios\//i.test(r)}function l1(r=wn()){return/iemobile/i.test(r)}function u1(r=wn()){return/android/i.test(r)}function c1(r=wn()){return/blackberry/i.test(r)}function h1(r=wn()){return/webos/i.test(r)}function sg(r=wn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function BD(r=wn()){var e;return sg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qD(){return $A()&&document.documentMode===10}function f1(r=wn()){return sg(r)||u1(r)||h1(r)||c1(r)||/windows phone/i.test(r)||l1(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(r,e=[]){let n;switch(r){case"Browser":n=pb(wn());break;case"Worker":n=`${pb(wn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((h,c)=>{try{const m=e(l);h(m)}catch(m){c(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(r,e={}){return $s(r,"GET","/v2/passwordPolicy",Da(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=6;class KD{constructor(e){var n,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:GD,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,l,h,c;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(c=m.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),m}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gb(this),this.idTokenSubscription=new gb(this),this.beforeStateQueue=new HD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mh(this,{idToken:e}),s=await Ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===c)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(Ds(this));const n=e?Tn(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FD(this),n=new KD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await $D(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let h=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(c,this,"internal-error"),c.then(()=>{h||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{h=!0,m()}}else{const m=e.addObserver(n);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ho(r){return Tn(r)}class gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=QA(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QD(r){lf=r}function m1(r){return lf.loadJS(r)}function XD(){return lf.recaptchaEnterpriseScript}function WD(){return lf.gapiScript}function ZD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class JD{constructor(){this.enterprise=new e3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class e3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const t3="recaptcha-enterprise",p1="NO_RECAPTCHA";class n3{constructor(e){this.type=t3,this.auth=Ho(e)}async verify(e="verify",n=!1){async function s(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,c)=>{kD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const g=new ND(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,h(g.siteKey)}}).catch(m=>{c(m)})})}function o(l,h,c){const m=window.grecaptcha;hb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{h(g)}).catch(()=>{h(p1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JD().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(c=>{if(!n&&hb(window.grecaptcha))o(c,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=XD();m.length!==0&&(m+=c),m1(m).then(()=>{o(c,l,h)}).catch(g=>{h(g)})}}).catch(c=>{h(c)})})}}async function yb(r,e,n,s=!1,o=!1){const l=new n3(r);let h;if(o)h=p1;else try{h=await l.verify(n)}catch{h=await l.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const m=c.phoneEnrollmentInfo.phoneNumber,g=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const m=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:h}):Object.assign(c,{captchaResponse:h}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vb(r,e,n,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await yb(r,e,n,n==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await yb(r,e,n,n==="getOobCode");return s(r,c)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(r,e){const n=_p(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(Ea(l,e??{}))return o;Cr(o,"already-initialized")}return n.initialize({options:e})}function i3(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Di);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function s3(r,e,n){const s=Ho(r);je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=g1(e),{host:h,port:c}=a3(e),m=c===null?"":`:${c}`,g={url:`${l}//${h}${m}/`},b=Object.freeze({host:h,port:c,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),je(Ea(g,s.config.emulator)&&Ea(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,o3()}function g1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function a3(r){const e=g1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:_b(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:_b(h)}}}function _b(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function o3(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}async function l3(r,e){return $s(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(r,e){return of(r,"POST","/v1/accounts:signInWithPassword",Da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(r,e){return of(r,"POST","/v1/accounts:signInWithEmailLink",Da(r,e))}async function h3(r,e){return of(r,"POST","/v1/accounts:signInWithEmailLink",Da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends ag{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new bu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new bu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vb(e,n,"signInWithPassword",u3);case"emailLink":return c3(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vb(e,s,"signUpPassword",l3);case"emailLink":return h3(e,{idToken:n,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r,e){return of(r,"POST","/v1/accounts:signInWithIdp",Da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="http://localhost";class Aa extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,l=tg(n,["providerId","signInMethod"]);if(!s||!o)return null;const h=new Aa(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Io(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Io(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Io(e,n)}buildRequest(){const e={requestUri:f3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m3(r){const e=Zl(Jl(r)).link,n=e?Zl(Jl(e)).deep_link_id:null,s=Zl(Jl(r)).deep_link_id;return(s?Zl(Jl(s)).link:null)||s||n||e||r}class og{constructor(e){var n,s,o,l,h,c;const m=Zl(Jl(e)),g=(n=m.apiKey)!==null&&n!==void 0?n:null,b=(s=m.oobCode)!==null&&s!==void 0?s:null,d=d3((o=m.mode)!==null&&o!==void 0?o:null);je(g&&b&&d,"argument-error"),this.apiKey=g,this.operation=d,this.code=b,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.lang)!==null&&h!==void 0?h:null,this.tenantId=(c=m.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=m3(e);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=og.parseLink(n);return je(s,"argument-error"),bu._fromEmailAndCode(e,s.code,s.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends y1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Ou{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Aa._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Ou{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Ou{constructor(){super("twitter.com")}static credential(e,n){return Aa._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Es.credential(n,s)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const l=await Ar._fromIdTokenResponse(e,s,o),h=bb(s);return new Lo({user:l,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=bb(s);return new Lo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function bb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends ji{constructor(e,n,s,o){var l;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Vh(e,n,s,o)}}function v1(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(r,l,e,s):l})}async function p3(r,e,n=!1){const s=await _u(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Lo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(r,e,n=!1){const{auth:s}=r;if(Sr(s.app))return Promise.reject(Ds(s));const o="reauthenticate";try{const l=await _u(r,v1(s,o,e,r),n);je(l.idToken,s,"internal-error");const h=ig(l.idToken);je(h,s,"internal-error");const{sub:c}=h;return je(r.uid===c,s,"user-mismatch"),Lo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Cr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(r,e,n=!1){if(Sr(r.app))return Promise.reject(Ds(r));const s="signIn",o=await v1(r,s,e),l=await Lo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(l.user),l}async function y3(r,e){return _1(Ho(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v3(r){const e=Ho(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function _3(r,e,n){return Sr(r.app)?Promise.reject(Ds(r)):y3(Tn(r),Fo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&v3(r),s})}function b3(r,e,n,s){return Tn(r).onIdTokenChanged(e,n,s)}function E3(r,e,n){return Tn(r).beforeAuthStateChanged(e,n)}function w3(r){return Tn(r).signOut()}const Lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=1e3,S3=10;class E1 extends b1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,c,m)=>{this.notifyListeners(h,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);qD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,S3):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},T3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}E1.type="LOCAL";const A3=E1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends b1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}w1.type="SESSION";const T1=w1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new uf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:l}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(h).map(async g=>g(n.origin,l)),m=await R3(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((c,m)=>{const g=lg("",20);o.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(d){const y=d;if(y.data.eventId===g)switch(y.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),c(y.data.response);break;default:clearTimeout(b),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function I3(r){ei().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function x3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D3(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function O3(){return S1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firebaseLocalStorageDb",N3=1,jh="firebaseLocalStorage",R1="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cf(r,e){return r.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function k3(){const r=indexedDB.deleteDatabase(A1);return new Nu(r).toPromise()}function ip(){const r=indexedDB.open(A1,N3);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(jh,{keyPath:R1})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(jh)?e(s):(s.close(),await k3(),e(await ip()))})})}async function Eb(r,e,n){const s=cf(r,!0).put({[R1]:e,value:n});return new Nu(s).toPromise()}async function M3(r,e){const n=cf(r,!1).get(e),s=await new Nu(n).toPromise();return s===void 0?null:s.value}function wb(r,e){const n=cf(r,!0).delete(e);return new Nu(n).toPromise()}const P3=800,V3=3;class C1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>V3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uf._getInstance(O3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await x3(),!this.activeServiceWorker)return;this.sender=new C3(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ip();return await Eb(e,Lh,"1"),await wb(e,Lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Eb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>M3(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=cf(o,!1).getAll();return new Nu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C1.type="LOCAL";const L3=C1;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(r,e){return e?Di(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U3(r){return _1(r.auth,new ug(r),r.bypassAuthState)}function z3(r){const{auth:e,user:n}=r;return je(n,e,"internal-error"),g3(n,new ug(r),r.bypassAuthState)}async function $3(r){const{auth:e,user:n}=r;return je(n,e,"internal-error"),p3(n,new ug(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:l,error:h,type:c}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U3;case"linkViaPopup":case"linkViaRedirect":return $3;case"reauthViaPopup":case"reauthViaRedirect":return z3;default:Cr(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new Du(2e3,1e4);class To extends I1{constructor(e,n,s,o,l){super(e,n,o,l),this.provider=s,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B3.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="pendingRedirect",dh=new Map;class H3 extends I1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const s=await F3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F3(r,e){const n=Y3(e),s=K3(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function G3(r,e){dh.set(r._key(),e)}function K3(r){return Di(r._redirectPersistence)}function Y3(r){return fh(q3,r.config.apiKey,r.name)}async function Q3(r,e,n=!1){if(Sr(r.app))return Promise.reject(Ds(r));const s=Ho(r),o=j3(s,e),h=await new H3(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=10*60*1e3;class W3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!x1(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Jr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function x1({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Z3(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x1(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(r,e={}){return $s(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t4=/^https?/;async function n4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await J3(r);for(const n of e)try{if(r4(n))return}catch{}Cr(r,"unauthorized-domain")}function r4(r){const e=np(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!t4.test(n))return!1;if(e4.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new Du(3e4,6e4);function Sb(){const r=ei().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function s4(r){return new Promise((e,n)=>{var s,o,l;function h(){Sb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sb(),n(Jr(r,"network-request-failed"))},timeout:i4.get()})}if(!((o=(s=ei().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ei().gapi)===null||l===void 0)&&l.load)h();else{const c=ZD("iframefcb");return ei()[c]=()=>{gapi.load?h():n(Jr(r,"network-request-failed"))},m1(`${WD()}?onload=${c}`).catch(m=>n(m))}}).catch(e=>{throw mh=null,e})}let mh=null;function a4(r){return mh=mh||s4(r),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new Du(5e3,15e3),l4="__/auth/iframe",u4="emulator/auth/iframe",c4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f4(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?rg(e,u4):`https://${r.config.authDomain}/${l4}`,s={apiKey:e.apiKey,appName:r.name,v:jo},o=h4.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${Au(s).slice(1)}`}async function d4(r){const e=await a4(r),n=ei().gapi;return je(n,r,"internal-error"),e.open({where:document.body,url:f4(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c4,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Jr(r,"network-request-failed"),c=ei().setTimeout(()=>{l(h)},o4.get());function m(){ei().clearTimeout(c),o(s)}s.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p4=500,g4=600,y4="_blank",v4="http://localhost";class Ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _4(r,e,n,s=p4,o=g4){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const m=Object.assign(Object.assign({},m4),{width:s.toString(),height:o.toString(),top:l,left:h}),g=wn().toLowerCase();n&&(c=o1(g)?y4:n),s1(g)&&(e=e||v4,m.scrollbars="yes");const b=Object.entries(m).reduce((y,[_,v])=>`${y}${_}=${v},`,"");if(BD(g)&&c!=="_self")return b4(e||"",c),new Ab(null);const d=window.open(e||"",c,b);je(d,r,"popup-blocked");try{d.focus()}catch{}return new Ab(d)}function b4(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="__/auth/handler",w4="emulator/auth/handler",T4=encodeURIComponent("fac");async function Rb(r,e,n,s,o,l){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:jo,eventId:o};if(e instanceof y1){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",YA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,d]of Object.entries({}))h[b]=d}if(e instanceof Ou){const b=e.getScopes().filter(d=>d!=="");b.length>0&&(h.scopes=b.join(","))}r.tenantId&&(h.tid=r.tenantId);const c=h;for(const b of Object.keys(c))c[b]===void 0&&delete c[b];const m=await r._getAppCheckToken(),g=m?`#${T4}=${encodeURIComponent(m)}`:"";return`${S4(r)}?${Au(c).slice(1)}${g}`}function S4({config:r}){return r.emulator?rg(r,w4):`https://${r.authDomain}/${E4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="webStorageSupport";class A4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T1,this._completeRedirectFn=Q3,this._overrideRedirectResult=G3}async _openPopup(e,n,s,o){var l;Vi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Rb(e,n,s,np(),o);return _4(e,h,lg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const l=await Rb(e,n,s,np(),o);return I3(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(Vi(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await d4(e),s=new W3(e);return n.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Im,{type:Im},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Im];h!==void 0&&n(!!h),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f1()||a1()||sg()}}const R4=A4;var Cb="@firebase/auth",Ib="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x4(r){xo(new wa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:c}=s.options;je(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:h,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d1(r)},g=new YD(s,o,l,m);return i3(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),xo(new wa("auth-internal",e=>{const n=Ho(e.getProvider("auth").getImmediate());return(s=>new C4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(Cb,Ib,I4(r)),Cs(Cb,Ib,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=5*60,O4=c2("authIdTokenMaxAge")||D4;let xb=null;const N4=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>O4)return;const o=n==null?void 0:n.token;xb!==o&&(xb=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function k4(r=m2()){const e=_p(r,"auth");if(e.isInitialized())return e.getImmediate();const n=r3(r,{popupRedirectResolver:R4,persistence:[L3,A3,T1]}),s=c2("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=N4(l.toString());E3(n,h,()=>h(n.currentUser)),b3(n,c=>h(c))}}const o=l2("auth");return o&&s3(n,`http://${o}`),n}function M4(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}QD({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Jr("internal-error");l.customData=o,n(l)},s.type="text/javascript",s.charset="UTF-8",M4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x4("Browser");const P4={apiKey:"AIzaSyCjgpUSwcxlYobS-sQ4RPQlQ0i_4_Arl6k",authDomain:"albins-webbshop.firebaseapp.com",projectId:"albins-webbshop",storageBucket:"albins-webbshop.firebasestorage.app",messagingSenderId:"505857009036",appId:"1:505857009036:web:ad3f987b98aa422abb62a9"},D1=d2(P4),Ss=tD(D1),cg=k4(D1);function V4({query:r,children:e}){const[n,s]=Q.useState([]),[o,l]=Q.useState(!1),h=[{value:"hörlurar",label:"Hörlurar",link:"/category/hörlurar"},{value:"in-ear",label:"In-Ear",link:"/category/in-ear"},{value:"gaming",label:"Gaming",link:"/category/gaming"},{value:"accessories",label:"Tillbehör",link:"/category/accessories"},{value:"tillbehör",label:"Tillbehör",link:"/category/accessories"}];return Q.useEffect(()=>{if(!r){s([]);return}l(!0);async function c(){const b=(await Jp(nf(Ss,"Products"))).docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.name&&v.name.toLowerCase().includes(r.toLowerCase())||v.description&&v.description.toLowerCase().includes(r.toLowerCase()));let d=h.filter(v=>v.label.toLowerCase().includes(r.toLowerCase())||v.value.toLowerCase().includes(r.toLowerCase()));const y=new Set;d=d.filter(v=>y.has(v.link)?!1:(y.add(v.link),!0));const _=d.map(v=>({id:`cat-${v.value}`,name:v.label,isCategory:!0,link:v.link}));s([..._,...b]),l(!1)}c()},[r]),e({results:n,loading:o})}function L4({query:r,onResultClick:e}){return q.jsx(V4,{query:r,children:({results:n,loading:s})=>q.jsxs("div",{className:"search-dropdown-results",children:[" ",s&&q.jsx("div",{className:"search-loading",children:"Söker..."}),!s&&n.length===0&&q.jsx("div",{className:"search-no-results",children:"Inga träffar"}),q.jsx("ul",{className:"search-results-list",children:n.map(o=>q.jsx("li",{className:"search-result-item",children:o.isCategory?q.jsx(cn,{to:o.link,style:{fontWeight:"bold"},onClick:e,children:o.name}):q.jsx(cn,{to:`/product/${o.id}`,onClick:e,children:o.name})},o.id))})]})})}function j4({onCartClick:r}){const[e,n]=Q.useState(!1),[s,o]=Q.useState(""),[l,h]=Q.useState(!1),c=Q.useRef(),m=Q.useRef();return Q.useEffect(()=>{function g(b){c.current&&!c.current.contains(b.target)&&(n(!1),h(!1))}return(e||l)&&document.addEventListener("click",g),()=>{document.removeEventListener("click",g)}},[e,l]),q.jsxs("header",{className:"site-header",ref:c,children:[q.jsxs("div",{className:"top-bar",children:[q.jsx("div",{className:"menu-wrapper",children:q.jsx("button",{className:"menu-btn","aria-label":"Meny",onClick:()=>n(!e),children:q.jsx("img",{src:yA,alt:"Menyikon"})})}),q.jsx("div",{className:"logo",children:q.jsx(cn,{to:"/",children:q.jsx("img",{src:_A,alt:"Ljudzon logotyp"})})}),q.jsx(cn,{to:"/cart",className:"cart-btn","aria-label":"Kundvagn",children:q.jsx(SA,{})})]}),q.jsxs("div",{style:{position:"relative"},children:[q.jsxs("form",{className:"search-bar",onSubmit:g=>g.preventDefault(),ref:m,autoComplete:"off",children:[q.jsx("input",{type:"text",placeholder:"Vad söker du?","aria-label":"Sök",value:s,onChange:g=>{o(g.target.value),h(!!g.target.value)},onFocus:()=>h(!!s)}),q.jsx("button",{type:"submit","aria-label":"Sök",children:q.jsx("img",{src:vA,alt:"Sök"})})]}),l&&s&&q.jsx("div",{className:"search-dropdown",children:q.jsx(L4,{query:s,onResultClick:()=>h(!1)})})]}),q.jsx("nav",{className:`dropdown-menu ${e?"open":""}`,children:q.jsxs("ul",{children:[q.jsx("li",{children:q.jsx(cn,{to:"/category/hörlurar",onClick:()=>n(!1),children:"Hörlurar"})}),q.jsx("li",{children:q.jsx(cn,{to:"/category/in-ear",onClick:()=>n(!1),children:"In-ear"})}),q.jsx("li",{children:q.jsx(cn,{to:"/category/gaming",onClick:()=>n(!1),children:"Gaming"})}),q.jsx("li",{children:q.jsx(cn,{to:"/category/accessories",onClick:()=>n(!1),children:"Tillbehör"})})]})})]})}const U4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%20-54.25%20482.51%20482.51'%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3emastercard%3c/title%3e%3cg%3e%3cpath%20d='M220.13,421.67V396.82c0-9.53-5.8-15.74-15.32-15.74-5,0-10.35,1.66-14.08,7-2.9-4.56-7-7-13.25-7a14.07,14.07,0,0,0-12,5.8v-5h-7.87v39.76h7.87V398.89c0-7,4.14-10.35,9.94-10.35s9.11,3.73,9.11,10.35v22.78h7.87V398.89c0-7,4.14-10.35,9.94-10.35s9.11,3.73,9.11,10.35v22.78Zm129.22-39.35h-14.5v-12H327v12h-8.28v7H327V408c0,9.11,3.31,14.5,13.25,14.5A23.17,23.17,0,0,0,351,419.6l-2.49-7a13.63,13.63,0,0,1-7.46,2.07c-4.14,0-6.21-2.49-6.21-6.63V389h14.5v-6.63Zm73.72-1.24a12.39,12.39,0,0,0-10.77,5.8v-5h-7.87v39.76h7.87V399.31c0-6.63,3.31-10.77,8.7-10.77a24.24,24.24,0,0,1,5.38.83l2.49-7.46a28,28,0,0,0-5.8-.83Zm-111.41,4.14c-4.14-2.9-9.94-4.14-16.15-4.14-9.94,0-16.15,4.56-16.15,12.43,0,6.63,4.56,10.35,13.25,11.6l4.14.41c4.56.83,7.46,2.49,7.46,4.56,0,2.9-3.31,5-9.53,5a21.84,21.84,0,0,1-13.25-4.14l-4.14,6.21c5.8,4.14,12.84,5,17,5,11.6,0,17.81-5.38,17.81-12.84,0-7-5-10.35-13.67-11.6l-4.14-.41c-3.73-.41-7-1.66-7-4.14,0-2.9,3.31-5,7.87-5,5,0,9.94,2.07,12.43,3.31Zm120.11,16.57c0,12,7.87,20.71,20.71,20.71,5.8,0,9.94-1.24,14.08-4.56l-4.14-6.21a16.74,16.74,0,0,1-10.35,3.73c-7,0-12.43-5.38-12.43-13.25S445,389,452.07,389a16.74,16.74,0,0,1,10.35,3.73l4.14-6.21c-4.14-3.31-8.28-4.56-14.08-4.56-12.43-.83-20.71,7.87-20.71,19.88h0Zm-55.5-20.71c-11.6,0-19.47,8.28-19.47,20.71s8.28,20.71,20.29,20.71a25.33,25.33,0,0,0,16.15-5.38l-4.14-5.8a19.79,19.79,0,0,1-11.6,4.14c-5.38,0-11.18-3.31-12-10.35h29.41v-3.31c0-12.43-7.46-20.71-18.64-20.71h0Zm-.41,7.46c5.8,0,9.94,3.73,10.35,9.94H364.68c1.24-5.8,5-9.94,11.18-9.94ZM268.59,401.79V381.91h-7.87v5c-2.9-3.73-7-5.8-12.84-5.8-11.18,0-19.47,8.7-19.47,20.71s8.28,20.71,19.47,20.71c5.8,0,9.94-2.07,12.84-5.8v5h7.87V401.79Zm-31.89,0c0-7.46,4.56-13.25,12.43-13.25,7.46,0,12,5.8,12,13.25,0,7.87-5,13.25-12,13.25-7.87.41-12.43-5.8-12.43-13.25Zm306.08-20.71a12.39,12.39,0,0,0-10.77,5.8v-5h-7.87v39.76H532V399.31c0-6.63,3.31-10.77,8.7-10.77a24.24,24.24,0,0,1,5.38.83l2.49-7.46a28,28,0,0,0-5.8-.83Zm-30.65,20.71V381.91h-7.87v5c-2.9-3.73-7-5.8-12.84-5.8-11.18,0-19.47,8.7-19.47,20.71s8.28,20.71,19.47,20.71c5.8,0,9.94-2.07,12.84-5.8v5h7.87V401.79Zm-31.89,0c0-7.46,4.56-13.25,12.43-13.25,7.46,0,12,5.8,12,13.25,0,7.87-5,13.25-12,13.25-7.87.41-12.43-5.8-12.43-13.25Zm111.83,0V366.17h-7.87v20.71c-2.9-3.73-7-5.8-12.84-5.8-11.18,0-19.47,8.7-19.47,20.71s8.28,20.71,19.47,20.71c5.8,0,9.94-2.07,12.84-5.8v5h7.87V401.79Zm-31.89,0c0-7.46,4.56-13.25,12.43-13.25,7.46,0,12,5.8,12,13.25,0,7.87-5,13.25-12,13.25C564.73,415.46,560.17,409.25,560.17,401.79Z'%20transform='translate(-132.74%20-48.5)'/%3e%3cg%3e%3crect%20x='169.81'%20y='31.89'%20width='143.72'%20height='234.42'%20fill='%23ff5f00'/%3e%3cpath%20d='M317.05,197.6A149.5,149.5,0,0,1,373.79,80.39a149.1,149.1,0,1,0,0,234.42A149.5,149.5,0,0,1,317.05,197.6Z'%20transform='translate(-132.74%20-48.5)'%20fill='%23eb001b'/%3e%3cpath%20d='M615.26,197.6a148.95,148.95,0,0,1-241,117.21,149.43,149.43,0,0,0,0-234.42,148.95,148.95,0,0,1,241,117.21Z'%20transform='translate(-132.74%20-48.5)'%20fill='%23f79e1b'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",z4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20xmlns:sketch='http://www.bohemiancoding.com/sketch/ns'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20version='1.1'%20id='Layer_1'%20x='0px'%20y='0px'%20width='800px'%20height='800px'%20viewBox='0%200%20750%20471'%20enable-background='new%200%200%20750%20471'%20xml:space='preserve'%20sodipodi:docname='visa.svg'%20inkscape:version='0.92.2%205c3e80d,%202017-08-06'%3e%3cmetadata%20id='metadata4882'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cdefs%20id='defs4880'%20/%3e%3csodipodi:namedview%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1'%20objecttolerance='10'%20gridtolerance='10'%20guidetolerance='10'%20inkscape:pageopacity='0'%20inkscape:pageshadow='2'%20inkscape:window-width='1428'%20inkscape:window-height='869'%20id='namedview4878'%20showgrid='false'%20inkscape:zoom='0.384'%20inkscape:cx='83.333333'%20inkscape:cy='235.5'%20inkscape:window-x='164'%20inkscape:window-y='478'%20inkscape:window-maximized='0'%20inkscape:current-layer='Layer_1'%20/%3e%3ctitle%20id='title4867'%3eSlice%201%3c/title%3e%3cdesc%20id='desc4869'%3eCreated%20with%20Sketch.%3c/desc%3e%3cg%20id='visa'%20sketch:type='MSLayerGroup'%3e%3cpath%20id='Shape'%20sketch:type='MSShapeGroup'%20fill='%230E4595'%20d='M278.198,334.228l33.36-195.763h53.358l-33.384,195.763H278.198%20L278.198,334.228z'%20/%3e%3cpath%20id='path13'%20sketch:type='MSShapeGroup'%20fill='%230E4595'%20d='M524.307,142.687c-10.57-3.966-27.135-8.222-47.822-8.222%20c-52.725,0-89.863,26.551-90.18,64.604c-0.297,28.129,26.514,43.821,46.754,53.185c20.77,9.597,27.752,15.716,27.652,24.283%20c-0.133,13.123-16.586,19.116-31.924,19.116c-21.355,0-32.701-2.967-50.225-10.274l-6.877-3.112l-7.488,43.823%20c12.463,5.466,35.508,10.199,59.438,10.445c56.09,0,92.502-26.248,92.916-66.884c0.199-22.27-14.016-39.216-44.801-53.188%20c-18.65-9.056-30.072-15.099-29.951-24.269c0-8.137,9.668-16.838,30.559-16.838c17.447-0.271,30.088,3.534,39.936,7.5l4.781,2.259%20L524.307,142.687'%20/%3e%3cpath%20id='Path'%20sketch:type='MSShapeGroup'%20fill='%230E4595'%20d='M661.615,138.464h-41.23c-12.773,0-22.332,3.486-27.941,16.234%20l-79.244,179.402h56.031c0,0,9.16-24.121,11.232-29.418c6.123,0,60.555,0.084,68.336,0.084c1.596,6.854,6.492,29.334,6.492,29.334%20h49.512L661.615,138.464L661.615,138.464z%20M596.198,264.872c4.414-11.279,21.26-54.724,21.26-54.724%20c-0.314,0.521,4.381-11.334,7.074-18.684l3.607,16.878c0,0,10.217,46.729,12.352,56.527h-44.293V264.872L596.198,264.872z'%20/%3e%3cpath%20d='M%2045.878906%20138.46484%20L%2045.197266%20142.53711%20C%2066.290228%20147.64311%2085.129273%20155.0333%20101.62305%20164.22656%20L%20148.96875%20333.91406%20L%20205.42383%20333.85156%20L%20289.42773%20138.46484%20L%20232.90234%20138.46484%20L%20180.66406%20271.96094%20L%20175.09961%20244.83008%20C%20174.83893%20243.99185%20174.55554%20243.15215%20174.26562%20242.31055%20L%20156.10547%20154.99219%20C%20152.87647%20142.59619%20143.50892%20138.89684%20131.91992%20138.46484%20L%2045.878906%20138.46484%20z%20'%20id='path16'%20style='fill:%230e4595;fill-opacity:1'%20/%3e%3c/g%3e%3c/svg%3e",$4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-4.45%200%2048.3%2048.3'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e.st0{fill:%23341b14}.st1{fill:%23ffb406}%3c/style%3e%3cpath%20class='st0'%20d='M19.7%2046.5c.4-.2%2010.8-4.7%2014.1-7.4%203.4-2.8%205.2-6.8%205.2-11.6V5l-.3-.1C30.4.4%2020.1.7%2019.6.7%2019.2.7%208.9.4.6%204.9L.4%205v22.6c0%204.8%201.8%208.8%205.2%2011.6%203.3%202.7%2013.7%207.2%2014.1%207.3'/%3e%3cpath%20class='st1'%20d='M19.7%2047s-11-4.8-14.4-7.5C1.7%2036.5%200%2032.4%200%2027.7V4.3C8.7-.4%2019.7%200%2019.7%200s11-.4%2019.7%204.3v23.3c0%204.7-1.7%208.8-5.3%2011.8-3.4%202.8-14.4%207.6-14.4%207.6M1.6%2027.7c0%204.4%201.6%208%204.7%2010.5%202.8%202.3%2011.1%206%2013.4%207%202.3-1%2010.7-4.8%2013.4-7%203.1-2.5%204.7-6.2%204.7-10.5v-23c-11.6-1.1-25.4-.5-36.2%209.5v13.5z'/%3e%3cpath%20class='st1'%20d='M30.8%2024.4c1.5.9%202.1%201.5%202.2%202.6%200%201.2-.8%201.9-2.1%201.9-1.1%200-2.4-.6-3.3-1.4v3.2c1.1.6%202.4%201.1%203.8%201.1%203.4%200%205-2.4%205-4.6.1-2-.5-3.6-3.4-5.3-1.3-.8-2.3-1.3-2.3-2.5s1.1-1.7%202-1.7c1.2%200%202.4.7%203.1%201.4v-3c-.6-.5-1.9-1.2-3.8-1.1-2.3.1-4.7%201.7-4.7%204.5.1%201.9.7%203.3%203.5%204.9M19%2031.6c.3.1.8.2%201.6.2%203.9%200%206.1-3.5%206.1-8.5%200-5.1-2.3-8.2-6.4-8.2-1.9%200-3.4.4-4.7%201.2v22.6H19v-7.3zM19%2018c.3-.1.8-.3%201.2-.3%202%200%202.8%201.6%202.8%205.5%200%203.8-1%205.6-3%205.6-.5%200-.9-.1-1.1-.2V18zM8.5%2031.8c2.1%200%203.9-.5%205.2-1.4V15.3h-3.5v13.1c-.4.3-.9.4-1.6.4-1.6%200-1.8-1.5-1.8-2.4V15.3H3.3v10.9c0%203.7%201.8%205.6%205.2%205.6M31.8%2045.3v2.3h.4v-.9h.1l.6.9h.5s-.6-.9-.7-1c.3-.1.5-.3.5-.6s-.2-.7-.8-.7h-.6zm.6.3c.3%200%20.4.2.4.3%200%20.2-.1.4-.5.4h-.1v-.7h.2z'/%3e%3cpath%20class='st1'%20d='M34%2046.4c0%20.8-.7%201.5-1.5%201.5s-1.5-.7-1.5-1.5.7-1.5%201.5-1.5c.9%200%201.5.7%201.5%201.5m-1.5-1.9c-1%200-1.9.8-1.9%201.9%200%201%20.8%201.9%201.9%201.9%201%200%201.9-.8%201.9-1.9%200-1-.9-1.9-1.9-1.9'/%3e%3c/svg%3e",B4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-facebook-icon%20lucide-facebook'%3e%3cpath%20d='M18%202h-3a5%205%200%200%200-5%205v3H7v4h3v8h4v-8h3l1-4h-4V7a1%201%200%200%201%201-1h3z'/%3e%3c/svg%3e",q4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-youtube-icon%20lucide-youtube'%3e%3cpath%20d='M2.5%2017a24.12%2024.12%200%200%201%200-10%202%202%200%200%201%201.4-1.4%2049.56%2049.56%200%200%201%2016.2%200A2%202%200%200%201%2021.5%207a24.12%2024.12%200%200%201%200%2010%202%202%200%200%201-1.4%201.4%2049.55%2049.55%200%200%201-16.2%200A2%202%200%200%201%202.5%2017'/%3e%3cpath%20d='m10%2015%205-3-5-3z'/%3e%3c/svg%3e",H4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-instagram-icon%20lucide-instagram'%3e%3crect%20width='20'%20height='20'%20x='2'%20y='2'%20rx='5'%20ry='5'/%3e%3cpath%20d='M16%2011.37A4%204%200%201%201%2012.63%208%204%204%200%200%201%2016%2011.37z'/%3e%3cline%20x1='17.5'%20x2='17.51'%20y1='6.5'%20y2='6.5'/%3e%3c/svg%3e";function F4(){return q.jsxs("footer",{className:"footer",children:[q.jsxs("div",{className:"footer-top",children:[q.jsxs("div",{children:[q.jsx("div",{className:"footer-payment-title",children:"Payment options:"}),q.jsxs("div",{className:"footer-payments",children:[q.jsx("img",{src:U4,alt:"Mastercard",className:"footer-icon"}),q.jsx("img",{src:z4,alt:"Visa",className:"footer-icon"})]}),q.jsx("div",{className:"footer-shipping-title",children:"Fraktalternativ:"}),q.jsx("div",{className:"footer-shipping",children:q.jsx("img",{src:$4,alt:"UPS",className:"footer-icon"})})]}),q.jsx("div",{className:"footer-admin",children:q.jsx(cn,{to:"/login",children:"Admin inlogg"})})]}),q.jsxs("div",{className:"footer-bottom",children:[q.jsxs("div",{className:"footer-company-info",children:["© 2025 [Ljudzon AB]. Samtliga rättigheter förbehållna.",q.jsx("br",{}),"Organisationsnummer: 123456-7890 | E-post: kundservice@ljudzon.se",q.jsx("br",{}),q.jsx("a",{href:"/integritetspolicy",children:"Integritetspolicy"})," | ",q.jsx("a",{href:"/kopvillkor",children:"Köpvillkor"})]}),q.jsxs("div",{className:"footer-socials",children:[q.jsx("a",{href:"#","aria-label":"Facebook",children:q.jsx("img",{src:B4,alt:"Facebook",className:"footer-icon"})}),q.jsx("a",{href:"#","aria-label":"YouTube",children:q.jsx("img",{src:q4,alt:"YouTube",className:"footer-icon"})}),q.jsx("a",{href:"#","aria-label":"Instagram",children:q.jsx("img",{src:H4,alt:"Instagram",className:"footer-icon"})})]})]})]})}function G4(){return q.jsxs("div",{className:"app",children:[q.jsx(j4,{logoSrc:"/logo.svg"}),q.jsx("main",{children:q.jsx(PS,{})}),q.jsx(F4,{})]})}const K4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-headphones-icon%20lucide-headphones'%3e%3cpath%20d='M3%2014h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2v-7a9%209%200%200%201%2018%200v7a2%202%200%200%201-2%202h-1a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2h3'/%3e%3c/svg%3e",Y4="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_4_378)'%3e%3cpath%20d='M14.5%2012.5V13H15V12.5H14.5ZM12.5%2012.5H12V13H12.5V12.5ZM0.5%2012.5H0V13H0.5V12.5ZM2.5%2012.5V13H3V12.5H2.5ZM10%205V1.654H9V5H10ZM14%203.5V12.5H15V3.5H14ZM14.5%2012H12.5V13H14.5V12ZM12.5%206H11V7H12.5V6ZM10.654%201H11.5V0H10.654V1ZM11%206C10.7348%206%2010.4804%205.89464%2010.2929%205.70711C10.1054%205.51957%2010%205.26522%2010%205H9C9%205.53043%209.21071%206.03914%209.58579%206.41421C9.96086%206.78929%2010.4696%207%2011%207V6ZM15%203.5C15%202.57174%2014.6313%201.6815%2013.9749%201.02513C13.3185%200.368749%2012.4283%200%2011.5%200V1C12.163%201%2012.7989%201.26339%2013.2678%201.73223C13.7366%202.20107%2014%202.83696%2014%203.5H15ZM10%201.654C10%201.293%2010.293%201%2010.654%201V0C9.74%200%209%200.74%209%201.654H10ZM13%2012.5V15H14V12.5H13ZM6%205V1.654H5V5H6ZM0%203.5V12.5H1V3.5H0ZM0.5%2013H2.5V12H0.5V13ZM2.5%207H4V6H2.5V7ZM4.346%200H3.5V1H4.346V0ZM4%207C4.53043%207%205.03914%206.78929%205.41421%206.41421C5.78929%206.03914%206%205.53043%206%205H5C5%205.26522%204.89464%205.51957%204.70711%205.70711C4.51957%205.89464%204.26522%206%204%206V7ZM1%203.5C1%202.83696%201.26339%202.20107%201.73223%201.73223C2.20107%201.26339%202.83696%201%203.5%201V0C2.57174%200%201.6815%200.368749%201.02513%201.02513C0.368749%201.6815%200%202.57174%200%203.5H1ZM6%201.654C6%200.74%205.26%200%204.346%200V1C4.707%201%205%201.293%205%201.654H6ZM1%2012.5V15H2V12.5H1ZM12%204V6.5H13V4H12ZM2%204V6.5H3V4H2ZM13%2012.5V6.5H12V12.5H13ZM3%2012.5V6.5H2V12.5H3Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4_378'%3e%3crect%20width='15'%20height='15'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Q4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-headset-icon%20lucide-headset'%3e%3cpath%20d='M3%2011h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2v-5Zm0%200a9%209%200%201%201%2018%200m0%200v5a2%202%200%200%201-2%202h-1a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2h3Z'/%3e%3cpath%20d='M21%2016v2a4%204%200%200%201-4%204h-5'/%3e%3c/svg%3e",X4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-book-headphones-icon%20lucide-book-headphones'%3e%3cpath%20d='M4%2019.5v-15A2.5%202.5%200%200%201%206.5%202H19a1%201%200%200%201%201%201v18a1%201%200%200%201-1%201H6.5a1%201%200%200%201%200-5H20'/%3e%3cpath%20d='M8%2012v-2a4%204%200%200%201%208%200v2'/%3e%3ccircle%20cx='15'%20cy='12'%20r='1'/%3e%3ccircle%20cx='9'%20cy='12'%20r='1'/%3e%3c/svg%3e";function W4(){return q.jsxs("div",{className:"home",children:[q.jsx("section",{className:"featured-product",children:q.jsx("div",{className:"featured-left",children:q.jsxs("div",{className:"home-description",children:[q.jsx("h1",{children:"Välkommen till Ljudzon"}),q.jsx("p",{className:"home-desc-desktop",children:"Ljudzon är din expert på ljudupplevelser. Vi brinner för att leverera högkvalitativa hörlurar, tillbehör och ljudprodukter till både entusiaster och vardagsanvändare. Hos oss hittar du noggrant utvalda produkter, personlig service och en passion för ljud i världsklass. Oavsett om du söker det senaste inom teknik eller tidlösa klassiker, är vårt mål att du alltid ska få den bästa ljudupplevelsen – varje dag."}),q.jsx("p",{className:"home-desc-mobile",children:"Ljudzon – din butik för hörlurar och ljudtillbehör med kvalitet och service i fokus."})]})})}),q.jsxs("section",{className:"category-grid",children:[q.jsx("div",{className:"category-card",children:q.jsxs(cn,{to:"/category/hörlurar",children:[q.jsx("img",{src:K4,alt:"Hörlurar"}),q.jsx("span",{children:"Hörlurar"})]})}),q.jsx("div",{className:"category-card",children:q.jsxs(cn,{to:"/category/in-ear",children:[q.jsx("img",{src:Y4,alt:"In-Ear"}),q.jsx("span",{children:"In-Ear"})]})}),q.jsx("div",{className:"category-card",children:q.jsxs(cn,{to:"/category/gaming",children:[q.jsx("img",{src:Q4,alt:"Gaming"}),q.jsx("span",{children:"Gaming"})]})}),q.jsx("div",{className:"category-card",children:q.jsxs(cn,{to:"/category/accessories",children:[q.jsx("img",{src:X4,alt:"Tillbehör"}),q.jsx("span",{children:"Tillbehör"})]})})]})]})}const Z4="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-trash2-icon%20lucide-trash-2'%3e%3cpath%20d='M3%206h18'/%3e%3cpath%20d='M19%206v14c0%201-1%202-2%202H7c-1%200-2-1-2-2V6'/%3e%3cpath%20d='M8%206V4c0-1%201-2%202-2h4c1%200%202%201%202%202v2'/%3e%3cline%20x1='10'%20x2='10'%20y1='11'%20y2='17'/%3e%3cline%20x1='14'%20x2='14'%20y1='11'%20y2='17'/%3e%3c/svg%3e";function J4(){const r=ws(l=>l.items),e=ws(l=>l.clearCart),n=ws(l=>l.updateQuantity);ws(l=>l.removeFromCart);const s=r.reduce((l,h)=>{const c=Number(String(h.price).replace(/[^0-9.]/g,""))||0,m=Number(h.quantity)||0;return l+c*m},0),o=js();return q.jsx("div",{className:"cart-container",children:r.length===0?q.jsx("div",{className:"cart-empty",children:"Din kundvagn är tom."}):q.jsxs(q.Fragment,{children:[r.map(l=>q.jsxs("div",{className:"cart-product-card",children:[q.jsx("img",{className:"cart-product-image",src:l.image,alt:l.name}),q.jsxs("div",{className:"cart-product-info",children:[q.jsx("div",{className:"cart-product-name",children:q.jsx("b",{children:l.name})}),q.jsx("div",{className:"cart-product-model",children:l.model}),q.jsxs("div",{className:"cart-quantity-controls",children:[q.jsx("button",{className:"cart-qty-btn",onClick:()=>n(l.id,l.quantity-1),children:"-"}),q.jsx("span",{className:"cart-qty",children:l.quantity}),q.jsx("button",{className:"cart-qty-btn",onClick:()=>n(l.id,l.quantity+1),children:"+"})]})]}),q.jsxs("div",{className:"cart-product-price",children:[l.price," kr"]})]},l.id)),q.jsxs("div",{className:"cart-summary-row",children:[q.jsxs("span",{children:["Totalt: ",r.reduce((l,h)=>l+h.quantity,0)," produkt",r.reduce((l,h)=>l+h.quantity,0)>1?"er":""]}),q.jsxs("span",{children:[s," kr"]})]}),q.jsxs("button",{className:"cart-clear-btn",onClick:e,children:[q.jsx("img",{src:Z4,alt:"Töm kundvagnen",className:"cart-trash-icon"})," Töm kundvagnen"]}),q.jsxs("div",{className:"cart-checkout-box",children:[q.jsxs("div",{className:"cart-checkout-row",children:[q.jsxs("span",{children:[r.reduce((l,h)=>l+h.quantity,0)," produkt",r.reduce((l,h)=>l+h.quantity,0)>1?"er":""]}),q.jsxs("span",{children:[s," kr"]})]}),q.jsxs("div",{className:"cart-checkout-row",children:[q.jsx("span",{children:"Frakt"}),q.jsx("span",{children:"0 kr"})]}),q.jsx("hr",{className:"cart-divider"}),q.jsxs("div",{className:"cart-checkout-row cart-total-row",children:[q.jsx("span",{children:"Totalt"}),q.jsxs("span",{children:[s," kr"]})]}),q.jsx("hr",{className:"cart-divider"}),q.jsx("button",{className:"cart-checkout-btn",onClick:()=>o("/checkout"),children:"Gå till kassan"})]})]})})}function eO(){const r=js();return q.jsxs("div",{className:"admin-menu",children:[q.jsx("h2",{className:"admin-title",children:"Adminpanel"}),q.jsx("button",{className:"admin-btn",onClick:()=>r("/admin/add"),children:"Lägg till produkt"}),q.jsx("button",{className:"admin-btn",onClick:()=>r("/admin/edit"),children:"Redigera produkt"}),q.jsx("button",{className:"admin-btn",onClick:async()=>{await w3(cg),r("/")},children:"Logga ut"})]})}function tO({children:r}){const[e,n]=Q.useState(!0),[s,o]=Q.useState(null),l=js();return Q.useEffect(()=>{const h=cg.onAuthStateChanged(c=>{o(c),n(!1),c||l("/login")});return()=>h()},[l]),e||!s?null:r}var xm={exports:{}},Db;function nO(){return Db||(Db=1,function(r,e){(function(n,s){r.exports=s()})(self,()=>{return n={7629:(o,l,h)=>{const c=h(375),m=h(8571),g=h(9474),b=h(1687),d=h(8652),y=h(8160),_=h(3292),v=h(6354),E=h(8901),R=h(9708),w=h(6914),A=h(2294),x=h(6133),M=h(1152),V=h(8863),P=h(2036),O={Base:class{constructor(S){this.type=S,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new A.Ids,this._preferences=null,this._refs=new x.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return c(typeof R.describe=="function","Manifest functionality disabled"),R.describe(this)}allow(...S){return y.verifyFlat(S,"allow"),this._values(S,"_valids")}alter(S){c(S&&typeof S=="object"&&!Array.isArray(S),"Invalid targets argument"),c(!this._inRuleset(),"Cannot set alterations inside a ruleset");const C=this.clone();C.$_terms.alterations=C.$_terms.alterations||[];for(const D in S){const L=S[D];c(typeof L=="function","Alteration adjuster for",D,"must be a function"),C.$_terms.alterations.push({target:D,adjuster:L})}return C.$_temp.ruleset=!1,C}artifact(S){return c(S!==void 0,"Artifact cannot be undefined"),c(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",S)}cast(S){return c(S===!1||typeof S=="string","Invalid to value"),c(S===!1||this._definition.cast[S],"Type",this.type,"does not support casting to",S),this.$_setFlag("cast",S===!1?void 0:S)}default(S,C){return this._default("default",S,C)}description(S){return c(S&&typeof S=="string","Description must be a non-empty string"),this.$_setFlag("description",S)}empty(S){const C=this.clone();return S!==void 0&&(S=C.$_compile(S,{override:!1})),C.$_setFlag("empty",S,{clone:!1})}error(S){return c(S,"Missing error"),c(S instanceof Error||typeof S=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",S)}example(S,C={}){return c(S!==void 0,"Missing example"),y.assertOptions(C,["override"]),this._inner("examples",S,{single:!0,override:C.override})}external(S,C){return typeof S=="object"&&(c(!C,"Cannot combine options with description"),C=S.description,S=S.method),c(typeof S=="function","Method must be a function"),c(C===void 0||C&&typeof C=="string","Description must be a non-empty string"),this._inner("externals",{method:S,description:C},{single:!0})}failover(S,C){return this._default("failover",S,C)}forbidden(){return this.presence("forbidden")}id(S){return S?(c(typeof S=="string","id must be a non-empty string"),c(/^[^\.]+$/.test(S),"id cannot contain period character"),this.$_setFlag("id",S)):this.$_setFlag("id",void 0)}invalid(...S){return this._values(S,"_invalids")}label(S){return c(S&&typeof S=="string","Label name must be a non-empty string"),this.$_setFlag("label",S)}meta(S){return c(S!==void 0,"Meta cannot be undefined"),this._inner("metas",S,{single:!0})}note(...S){c(S.length,"Missing notes");for(const C of S)c(C&&typeof C=="string","Notes must be non-empty strings");return this._inner("notes",S)}only(S=!0){return c(typeof S=="boolean","Invalid mode:",S),this.$_setFlag("only",S)}optional(){return this.presence("optional")}prefs(S){c(S,"Missing preferences"),c(S.context===void 0,"Cannot override context"),c(S.externals===void 0,"Cannot override externals"),c(S.warnings===void 0,"Cannot override warnings"),c(S.debug===void 0,"Cannot override debug"),y.checkPreferences(S);const C=this.clone();return C._preferences=y.preferences(C._preferences,S),C}presence(S){return c(["optional","required","forbidden"].includes(S),"Unknown presence mode",S),this.$_setFlag("presence",S)}raw(S=!0){return this.$_setFlag("result",S?"raw":void 0)}result(S){return c(["raw","strip"].includes(S),"Unknown result mode",S),this.$_setFlag("result",S)}required(){return this.presence("required")}strict(S){const C=this.clone(),D=S!==void 0&&!S;return C._preferences=y.preferences(C._preferences,{convert:D}),C}strip(S=!0){return this.$_setFlag("result",S?"strip":void 0)}tag(...S){c(S.length,"Missing tags");for(const C of S)c(C&&typeof C=="string","Tags must be non-empty strings");return this._inner("tags",S)}unit(S){return c(S&&typeof S=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",S)}valid(...S){y.verifyFlat(S,"valid");const C=this.allow(...S);return C.$_setFlag("only",!!C._valids,{clone:!1}),C}when(S,C){const D=this.clone();D.$_terms.whens||(D.$_terms.whens=[]);const L=_.when(D,S,C);if(!["any","link"].includes(D.type)){const $=L.is?[L]:L.switch;for(const j of $)c(!j.then||j.then.type==="any"||j.then.type===D.type,"Cannot combine",D.type,"with",j.then&&j.then.type),c(!j.otherwise||j.otherwise.type==="any"||j.otherwise.type===D.type,"Cannot combine",D.type,"with",j.otherwise&&j.otherwise.type)}return D.$_terms.whens.push(L),D.$_mutateRebuild()}cache(S){c(!this._inRuleset(),"Cannot set caching inside a ruleset"),c(!this._cache,"Cannot override schema cache"),c(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const C=this.clone();return C._cache=S||d.provider.provision(),C.$_temp.ruleset=!1,C}clone(){const S=Object.create(Object.getPrototypeOf(this));return this._assign(S)}concat(S){c(y.isSchema(S),"Invalid schema object"),c(this.type==="any"||S.type==="any"||S.type===this.type,"Cannot merge type",this.type,"with another type:",S.type),c(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),c(!S._inRuleset(),"Cannot concatenate a schema with open ruleset");let C=this.clone();if(this.type==="any"&&S.type!=="any"){const D=S.clone();for(const L of Object.keys(C))L!=="type"&&(D[L]=C[L]);C=D}C._ids.concat(S._ids),C._refs.register(S,x.toSibling),C._preferences=C._preferences?y.preferences(C._preferences,S._preferences):S._preferences,C._valids=P.merge(C._valids,S._valids,S._invalids),C._invalids=P.merge(C._invalids,S._invalids,S._valids);for(const D of S._singleRules.keys())C._singleRules.has(D)&&(C._rules=C._rules.filter(L=>L.keep||L.name!==D),C._singleRules.delete(D));for(const D of S._rules)S._definition.rules[D.method].multi||C._singleRules.set(D.name,D),C._rules.push(D);if(C._flags.empty&&S._flags.empty){C._flags.empty=C._flags.empty.concat(S._flags.empty);const D=Object.assign({},S._flags);delete D.empty,b(C._flags,D)}else if(S._flags.empty){C._flags.empty=S._flags.empty;const D=Object.assign({},S._flags);delete D.empty,b(C._flags,D)}else b(C._flags,S._flags);for(const D in S.$_terms){const L=S.$_terms[D];L?C.$_terms[D]?C.$_terms[D]=C.$_terms[D].concat(L):C.$_terms[D]=L.slice():C.$_terms[D]||(C.$_terms[D]=L)}return this.$_root._tracer&&this.$_root._tracer._combine(C,[this,S]),C.$_mutateRebuild()}extend(S){return c(!S.base,"Cannot extend type with another base"),E.type(this,S)}extract(S){return S=Array.isArray(S)?S:S.split("."),this._ids.reach(S)}fork(S,C){c(!this._inRuleset(),"Cannot fork inside a ruleset");let D=this;for(let L of[].concat(S))L=Array.isArray(L)?L:L.split("."),D=D._ids.fork(L,C,D);return D.$_temp.ruleset=!1,D}rule(S){const C=this._definition;y.assertOptions(S,Object.keys(C.modifiers)),c(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const D=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;c(D>=0&&D<this._rules.length,"Cannot apply rules to empty ruleset");const L=this.clone();for(let $=D;$<L._rules.length;++$){const j=L._rules[$],ce=m(j);for(const pe in S)C.modifiers[pe](ce,S[pe]),c(ce.name===j.name,"Cannot change rule name");L._rules[$]=ce,L._singleRules.get(ce.name)===j&&L._singleRules.set(ce.name,ce)}return L.$_temp.ruleset=!1,L.$_mutateRebuild()}get ruleset(){c(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const S=this.clone();return S.$_temp.ruleset=S._rules.length,S}get $(){return this.ruleset}tailor(S){S=[].concat(S),c(!this._inRuleset(),"Cannot tailor inside a ruleset");let C=this;if(this.$_terms.alterations)for(const{target:D,adjuster:L}of this.$_terms.alterations)S.includes(D)&&(C=L(C),c(y.isSchema(C),"Alteration adjuster for",D,"failed to return a schema object"));return C=C.$_modify({each:D=>D.tailor(S),ref:!1}),C.$_temp.ruleset=!1,C.$_mutateRebuild()}tracer(){return M.location?M.location(this):this}validate(S,C){return V.entry(S,this,C)}validateAsync(S,C){return V.entryAsync(S,this,C)}$_addRule(S){typeof S=="string"&&(S={name:S}),c(S&&typeof S=="object","Invalid options"),c(S.name&&typeof S.name=="string","Invalid rule name");for(const j in S)c(j[0]!=="_","Cannot set private rule properties");const C=Object.assign({},S);C._resolve=[],C.method=C.method||C.name;const D=this._definition.rules[C.method],L=C.args;c(D,"Unknown rule",C.method);const $=this.clone();if(L){c(Object.keys(L).length===1||Object.keys(L).length===this._definition.rules[C.name].args.length,"Invalid rule definition for",this.type,C.name);for(const j in L){let ce=L[j];if(D.argsByName){const pe=D.argsByName.get(j);if(pe.ref&&y.isResolvable(ce))C._resolve.push(j),$.$_mutateRegister(ce);else if(pe.normalize&&(ce=pe.normalize(ce),L[j]=ce),pe.assert){const K=y.validateArg(ce,j,pe);c(!K,K,"or reference")}}ce!==void 0?L[j]=ce:delete L[j]}}return D.multi||($._ruleRemove(C.name,{clone:!1}),$._singleRules.set(C.name,C)),$.$_temp.ruleset===!1&&($.$_temp.ruleset=null),D.priority?$._rules.unshift(C):$._rules.push(C),$}$_compile(S,C){return _.schema(this.$_root,S,C)}$_createError(S,C,D,L,$,j={}){const ce=j.flags!==!1?this._flags:{},pe=j.messages?w.merge(this._definition.messages,j.messages):this._definition.messages;return new v.Report(S,C,D,ce,pe,L,$)}$_getFlag(S){return this._flags[S]}$_getRule(S){return this._singleRules.get(S)}$_mapLabels(S){return S=Array.isArray(S)?S:S.split("."),this._ids.labels(S)}$_match(S,C,D,L){(D=Object.assign({},D)).abortEarly=!0,D._externals=!1,C.snapshot();const $=!V.validate(S,this,C,D,L).errors;return C.restore(),$}$_modify(S){return y.assertOptions(S,["each","once","ref","schema"]),A.schema(this,S)||this}$_mutateRebuild(){return c(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(S,{source:C,name:D,path:L,key:$})=>{const j=this._definition[C][D]&&this._definition[C][D].register;j!==!1&&this.$_mutateRegister(S,{family:j,key:$})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(S,{family:C,key:D}={}){this._refs.register(S,C),this._ids.register(S,{key:D})}$_property(S){return this._definition.properties[S]}$_reach(S){return this._ids.reach(S)}$_rootReferences(){return this._refs.roots()}$_setFlag(S,C,D={}){c(S[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const L=this._definition.flags[S]||{};if(g(C,L.default)&&(C=void 0),g(C,this._flags[S]))return this;const $=D.clone!==!1?this.clone():this;return C!==void 0?($._flags[S]=C,$.$_mutateRegister(C)):delete $._flags[S],S[0]!=="_"&&($.$_temp.ruleset=!1),$}$_parent(S,...C){return this[S][y.symbols.parent].call(this,...C)}$_validate(S,C,D){return V.validate(S,this,C,D)}_assign(S){S.type=this.type,S.$_root=this.$_root,S.$_temp=Object.assign({},this.$_temp),S.$_temp.whens={},S._ids=this._ids.clone(),S._preferences=this._preferences,S._valids=this._valids&&this._valids.clone(),S._invalids=this._invalids&&this._invalids.clone(),S._rules=this._rules.slice(),S._singleRules=m(this._singleRules,{shallow:!0}),S._refs=this._refs.clone(),S._flags=Object.assign({},this._flags),S._cache=null,S.$_terms={};for(const C in this.$_terms)S.$_terms[C]=this.$_terms[C]?this.$_terms[C].slice():null;S.$_super={};for(const C in this.$_super)S.$_super[C]=this._super[C].bind(S);return S}_bare(){const S=this.clone();S._reset();const C=S._definition.terms;for(const D in C){const L=C[D];S.$_terms[D]=L.init}return S.$_mutateRebuild()}_default(S,C,D={}){return y.assertOptions(D,"literal"),c(C!==void 0,"Missing",S,"value"),c(typeof C=="function"||!D.literal,"Only function value supports literal option"),typeof C=="function"&&D.literal&&(C={[y.symbols.literal]:!0,literal:C}),this.$_setFlag(S,C)}_generate(S,C,D){if(!this.$_terms.whens)return{schema:this};const L=[],$=[];for(let pe=0;pe<this.$_terms.whens.length;++pe){const K=this.$_terms.whens[pe];if(K.concat){L.push(K.concat),$.push(`${pe}.concat`);continue}const ae=K.ref?K.ref.resolve(S,C,D):S,ye=K.is?[K]:K.switch,Re=$.length;for(let B=0;B<ye.length;++B){const{is:re,then:me,otherwise:he}=ye[B],_e=`${pe}${K.switch?"."+B:""}`;if(re.$_match(ae,C.nest(re,`${_e}.is`),D)){if(me){const Le=C.localize([...C.path,`${_e}.then`],C.ancestors,C.schemas),{schema:Ce,id:Tt}=me._generate(S,Le,D);L.push(Ce),$.push(`${_e}.then${Tt?`(${Tt})`:""}`);break}}else if(he){const Le=C.localize([...C.path,`${_e}.otherwise`],C.ancestors,C.schemas),{schema:Ce,id:Tt}=he._generate(S,Le,D);L.push(Ce),$.push(`${_e}.otherwise${Tt?`(${Tt})`:""}`);break}}if(K.break&&$.length>Re)break}const j=$.join(", ");if(C.mainstay.tracer.debug(C,"rule","when",j),!j)return{schema:this};if(!C.mainstay.tracer.active&&this.$_temp.whens[j])return{schema:this.$_temp.whens[j],id:j};let ce=this;this._definition.generate&&(ce=this._definition.generate(this,S,C,D));for(const pe of L)ce=ce.concat(pe);return this.$_root._tracer&&this.$_root._tracer._combine(ce,[this,...L]),this.$_temp.whens[j]=ce,{schema:ce,id:j}}_inner(S,C,D={}){c(!this._inRuleset(),`Cannot set ${S} inside a ruleset`);const L=this.clone();return L.$_terms[S]&&!D.override||(L.$_terms[S]=[]),D.single?L.$_terms[S].push(C):L.$_terms[S].push(...C),L.$_temp.ruleset=!1,L}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(S,C={}){if(!this._singleRules.has(S))return this;const D=C.clone!==!1?this.clone():this;D._singleRules.delete(S);const L=[];for(let $=0;$<D._rules.length;++$){const j=D._rules[$];j.name!==S||j.keep?L.push(j):D._inRuleset()&&$<D.$_temp.ruleset&&--D.$_temp.ruleset}return D._rules=L,D}_values(S,C){y.verifyFlat(S,C.slice(1,-1));const D=this.clone(),L=S[0]===y.symbols.override;if(L&&(S=S.slice(1)),!D[C]&&S.length?D[C]=new P:L&&(D[C]=S.length?new P:null,D.$_mutateRebuild()),!D[C])return D;L&&D[C].override();for(const $ of S){c($!==void 0,"Cannot call allow/valid/invalid with undefined"),c($!==y.symbols.override,"Override must be the first value");const j=C==="_invalids"?"_valids":"_invalids";D[j]&&(D[j].remove($),D[j].length||(c(C==="_valids"||!D._flags.only,"Setting invalid value",$,"leaves schema rejecting all values due to previous valid rule"),D[j]=null)),D[C].add($,D._refs)}return D}}};O.Base.prototype[y.symbols.any]={version:y.version,compile:_.compile,root:"$_root"},O.Base.prototype.isImmutable=!0,O.Base.prototype.deny=O.Base.prototype.invalid,O.Base.prototype.disallow=O.Base.prototype.invalid,O.Base.prototype.equal=O.Base.prototype.valid,O.Base.prototype.exist=O.Base.prototype.required,O.Base.prototype.not=O.Base.prototype.invalid,O.Base.prototype.options=O.Base.prototype.prefs,O.Base.prototype.preferences=O.Base.prototype.prefs,o.exports=new O.Base},8652:(o,l,h)=>{const c=h(375),m=h(8571),g=h(8160),b={max:1e3,supported:new Set(["undefined","boolean","number","string"])};l.provider={provision:d=>new b.Cache(d)},b.Cache=class{constructor(d={}){g.assertOptions(d,["max"]),c(d.max===void 0||d.max&&d.max>0&&isFinite(d.max),"Invalid max cache size"),this._max=d.max||b.max,this._map=new Map,this._list=new b.List}get length(){return this._map.size}set(d,y){if(d!==null&&!b.supported.has(typeof d))return;let _=this._map.get(d);if(_)return _.value=y,void this._list.first(_);_=this._list.unshift({key:d,value:y}),this._map.set(d,_),this._compact()}get(d){const y=this._map.get(d);if(y)return this._list.first(y),m(y.value)}_compact(){if(this._map.size>this._max){const d=this._list.pop();this._map.delete(d.key)}}},b.List=class{constructor(){this.tail=null,this.head=null}unshift(d){return d.next=null,d.prev=this.head,this.head&&(this.head.next=d),this.head=d,this.tail||(this.tail=d),d}first(d){d!==this.head&&(this._remove(d),this.unshift(d))}pop(){return this._remove(this.tail)}_remove(d){const{next:y,prev:_}=d;return y.prev=_,_&&(_.next=y),d===this.tail&&(this.tail=y),d.prev=null,d.next=null,d}}},8160:(o,l,h)=>{const c=h(375),m=h(7916),g=h(5934);let b,d;const y={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};l.version=g.version,l.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},l.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},l.assertOptions=function(_,v,E="Options"){c(_&&typeof _=="object"&&!Array.isArray(_),"Options must be of type object");const R=Object.keys(_).filter(w=>!v.includes(w));c(R.length===0,`${E} contain unknown keys: ${R}`)},l.checkPreferences=function(_){d=d||h(3378);const v=d.preferences.validate(_);if(v.error)throw new m([v.error.details[0].message])},l.compare=function(_,v,E){switch(E){case"=":return _===v;case">":return _>v;case"<":return _<v;case">=":return _>=v;case"<=":return _<=v}},l.default=function(_,v){return _===void 0?v:_},l.isIsoDate=function(_){return y.isoDate.test(_)},l.isNumber=function(_){return typeof _=="number"&&!isNaN(_)},l.isResolvable=function(_){return!!_&&(_[l.symbols.ref]||_[l.symbols.template])},l.isSchema=function(_,v={}){const E=_&&_[l.symbols.any];return!!E&&(c(v.legacy||E.version===l.version,"Cannot mix different versions of joi schemas"),!0)},l.isValues=function(_){return _[l.symbols.values]},l.limit=function(_){return Number.isSafeInteger(_)&&_>=0},l.preferences=function(_,v){b=b||h(6914),_=_||{},v=v||{};const E=Object.assign({},_,v);return v.errors&&_.errors&&(E.errors=Object.assign({},_.errors,v.errors),E.errors.wrap=Object.assign({},_.errors.wrap,v.errors.wrap)),v.messages&&(E.messages=b.compile(v.messages,_.messages)),delete E[l.symbols.prefs],E},l.tryWithPath=function(_,v,E={}){try{return _()}catch(R){throw R.path!==void 0?R.path=v+"."+R.path:R.path=v,E.append&&(R.message=`${R.message} (${R.path})`),R}},l.validateArg=function(_,v,{assert:E,message:R}){if(l.isSchema(E)){const w=E.validate(_);return w.error?w.error.message:void 0}if(!E(_))return v?`${v} ${R}`:R},l.verifyFlat=function(_,v){for(const E of _)c(!Array.isArray(E),"Method no longer accepts array arguments:",v)}},3292:(o,l,h)=>{const c=h(375),m=h(8160),g=h(6133),b={};l.schema=function(d,y,_={}){m.assertOptions(_,["appendPath","override"]);try{return b.schema(d,y,_)}catch(v){throw _.appendPath&&v.path!==void 0&&(v.message=`${v.message} (${v.path})`),v}},b.schema=function(d,y,_){c(y!==void 0,"Invalid undefined schema"),Array.isArray(y)&&(c(y.length,"Invalid empty array schema"),y.length===1&&(y=y[0]));const v=(E,...R)=>_.override!==!1?E.valid(d.override,...R):E.valid(...R);if(b.simple(y))return v(d,y);if(typeof y=="function")return d.custom(y);if(c(typeof y=="object","Invalid schema content:",typeof y),m.isResolvable(y))return v(d,y);if(m.isSchema(y))return y;if(Array.isArray(y)){for(const E of y)if(!b.simple(E))return d.alternatives().try(...y);return v(d,...y)}return y instanceof RegExp?d.string().regex(y):y instanceof Date?v(d.date(),y):(c(Object.getPrototypeOf(y)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),d.object().keys(y))},l.ref=function(d,y){return g.isRef(d)?d:g.create(d,y)},l.compile=function(d,y,_={}){m.assertOptions(_,["legacy"]);const v=y&&y[m.symbols.any];if(v)return c(_.legacy||v.version===m.version,"Cannot mix different versions of joi schemas:",v.version,m.version),y;if(typeof y!="object"||!_.legacy)return l.schema(d,y,{appendPath:!0});const E=b.walk(y);return E?E.compile(E.root,y):l.schema(d,y,{appendPath:!0})},b.walk=function(d){if(typeof d!="object")return null;if(Array.isArray(d)){for(const _ of d){const v=b.walk(_);if(v)return v}return null}const y=d[m.symbols.any];if(y)return{root:d[y.root],compile:y.compile};c(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const _ in d){const v=b.walk(d[_]);if(v)return v}return null},b.simple=function(d){return d===null||["boolean","string","number"].includes(typeof d)},l.when=function(d,y,_){if(_===void 0&&(c(y&&typeof y=="object","Missing options"),_=y,y=g.create(".")),Array.isArray(_)&&(_={switch:_}),m.assertOptions(_,["is","not","then","otherwise","switch","break"]),m.isSchema(y))return c(_.is===void 0,'"is" can not be used with a schema condition'),c(_.not===void 0,'"not" can not be used with a schema condition'),c(_.switch===void 0,'"switch" can not be used with a schema condition'),b.condition(d,{is:y,then:_.then,otherwise:_.otherwise,break:_.break});if(c(g.isRef(y)||typeof y=="string","Invalid condition:",y),c(_.not===void 0||_.is===void 0,'Cannot combine "is" with "not"'),_.switch===void 0){let E=_;_.not!==void 0&&(E={is:_.not,then:_.otherwise,otherwise:_.then,break:_.break});let R=E.is!==void 0?d.$_compile(E.is):d.$_root.invalid(null,!1,0,"").required();return c(E.then!==void 0||E.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),c(E.break===void 0||E.then===void 0||E.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),_.is===void 0||g.isRef(_.is)||m.isSchema(_.is)||(R=R.required()),b.condition(d,{ref:l.ref(y),is:R,then:E.then,otherwise:E.otherwise,break:E.break})}c(Array.isArray(_.switch),'"switch" must be an array'),c(_.is===void 0,'Cannot combine "switch" with "is"'),c(_.not===void 0,'Cannot combine "switch" with "not"'),c(_.then===void 0,'Cannot combine "switch" with "then"');const v={ref:l.ref(y),switch:[],break:_.break};for(let E=0;E<_.switch.length;++E){const R=_.switch[E],w=E===_.switch.length-1;m.assertOptions(R,w?["is","then","otherwise"]:["is","then"]),c(R.is!==void 0,'Switch statement missing "is"'),c(R.then!==void 0,'Switch statement missing "then"');const A={is:d.$_compile(R.is),then:d.$_compile(R.then)};if(g.isRef(R.is)||m.isSchema(R.is)||(A.is=A.is.required()),w){c(_.otherwise===void 0||R.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const x=_.otherwise!==void 0?_.otherwise:R.otherwise;x!==void 0&&(c(v.break===void 0,"Cannot specify both otherwise and break"),A.otherwise=d.$_compile(x))}v.switch.push(A)}return v},b.condition=function(d,y){for(const _ of["then","otherwise"])y[_]===void 0?delete y[_]:y[_]=d.$_compile(y[_]);return y}},6354:(o,l,h)=>{const c=h(5688),m=h(8160),g=h(3328);l.Report=class{constructor(b,d,y,_,v,E,R){if(this.code=b,this.flags=_,this.messages=v,this.path=E.path,this.prefs=R,this.state=E,this.value=d,this.message=null,this.template=null,this.local=y||{},this.local.label=l.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const w=this.path[this.path.length-1];typeof w!="object"&&(this.local.key=w)}}_setTemplate(b){if(this.template=b,!this.flags.label&&this.path.length===0){const d=this._template(this.template,"root");d&&(this.local.label=d)}}toString(){if(this.message)return this.message;const b=this.code;if(!this.prefs.errors.render)return this.code;const d=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return d===void 0?`Error code "${b}" is not defined, your custom type is missing the correct messages definition`:(this.message=d.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(b,d){return l.template(this.value,b,d||this.code,this.state,this.prefs)}},l.path=function(b){let d="";for(const y of b)typeof y!="object"&&(typeof y=="string"?(d&&(d+="."),d+=y):d+=`[${y}]`);return d},l.template=function(b,d,y,_,v){if(!d)return;if(g.isTemplate(d))return y!=="root"?d:null;let E=v.errors.language;if(m.isResolvable(E)&&(E=E.resolve(b,_,v)),E&&d[E]){if(d[E][y]!==void 0)return d[E][y];if(d[E]["*"]!==void 0)return d[E]["*"]}return d[y]?d[y]:d["*"]},l.label=function(b,d,y,_){if(!y.errors.label)return"";if(b.label)return b.label;let v=d.path;return y.errors.label==="key"&&d.path.length>1&&(v=d.path.slice(-1)),l.path(v)||l.template(null,y.messages,"root",d,y)||_&&l.template(null,_,"root",d,y)||"value"},l.process=function(b,d,y){if(!b)return null;const{override:_,message:v,details:E}=l.details(b);if(_)return _;if(y.errors.stack)return new l.ValidationError(v,E,d);const R=Error.stackTraceLimit;Error.stackTraceLimit=0;const w=new l.ValidationError(v,E,d);return Error.stackTraceLimit=R,w},l.details=function(b,d={}){let y=[];const _=[];for(const v of b){if(v instanceof Error){if(d.override!==!1)return{override:v};const R=v.toString();y.push(R),_.push({message:R,type:"override",context:{error:v}});continue}const E=v.toString();y.push(E),_.push({message:E,path:v.path.filter(R=>typeof R!="object"),type:v.code,context:v.local})}return y.length>1&&(y=[...new Set(y)]),{message:y.join(". "),details:_}},l.ValidationError=class extends Error{constructor(b,d,y){super(b),this._original=y,this.details=d}static isError(b){return b instanceof l.ValidationError}},l.ValidationError.prototype.isJoi=!0,l.ValidationError.prototype.name="ValidationError",l.ValidationError.prototype.annotate=c.error},8901:(o,l,h)=>{const c=h(375),m=h(8571),g=h(8160),b=h(6914),d={};l.type=function(y,_){const v=Object.getPrototypeOf(y),E=m(v),R=y._assign(Object.create(E)),w=Object.assign({},_);delete w.base,E._definition=w;const A=v._definition||{};w.messages=b.merge(A.messages,w.messages),w.properties=Object.assign({},A.properties,w.properties),R.type=w.type,w.flags=Object.assign({},A.flags,w.flags);const x=Object.assign({},A.terms);if(w.terms)for(const O in w.terms){const S=w.terms[O];c(R.$_terms[O]===void 0,"Invalid term override for",w.type,O),R.$_terms[O]=S.init,x[O]=S}w.terms=x,w.args||(w.args=A.args),w.prepare=d.prepare(w.prepare,A.prepare),w.coerce&&(typeof w.coerce=="function"&&(w.coerce={method:w.coerce}),w.coerce.from&&!Array.isArray(w.coerce.from)&&(w.coerce={method:w.coerce.method,from:[].concat(w.coerce.from)})),w.coerce=d.coerce(w.coerce,A.coerce),w.validate=d.validate(w.validate,A.validate);const M=Object.assign({},A.rules);if(w.rules)for(const O in w.rules){const S=w.rules[O];c(typeof S=="object","Invalid rule definition for",w.type,O);let C=S.method;if(C===void 0&&(C=function(){return this.$_addRule(O)}),C&&(c(!E[O],"Rule conflict in",w.type,O),E[O]=C),c(!M[O],"Rule conflict in",w.type,O),M[O]=S,S.alias){const D=[].concat(S.alias);for(const L of D)E[L]=S.method}S.args&&(S.argsByName=new Map,S.args=S.args.map(D=>(typeof D=="string"&&(D={name:D}),c(!S.argsByName.has(D.name),"Duplicated argument name",D.name),g.isSchema(D.assert)&&(D.assert=D.assert.strict().label(D.name)),S.argsByName.set(D.name,D),D)))}w.rules=M;const V=Object.assign({},A.modifiers);if(w.modifiers)for(const O in w.modifiers){c(!E[O],"Rule conflict in",w.type,O);const S=w.modifiers[O];c(typeof S=="function","Invalid modifier definition for",w.type,O);const C=function(D){return this.rule({[O]:D})};E[O]=C,V[O]=S}if(w.modifiers=V,w.overrides){E._super=v,R.$_super={};for(const O in w.overrides)c(v[O],"Cannot override missing",O),w.overrides[O][g.symbols.parent]=v[O],R.$_super[O]=v[O].bind(R);Object.assign(E,w.overrides)}w.cast=Object.assign({},A.cast,w.cast);const P=Object.assign({},A.manifest,w.manifest);return P.build=d.build(w.manifest&&w.manifest.build,A.manifest&&A.manifest.build),w.manifest=P,w.rebuild=d.rebuild(w.rebuild,A.rebuild),R},d.build=function(y,_){return y&&_?function(v,E){return _(y(v,E),E)}:y||_},d.coerce=function(y,_){return y&&_?{from:y.from&&_.from?[...new Set([...y.from,..._.from])]:null,method(v,E){let R;if((!_.from||_.from.includes(typeof v))&&(R=_.method(v,E),R)){if(R.errors||R.value===void 0)return R;v=R.value}if(!y.from||y.from.includes(typeof v)){const w=y.method(v,E);if(w)return w}return R}}:y||_},d.prepare=function(y,_){return y&&_?function(v,E){const R=y(v,E);if(R){if(R.errors||R.value===void 0)return R;v=R.value}return _(v,E)||R}:y||_},d.rebuild=function(y,_){return y&&_?function(v){_(v),y(v)}:y||_},d.validate=function(y,_){return y&&_?function(v,E){const R=_(v,E);if(R){if(R.errors&&(!Array.isArray(R.errors)||R.errors.length))return R;v=R.value}return y(v,E)||R}:y||_}},5107:(o,l,h)=>{const c=h(375),m=h(8571),g=h(8652),b=h(8160),d=h(3292),y=h(6354),_=h(8901),v=h(9708),E=h(6133),R=h(3328),w=h(1152);let A;const x={types:{alternatives:h(4946),any:h(8068),array:h(546),boolean:h(4937),date:h(7500),function:h(390),link:h(8785),number:h(3832),object:h(8966),string:h(7417),symbol:h(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const M={_types:new Set(Object.keys(x.types))};for(const V of M._types)M[V]=function(...P){return c(!P.length||["alternatives","link","object"].includes(V),"The",V,"type does not allow arguments"),x.generate(this,x.types[V],P)};for(const V of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])M[V]=function(...P){return this.any()[V](...P)};Object.assign(M,x.methods);for(const V in x.aliases){const P=x.aliases[V];M[V]=M[P]}return M.x=M.expression,w.setup&&w.setup(M),M}};x.methods={ValidationError:y.ValidationError,version:b.version,cache:g.provider,assert(M,V,...P){x.assert(M,V,!0,P)},attempt:(M,V,...P)=>x.assert(M,V,!1,P),build(M){return c(typeof v.build=="function","Manifest functionality disabled"),v.build(this,M)},checkPreferences(M){b.checkPreferences(M)},compile(M,V){return d.compile(this,M,V)},defaults(M){c(typeof M=="function","modifier must be a function");const V=Object.assign({},this);for(const P of V._types){const O=M(V[P]());c(b.isSchema(O),"modifier must return a valid schema object"),V[P]=function(...S){return x.generate(this,O,S)}}return V},expression:(...M)=>new R(...M),extend(...M){b.verifyFlat(M,"extend"),A=A||h(3378),c(M.length,"You need to provide at least one extension"),this.assert(M,A.extensions);const V=Object.assign({},this);V._types=new Set(V._types);for(let P of M){typeof P=="function"&&(P=P(V)),this.assert(P,A.extension);const O=x.expandExtension(P,V);for(const S of O){c(V[S.type]===void 0||V._types.has(S.type),"Cannot override name",S.type);const C=S.base||this.any(),D=_.type(C,S);V._types.add(S.type),V[S.type]=function(...L){return x.generate(this,D,L)}}}return V},isError:y.ValidationError.isError,isExpression:R.isTemplate,isRef:E.isRef,isSchema:b.isSchema,in:(...M)=>E.in(...M),override:b.symbols.override,ref:(...M)=>E.create(...M),types(){const M={};for(const V of this._types)M[V]=this[V]();for(const V in x.aliases)M[V]=this[V]();return M}},x.assert=function(M,V,P,O){const S=O[0]instanceof Error||typeof O[0]=="string"?O[0]:null,C=S!==null?O[1]:O[0],D=V.validate(M,b.preferences({errors:{stack:!0}},C||{}));let L=D.error;if(!L)return D.value;if(S instanceof Error)throw S;const $=P&&typeof L.annotate=="function"?L.annotate():L.message;throw L instanceof y.ValidationError==0&&(L=m(L)),L.message=S?`${S} ${$}`:$,L},x.generate=function(M,V,P){return c(M,"Must be invoked on a Joi instance."),V.$_root=M,V._definition.args&&P.length?V._definition.args(V,...P):V},x.expandExtension=function(M,V){if(typeof M.type=="string")return[M];const P=[];for(const O of V._types)if(M.type.test(O)){const S=Object.assign({},M);S.type=O,S.base=V[O](),P.push(S)}return P},o.exports=x.root()},6914:(o,l,h)=>{const c=h(375),m=h(8571),g=h(3328);l.compile=function(b,d){if(typeof b=="string")return c(!d,"Cannot set single message string"),new g(b);if(g.isTemplate(b))return c(!d,"Cannot set single message template"),b;c(typeof b=="object"&&!Array.isArray(b),"Invalid message options"),d=d?m(d):{};for(let y in b){const _=b[y];if(y==="root"||g.isTemplate(_)){d[y]=_;continue}if(typeof _=="string"){d[y]=new g(_);continue}c(typeof _=="object"&&!Array.isArray(_),"Invalid message for",y);const v=y;for(y in d[v]=d[v]||{},_){const E=_[y];y==="root"||g.isTemplate(E)?d[v][y]=E:(c(typeof E=="string","Invalid message for",y,"in",v),d[v][y]=new g(E))}}return d},l.decompile=function(b){const d={};for(let y in b){const _=b[y];if(y==="root"){d.root=_;continue}if(g.isTemplate(_)){d[y]=_.describe({compact:!0});continue}const v=y;for(y in d[v]={},_){const E=_[y];y!=="root"?d[v][y]=E.describe({compact:!0}):d[v].root=E}}return d},l.merge=function(b,d){if(!b)return l.compile(d);if(!d)return b;if(typeof d=="string")return new g(d);if(g.isTemplate(d))return d;const y=m(b);for(let _ in d){const v=d[_];if(_==="root"||g.isTemplate(v)){y[_]=v;continue}if(typeof v=="string"){y[_]=new g(v);continue}c(typeof v=="object"&&!Array.isArray(v),"Invalid message for",_);const E=_;for(_ in y[E]=y[E]||{},v){const R=v[_];_==="root"||g.isTemplate(R)?y[E][_]=R:(c(typeof R=="string","Invalid message for",_,"in",E),y[E][_]=new g(R))}}return y}},2294:(o,l,h)=>{const c=h(375),m=h(8160),g=h(6133),b={};l.Ids=b.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const d=new b.Ids;return d._byId=new Map(this._byId),d._byKey=new Map(this._byKey),d._schemaChain=this._schemaChain,d}concat(d){d._schemaChain&&(this._schemaChain=!0);for(const[y,_]of d._byId.entries())c(!this._byKey.has(y),"Schema id conflicts with existing key:",y),this._byId.set(y,_);for(const[y,_]of d._byKey.entries())c(!this._byId.has(y),"Schema key conflicts with existing id:",y),this._byKey.set(y,_)}fork(d,y,_){const v=this._collect(d);v.push({schema:_});const E=v.shift();let R={id:E.id,schema:y(E.schema)};c(m.isSchema(R.schema),"adjuster function failed to return a joi schema type");for(const w of v)R={id:w.id,schema:b.fork(w.schema,R.id,R.schema)};return R.schema}labels(d,y=[]){const _=d[0],v=this._get(_);if(!v)return[...y,...d].join(".");const E=d.slice(1);return y=[...y,v.schema._flags.label||_],E.length?v.schema._ids.labels(E,y):y.join(".")}reach(d,y=[]){const _=d[0],v=this._get(_);c(v,"Schema does not contain path",[...y,...d].join("."));const E=d.slice(1);return E.length?v.schema._ids.reach(E,[...y,_]):v.schema}register(d,{key:y}={}){if(!d||!m.isSchema(d))return;(d.$_property("schemaChain")||d._ids._schemaChain)&&(this._schemaChain=!0);const _=d._flags.id;if(_){const v=this._byId.get(_);c(!v||v.schema===d,"Cannot add different schemas with the same id:",_),c(!this._byKey.has(_),"Schema id conflicts with existing key:",_),this._byId.set(_,{schema:d,id:_})}y&&(c(!this._byKey.has(y),"Schema already contains key:",y),c(!this._byId.has(y),"Schema key conflicts with existing id:",y),this._byKey.set(y,{schema:d,id:y}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(d,y=[],_=[]){const v=d[0],E=this._get(v);c(E,"Schema does not contain path",[...y,...d].join(".")),_=[E,..._];const R=d.slice(1);return R.length?E.schema._ids._collect(R,[...y,v],_):_}_get(d){return this._byId.get(d)||this._byKey.get(d)}},b.fork=function(d,y,_){const v=l.schema(d,{each:(E,{key:R})=>{if(y===(E._flags.id||R))return _},ref:!1});return v?v.$_mutateRebuild():d},l.schema=function(d,y){let _;for(const v in d._flags){if(v[0]==="_")continue;const E=b.scan(d._flags[v],{source:"flags",name:v},y);E!==void 0&&(_=_||d.clone(),_._flags[v]=E)}for(let v=0;v<d._rules.length;++v){const E=d._rules[v],R=b.scan(E.args,{source:"rules",name:E.name},y);if(R!==void 0){_=_||d.clone();const w=Object.assign({},E);w.args=R,_._rules[v]=w,_._singleRules.get(E.name)===E&&_._singleRules.set(E.name,w)}}for(const v in d.$_terms){if(v[0]==="_")continue;const E=b.scan(d.$_terms[v],{source:"terms",name:v},y);E!==void 0&&(_=_||d.clone(),_.$_terms[v]=E)}return _},b.scan=function(d,y,_,v,E){const R=v||[];if(d===null||typeof d!="object")return;let w;if(Array.isArray(d)){for(let A=0;A<d.length;++A){const x=y.source==="terms"&&y.name==="keys"&&d[A].key,M=b.scan(d[A],y,_,[A,...R],x);M!==void 0&&(w=w||d.slice(),w[A]=M)}return w}if(_.schema!==!1&&m.isSchema(d)||_.ref!==!1&&g.isRef(d)){const A=_.each(d,{...y,path:R,key:E});return A===d?void 0:A}for(const A in d){if(A[0]==="_")continue;const x=b.scan(d[A],y,_,[A,...R],E);x!==void 0&&(w=w||Object.assign({},d),w[A]=x)}return w}},6133:(o,l,h)=>{const c=h(375),m=h(8571),g=h(9621),b=h(8160);let d;const y={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};l.create=function(_,v={}){c(typeof _=="string","Invalid reference key:",_),b.assertOptions(v,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),c(!v.prefix||typeof v.prefix=="object","options.prefix must be of type object");const E=Object.assign({},y.defaults,v);delete E.prefix;const R=E.separator,w=y.context(_,R,v.prefix);if(E.type=w.type,_=w.key,E.type==="value")if(w.root&&(c(!R||_[0]!==R,"Cannot specify relative path with root prefix"),E.ancestor="root",_||(_=null)),R&&R===_)_=null,E.ancestor=0;else if(E.ancestor!==void 0)c(!R||!_||_[0]!==R,"Cannot combine prefix with ancestor option");else{const[A,x]=y.ancestor(_,R);x&&(_=_.slice(x))===""&&(_=null),E.ancestor=A}return E.path=R?_===null?[]:_.split(R):[_],new y.Ref(E)},l.in=function(_,v={}){return l.create(_,{...v,in:!0})},l.isRef=function(_){return!!_&&!!_[b.symbols.ref]},y.Ref=class{constructor(_){c(typeof _=="object","Invalid reference construction"),b.assertOptions(_,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),c([!1,void 0].includes(_.separator)||typeof _.separator=="string"&&_.separator.length===1,"Invalid separator"),c(!_.adjust||typeof _.adjust=="function","options.adjust must be a function"),c(!_.map||Array.isArray(_.map),"options.map must be an array"),c(!_.map||!_.adjust,"Cannot set both map and adjust options"),Object.assign(this,y.defaults,_),c(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(_,v,E,R,w={}){return c(!this.in||w.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(E.context,v,w):this.type==="local"?this._resolve(R,v,w):this.ancestor?this.ancestor==="root"?this._resolve(v.ancestors[v.ancestors.length-1],v,w):(c(this.ancestor<=v.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(v.ancestors[this.ancestor-1],v,w)):this._resolve(_,v,w)}_resolve(_,v,E){let R;if(this.type==="value"&&v.mainstay.shadow&&E.shadow!==!1&&(R=v.mainstay.shadow.get(this.absolute(v))),R===void 0&&(R=g(_,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(R=this.adjust(R)),this.map){const w=this.map.get(R);w!==void 0&&(R=w)}return v.mainstay&&v.mainstay.tracer.resolve(v,this,R),R}toString(){return this.display}absolute(_){return[..._.path.slice(0,-this.ancestor),...this.path]}clone(){return new y.Ref(this)}describe(){const _={path:this.path};this.type!=="value"&&(_.type=this.type),this.separator!=="."&&(_.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(_.ancestor=this.ancestor),this.map&&(_.map=[...this.map]);for(const v of["adjust","iterables","render"])this[v]!==null&&this[v]!==void 0&&(_[v]=this[v]);return this.in!==!1&&(_.in=!0),{ref:_}}updateDisplay(){const _=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${_}`);if(!this.separator)return void(this.display=`ref:${_}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${_}`);if(this.ancestor==="root")return void(this.display=`ref:root:${_}`);if(this.ancestor===1)return void(this.display=`ref:${_||".."}`);const v=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${v}${_||""}`}},y.Ref.prototype[b.symbols.ref]=!0,l.build=function(_){return(_=Object.assign({},y.defaults,_)).type==="value"&&_.ancestor===void 0&&(_.ancestor=1),new y.Ref(_)},y.context=function(_,v,E={}){if(_=_.trim(),E){const R=E.global===void 0?"$":E.global;if(R!==v&&_.startsWith(R))return{key:_.slice(R.length),type:"global"};const w=E.local===void 0?"#":E.local;if(w!==v&&_.startsWith(w))return{key:_.slice(w.length),type:"local"};const A=E.root===void 0?"/":E.root;if(A!==v&&_.startsWith(A))return{key:_.slice(A.length),type:"value",root:!0}}return{key:_,type:"value"}},y.ancestor=function(_,v){if(!v)return[1,0];if(_[0]!==v)return[1,0];if(_[1]!==v)return[0,1];let E=2;for(;_[E]===v;)++E;return[E-1,E]},l.toSibling=0,l.toParent=1,l.Manager=class{constructor(){this.refs=[]}register(_,v){if(_)if(v=v===void 0?l.toParent:v,Array.isArray(_))for(const E of _)this.register(E,v);else if(b.isSchema(_))for(const E of _._refs.refs)E.ancestor-v>=0&&this.refs.push({ancestor:E.ancestor-v,root:E.root});else l.isRef(_)&&_.type==="value"&&_.ancestor-v>=0&&this.refs.push({ancestor:_.ancestor-v,root:_.root}),d=d||h(3328),d.isTemplate(_)&&this.register(_.refs(),v)}get length(){return this.refs.length}clone(){const _=new l.Manager;return _.refs=m(this.refs),_}reset(){this.refs=[]}roots(){return this.refs.filter(_=>!_.ancestor).map(_=>_.root)}}},3378:(o,l,h)=>{const c=h(5107),m={};m.wrap=c.string().min(1).max(2).allow(!1),l.preferences=c.object({allowUnknown:c.boolean(),abortEarly:c.boolean(),artifacts:c.boolean(),cache:c.boolean(),context:c.object(),convert:c.boolean(),dateFormat:c.valid("date","iso","string","time","utc"),debug:c.boolean(),errors:{escapeHtml:c.boolean(),label:c.valid("path","key",!1),language:[c.string(),c.object().ref()],render:c.boolean(),stack:c.boolean(),wrap:{label:m.wrap,array:m.wrap,string:m.wrap}},externals:c.boolean(),messages:c.object(),noDefaults:c.boolean(),nonEnumerables:c.boolean(),presence:c.valid("required","optional","forbidden"),skipFunctions:c.boolean(),stripUnknown:c.object({arrays:c.boolean(),objects:c.boolean()}).or("arrays","objects").allow(!0,!1),warnings:c.boolean()}).strict(),m.nameRx=/^[a-zA-Z0-9]\w*$/,m.rule=c.object({alias:c.array().items(c.string().pattern(m.nameRx)).single(),args:c.array().items(c.string(),c.object({name:c.string().pattern(m.nameRx).required(),ref:c.boolean(),assert:c.alternatives([c.function(),c.object().schema()]).conditional("ref",{is:!0,then:c.required()}),normalize:c.function(),message:c.string().when("assert",{is:c.function(),then:c.required()})})),convert:c.boolean(),manifest:c.boolean(),method:c.function().allow(!1),multi:c.boolean(),validate:c.function()}),l.extension=c.object({type:c.alternatives([c.string(),c.object().regex()]).required(),args:c.function(),cast:c.object().pattern(m.nameRx,c.object({from:c.function().maxArity(1).required(),to:c.function().minArity(1).maxArity(2).required()})),base:c.object().schema().when("type",{is:c.object().regex(),then:c.forbidden()}),coerce:[c.function().maxArity(3),c.object({method:c.function().maxArity(3).required(),from:c.array().items(c.string()).single()})],flags:c.object().pattern(m.nameRx,c.object({setter:c.string(),default:c.any()})),manifest:{build:c.function().arity(2)},messages:[c.object(),c.string()],modifiers:c.object().pattern(m.nameRx,c.function().minArity(1).maxArity(2)),overrides:c.object().pattern(m.nameRx,c.function()),prepare:c.function().maxArity(3),rebuild:c.function().arity(1),rules:c.object().pattern(m.nameRx,m.rule),terms:c.object().pattern(m.nameRx,c.object({init:c.array().allow(null).required(),manifest:c.object().pattern(/.+/,[c.valid("schema","single"),c.object({mapped:c.object({from:c.string().required(),to:c.string().required()}).required()})])})),validate:c.function().maxArity(3)}).strict(),l.extensions=c.array().items(c.object(),c.function().arity(1)).strict(),m.desc={buffer:c.object({buffer:c.string()}),func:c.object({function:c.function().required(),options:{literal:!0}}),override:c.object({override:!0}),ref:c.object({ref:c.object({type:c.valid("value","global","local"),path:c.array().required(),separator:c.string().length(1).allow(!1),ancestor:c.number().min(0).integer().allow("root"),map:c.array().items(c.array().length(2)).min(1),adjust:c.function(),iterables:c.boolean(),in:c.boolean(),render:c.boolean()}).required()}),regex:c.object({regex:c.string().min(3)}),special:c.object({special:c.valid("deep").required()}),template:c.object({template:c.string().required(),options:c.object()}),value:c.object({value:c.alternatives([c.object(),c.array()]).required()})},m.desc.entity=c.alternatives([c.array().items(c.link("...")),c.boolean(),c.function(),c.number(),c.string(),m.desc.buffer,m.desc.func,m.desc.ref,m.desc.regex,m.desc.special,m.desc.template,m.desc.value,c.link("/")]),m.desc.values=c.array().items(null,c.boolean(),c.function(),c.number().allow(1/0,-1/0),c.string().allow(""),c.symbol(),m.desc.buffer,m.desc.func,m.desc.override,m.desc.ref,m.desc.regex,m.desc.template,m.desc.value),m.desc.messages=c.object().pattern(/.+/,[c.string(),m.desc.template,c.object().pattern(/.+/,[c.string(),m.desc.template])]),l.description=c.object({type:c.string().required(),flags:c.object({cast:c.string(),default:c.any(),description:c.string(),empty:c.link("/"),failover:m.desc.entity,id:c.string(),label:c.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:c.boolean(),unit:c.string()}).unknown(),preferences:{allowUnknown:c.boolean(),abortEarly:c.boolean(),artifacts:c.boolean(),cache:c.boolean(),convert:c.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:c.boolean(),label:["path","key"],language:[c.string(),m.desc.ref],wrap:{label:m.wrap,array:m.wrap}},externals:c.boolean(),messages:m.desc.messages,noDefaults:c.boolean(),nonEnumerables:c.boolean(),presence:["required","optional","forbidden"],skipFunctions:c.boolean(),stripUnknown:c.object({arrays:c.boolean(),objects:c.boolean()}).or("arrays","objects").allow(!0,!1),warnings:c.boolean()},allow:m.desc.values,invalid:m.desc.values,rules:c.array().min(1).items({name:c.string().required(),args:c.object().min(1),keep:c.boolean(),message:[c.string(),m.desc.messages],warn:c.boolean()}),keys:c.object().pattern(/.*/,c.link("/")),link:m.desc.ref}).pattern(/^[a-z]\w*$/,c.any())},493:(o,l,h)=>{const c=h(8571),m=h(9621),g=h(8160),b={value:Symbol("value")};o.exports=b.State=class{constructor(d,y,_){this.path=d,this.ancestors=y,this.mainstay=_.mainstay,this.schemas=_.schemas,this.debug=null}localize(d,y=null,_=null){const v=new b.State(d,y,this);return _&&v.schemas&&(v.schemas=[b.schemas(_),...v.schemas]),v}nest(d,y){const _=new b.State(this.path,this.ancestors,this);return _.schemas=_.schemas&&[b.schemas(d),..._.schemas],_.debug=y,_}shadow(d,y){this.mainstay.shadow=this.mainstay.shadow||new b.Shadow,this.mainstay.shadow.set(this.path,d,y)}snapshot(){this.mainstay.shadow&&(this._snapshot=c(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},b.schemas=function(d){return g.isSchema(d)?{schema:d}:d},b.Shadow=class{constructor(){this._values=null}set(d,y,_){if(!d.length||_==="strip"&&typeof d[d.length-1]=="number")return;this._values=this._values||new Map;let v=this._values;for(let E=0;E<d.length;++E){const R=d[E];let w=v.get(R);w||(w=new Map,v.set(R,w)),v=w}v[b.value]=y}get(d){const y=this.node(d);if(y)return y[b.value]}node(d){if(this._values)return m(this._values,d,{iterables:!0})}override(d,y){if(!this._values)return;const _=d.slice(0,-1),v=d[d.length-1],E=m(this._values,_,{iterables:!0});y?E.set(v,y):E&&E.delete(v)}}},3328:(o,l,h)=>{const c=h(375),m=h(8571),g=h(5277),b=h(1447),d=h(8160),y=h(6354),_=h(6133),v={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};o.exports=v.Template=class{constructor(E,R){if(c(typeof E=="string","Template source must be a string"),c(!E.includes("\0")&&!E.includes(""),"Template source cannot contain reserved control characters"),this.source=E,this.rendered=E,this._template=null,R){const{functions:w,...A}=R;this._settings=Object.keys(A).length?m(A):void 0,this._functions=w,this._functions&&(c(Object.keys(this._functions).every(x=>typeof x=="string"),"Functions keys must be strings"),c(Object.values(this._functions).every(x=>typeof x=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const E=v.encode(this.source),R=v.split(E);let w=!1;const A=[],x=R.shift();x&&A.push(x);for(const M of R){const V=M[0]!=="{",P=V?"}":"}}",O=M.indexOf(P);if(O===-1||M[1]==="{"){A.push(`{${v.decode(M)}`);continue}let S=M.slice(V?0:1,O);const C=S[0]===":";C&&(S=S.slice(1));const D=this._ref(v.decode(S),{raw:V,wrapped:C});A.push(D),typeof D!="string"&&(w=!0);const L=M.slice(O+P.length);L&&A.push(v.decode(L))}w?this._template=A:this.rendered=A.join("")}static date(E,R){return v.dateFormat[R.dateFormat].call(E)}describe(E={}){if(!this._settings&&E.compact)return this.source;const R={template:this.source};return this._settings&&(R.options=this._settings),this._functions&&(R.functions=this._functions),R}static build(E){return new v.Template(E.template,E.options||E.functions?{...E.options,functions:E.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(E){return!!E&&!!E[d.symbols.template]}refs(){if(!this._template)return;const E=[];for(const R of this._template)typeof R!="string"&&E.push(...R.refs);return E}resolve(E,R,w,A){return this._template&&this._template.length===1?this._part(this._template[0],E,R,w,A,{}):this.render(E,R,w,A)}_part(E,...R){return E.ref?E.ref.resolve(...R):E.formula.evaluate(R)}render(E,R,w,A,x={}){if(!this.isDynamic())return this.rendered;const M=[];for(const V of this._template)if(typeof V=="string")M.push(V);else{const P=this._part(V,E,R,w,A,x),O=v.stringify(P,E,R,w,A,x);if(O!==void 0){const S=V.raw||(x.errors&&x.errors.escapeHtml)===!1?O:g(O);M.push(v.wrap(S,V.wrapped&&w.errors.wrap.label))}}return M.join("")}_ref(E,{raw:R,wrapped:w}){const A=[],x=V=>{const P=_.create(V,this._settings);return A.push(P),O=>{const S=P.resolve(...O);return S!==void 0?S:null}};try{const V=this._functions?{...v.functions,...this._functions}:v.functions;var M=new b.Parser(E,{reference:x,functions:V,constants:v.constants})}catch(V){throw V.message=`Invalid template variable "${E}" fails due to: ${V.message}`,V}if(M.single){if(M.single.type==="reference"){const V=A[0];return{ref:V,raw:R,refs:A,wrapped:w||V.type==="local"&&V.key==="label"}}return v.stringify(M.single.value)}return{formula:M,raw:R,refs:A}}toString(){return this.source}},v.Template.prototype[d.symbols.template]=!0,v.Template.prototype.isImmutable=!0,v.encode=function(E){return E.replace(/\\(\{+)/g,(R,w)=>v.opens.slice(0,w.length)).replace(/\\(\}+)/g,(R,w)=>v.closes.slice(0,w.length))},v.decode=function(E){return E.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},v.split=function(E){const R=[];let w="";for(let A=0;A<E.length;++A){const x=E[A];if(x==="{"){let M="";for(;A+1<E.length&&E[A+1]==="{";)M+="{",++A;R.push(w),w=M}else w+=x}return R.push(w),R},v.wrap=function(E,R){return R?R.length===1?`${R}${E}${R}`:`${R[0]}${E}${R[1]}`:E},v.stringify=function(E,R,w,A,x,M={}){const V=typeof E,P=A&&A.errors&&A.errors.wrap||{};let O=!1;if(_.isRef(E)&&E.render&&(O=E.in,E=E.resolve(R,w,A,x,{in:E.in,...M})),E===null)return"null";if(V==="string")return v.wrap(E,M.arrayItems&&P.string);if(V==="number"||V==="function"||V==="symbol")return E.toString();if(V!=="object")return JSON.stringify(E);if(E instanceof Date)return v.Template.date(E,A);if(E instanceof Map){const C=[];for(const[D,L]of E.entries())C.push(`${D.toString()} -> ${L.toString()}`);E=C}if(!Array.isArray(E))return E.toString();const S=[];for(const C of E)S.push(v.stringify(C,R,w,A,x,{arrayItems:!0,...M}));return v.wrap(S.join(", "),!O&&P.array)},v.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},v.functions={if:(E,R,w)=>E?R:w,length:E=>typeof E=="string"?E.length:E&&typeof E=="object"?Array.isArray(E)?E.length:Object.keys(E).length:null,msg(E){const[R,w,A,x,M]=this,V=M.messages;if(!V)return"";const P=y.template(R,V[0],E,w,A)||y.template(R,V[1],E,w,A);return P?P.render(R,w,A,x,M):""},number:E=>typeof E=="number"?E:typeof E=="string"?parseFloat(E):typeof E=="boolean"?E?1:0:E instanceof Date?E.getTime():null}},4946:(o,l,h)=>{const c=h(375),m=h(1687),g=h(8068),b=h(8160),d=h(3292),y=h(6354),_=h(6133),v={};o.exports=g.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:_.toSibling}},args:(E,...R)=>R.length===1&&Array.isArray(R[0])?E.try(...R[0]):E.try(...R),validate(E,R){const{schema:w,error:A,state:x,prefs:M}=R;if(w._flags.match){const P=[],O=[];for(let C=0;C<w.$_terms.matches.length;++C){const D=w.$_terms.matches[C],L=x.nest(D.schema,`match.${C}`);L.snapshot();const $=D.schema.$_validate(E,L,M);$.errors?(O.push($.errors),L.restore()):(P.push($.value),L.commit())}if(P.length===0)return{errors:A("alternatives.any",{details:O.map(C=>y.details(C,{override:!1}))})};if(w._flags.match==="one")return P.length===1?{value:P[0]}:{errors:A("alternatives.one")};if(P.length!==w.$_terms.matches.length)return{errors:A("alternatives.all",{details:O.map(C=>y.details(C,{override:!1}))})};const S=C=>C.$_terms.matches.some(D=>D.schema.type==="object"||D.schema.type==="alternatives"&&S(D.schema));return S(w)?{value:P.reduce((C,D)=>m(C,D,{mergeArrays:!1}))}:{value:P[P.length-1]}}const V=[];for(let P=0;P<w.$_terms.matches.length;++P){const O=w.$_terms.matches[P];if(O.schema){const D=x.nest(O.schema,`match.${P}`);D.snapshot();const L=O.schema.$_validate(E,D,M);if(!L.errors)return D.commit(),L;D.restore(),V.push({schema:O.schema,reports:L.errors});continue}const S=O.ref?O.ref.resolve(E,x,M):E,C=O.is?[O]:O.switch;for(let D=0;D<C.length;++D){const L=C[D],{is:$,then:j,otherwise:ce}=L,pe=`match.${P}${O.switch?"."+D:""}`;if($.$_match(S,x.nest($,`${pe}.is`),M)){if(j)return j.$_validate(E,x.nest(j,`${pe}.then`),M)}else if(ce)return ce.$_validate(E,x.nest(ce,`${pe}.otherwise`),M)}}return v.errors(V,R)},rules:{conditional:{method(E,R){c(!this._flags._endedSwitch,"Unreachable condition"),c(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),c(R.break===void 0,"Cannot use break option with alternatives conditional");const w=this.clone(),A=d.when(w,E,R),x=A.is?[A]:A.switch;for(const M of x)if(M.then&&M.otherwise){w.$_setFlag("_endedSwitch",!0,{clone:!1});break}return w.$_terms.matches.push(A),w.$_mutateRebuild()}},match:{method(E){if(c(["any","one","all"].includes(E),"Invalid alternatives match mode",E),E!=="any")for(const R of this.$_terms.matches)c(R.schema,"Cannot combine match mode",E,"with conditional rules");return this.$_setFlag("match",E)}},try:{method(...E){c(E.length,"Missing alternative schemas"),b.verifyFlat(E,"try"),c(!this._flags._endedSwitch,"Unreachable condition");const R=this.clone();for(const w of E)R.$_terms.matches.push({schema:R.$_compile(w)});return R.$_mutateRebuild()}}},overrides:{label(E){return this.$_parent("label",E).$_modify({each:(R,w)=>w.path[0]!=="is"&&typeof R._flags.label!="string"?R.label(E):void 0,ref:!1})}},rebuild(E){E.$_modify({each:R=>{b.isSchema(R)&&R.type==="array"&&E.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(E,R){if(R.matches)for(const w of R.matches){const{schema:A,ref:x,is:M,not:V,then:P,otherwise:O}=w;E=A?E.try(A):x?E.conditional(x,{is:M,then:P,not:V,otherwise:O,switch:w.switch}):E.conditional(M,{then:P,otherwise:O})}return E}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),v.errors=function(E,{error:R,state:w}){if(!E.length)return{errors:R("alternatives.any")};if(E.length===1)return{errors:E[0].reports};const A=new Set,x=[];for(const{reports:M,schema:V}of E){if(M.length>1)return v.unmatched(E,R);const P=M[0];if(P instanceof y.Report==0)return v.unmatched(E,R);if(P.state.path.length!==w.path.length){x.push({type:V.type,report:P});continue}if(P.code==="any.only"){for(const C of P.local.valids)A.add(C);continue}const[O,S]=P.code.split(".");S!=="base"?x.push({type:V.type,report:P}):P.code==="object.base"?A.add(P.local.type):A.add(O)}return x.length?x.length===1?{errors:x[0].report}:v.unmatched(E,R):{errors:R("alternatives.types",{types:[...A]})}},v.unmatched=function(E,R){const w=[];for(const A of E)w.push(...A.reports);return{errors:R("alternatives.match",y.details(w,{override:!1}))}}},8068:(o,l,h)=>{const c=h(375),m=h(7629),g=h(8160),b=h(6914);o.exports=m.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(d,y){return c(typeof d=="function","Method must be a function"),c(y===void 0||y&&typeof y=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:d,description:y}})},validate(d,y,{method:_}){try{return _(d,y)}catch(v){return y.error("any.custom",{error:v})}},args:["method","description"],multi:!0},messages:{method(d){return this.prefs({messages:d})}},shared:{method(d){c(g.isSchema(d)&&d._flags.id,"Schema must be a schema with an id");const y=this.clone();return y.$_terms.shared=y.$_terms.shared||[],y.$_terms.shared.push(d),y.$_mutateRegister(d),y}},warning:{method(d,y){return c(d&&typeof d=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:d,local:y},warn:!0})},validate:(d,y,{code:_,local:v})=>y.error(_,v),args:["code","local"],multi:!0}},modifiers:{keep(d,y=!0){d.keep=y},message(d,y){d.message=b.compile(y)},warn(d,y=!0){d.warn=y}},manifest:{build(d,y){for(const _ in y){const v=y[_];if(["examples","externals","metas","notes","tags"].includes(_))for(const E of v)d=d[_.slice(0,-1)](E);else if(_!=="alterations")if(_!=="whens"){if(_==="shared")for(const E of v)d=d.shared(E)}else for(const E of v){const{ref:R,is:w,not:A,then:x,otherwise:M,concat:V}=E;d=V?d.concat(V):R?d.when(R,{is:w,not:A,then:x,otherwise:M,switch:E.switch,break:E.break}):d.when(w,{then:x,otherwise:M,break:E.break})}else{const E={};for(const{target:R,adjuster:w}of v)E[R]=w;d=d.alter(E)}}return d}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(o,l,h)=>{const c=h(375),m=h(9474),g=h(9621),b=h(8068),d=h(8160),y=h(3292),_={};o.exports=b.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(v,{schema:E,state:R,prefs:w}){if(!Array.isArray(v))return;const A=E.$_getRule("sort");return A?_.sort(E,v,A.args.options,R,w):void 0}},validate(v,{schema:E,error:R}){if(!Array.isArray(v)){if(E._flags.single){const w=[v];return w[d.symbols.arraySingle]=!0,{value:w}}return{errors:R("array.base")}}if(E.$_getRule("items")||E.$_terms.externals)return{value:v.slice()}},rules:{has:{method(v){v=this.$_compile(v,{appendPath:!0});const E=this.$_addRule({name:"has",args:{schema:v}});return E.$_mutateRegister(v),E},validate(v,{state:E,prefs:R,error:w},{schema:A}){const x=[v,...E.ancestors];for(let V=0;V<v.length;++V){const P=E.localize([...E.path,V],x,A);if(A.$_match(v[V],P,R))return v}const M=A._flags.label;return M?w("array.hasKnown",{patternLabel:M}):w("array.hasUnknown",null)},multi:!0},items:{method(...v){d.verifyFlat(v,"items");const E=this.$_addRule("items");for(let R=0;R<v.length;++R){const w=d.tryWithPath(()=>this.$_compile(v[R]),R,{append:!0});E.$_terms.items.push(w)}return E.$_mutateRebuild()},validate(v,{schema:E,error:R,state:w,prefs:A,errorsArray:x}){const M=E.$_terms._requireds.slice(),V=E.$_terms.ordered.slice(),P=[...E.$_terms._inclusions,...M],O=!v[d.symbols.arraySingle];delete v[d.symbols.arraySingle];const S=x();let C=v.length;for(let D=0;D<C;++D){const L=v[D];let $=!1,j=!1;const ce=O?D:new Number(D),pe=[...w.path,ce];if(!E._flags.sparse&&L===void 0){if(S.push(R("array.sparse",{key:ce,path:pe,pos:D,value:void 0},w.localize(pe))),A.abortEarly)return S;V.shift();continue}const K=[v,...w.ancestors];for(const B of E.$_terms._exclusions)if(B.$_match(L,w.localize(pe,K,B),A,{presence:"ignore"})){if(S.push(R("array.excludes",{pos:D,value:L},w.localize(pe))),A.abortEarly)return S;$=!0,V.shift();break}if($)continue;if(E.$_terms.ordered.length){if(V.length){const B=V.shift(),re=B.$_validate(L,w.localize(pe,K,B),A);if(re.errors){if(S.push(...re.errors),A.abortEarly)return S}else if(B._flags.result==="strip")_.fastSplice(v,D),--D,--C;else{if(!E._flags.sparse&&re.value===void 0){if(S.push(R("array.sparse",{key:ce,path:pe,pos:D,value:void 0},w.localize(pe))),A.abortEarly)return S;continue}v[D]=re.value}continue}if(!E.$_terms.items.length){if(S.push(R("array.orderedLength",{pos:D,limit:E.$_terms.ordered.length})),A.abortEarly)return S;break}}const ae=[];let ye=M.length;for(let B=0;B<ye;++B){const re=w.localize(pe,K,M[B]);re.snapshot();const me=M[B].$_validate(L,re,A);if(ae[B]=me,!me.errors){if(re.commit(),v[D]=me.value,j=!0,_.fastSplice(M,B),--B,--ye,!E._flags.sparse&&me.value===void 0&&(S.push(R("array.sparse",{key:ce,path:pe,pos:D,value:void 0},w.localize(pe))),A.abortEarly))return S;break}re.restore()}if(j)continue;const Re=A.stripUnknown&&!!A.stripUnknown.arrays||!1;ye=P.length;for(const B of P){let re;const me=M.indexOf(B);if(me!==-1)re=ae[me];else{const he=w.localize(pe,K,B);if(he.snapshot(),re=B.$_validate(L,he,A),!re.errors){he.commit(),B._flags.result==="strip"?(_.fastSplice(v,D),--D,--C):E._flags.sparse||re.value!==void 0?v[D]=re.value:(S.push(R("array.sparse",{key:ce,path:pe,pos:D,value:void 0},w.localize(pe))),$=!0),j=!0;break}he.restore()}if(ye===1){if(Re){_.fastSplice(v,D),--D,--C,j=!0;break}if(S.push(...re.errors),A.abortEarly)return S;$=!0;break}}if(!$&&(E.$_terms._inclusions.length||E.$_terms._requireds.length)&&!j){if(Re){_.fastSplice(v,D),--D,--C;continue}if(S.push(R("array.includes",{pos:D,value:L},w.localize(pe))),A.abortEarly)return S}}return M.length&&_.fillMissedErrors(E,S,M,v,w,A),V.length&&(_.fillOrderedErrors(E,S,V,v,w,A),S.length||_.fillDefault(V,v,w,A)),S.length?S:v},priority:!0,manifest:!1},length:{method(v){return this.$_addRule({name:"length",args:{limit:v},operator:"="})},validate:(v,E,{limit:R},{name:w,operator:A,args:x})=>d.compare(v.length,R,A)?v:E.error("array."+w,{limit:x.limit,value:v}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(v){return this.$_addRule({name:"max",method:"length",args:{limit:v},operator:"<="})}},min:{method(v){return this.$_addRule({name:"min",method:"length",args:{limit:v},operator:">="})}},ordered:{method(...v){d.verifyFlat(v,"ordered");const E=this.$_addRule("items");for(let R=0;R<v.length;++R){const w=d.tryWithPath(()=>this.$_compile(v[R]),R,{append:!0});_.validateSingle(w,E),E.$_mutateRegister(w),E.$_terms.ordered.push(w)}return E.$_mutateRebuild()}},single:{method(v){const E=v===void 0||!!v;return c(!E||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",E)}},sort:{method(v={}){d.assertOptions(v,["by","order"]);const E={order:v.order||"ascending"};return v.by&&(E.by=y.ref(v.by,{ancestor:0}),c(!E.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:E}})},validate(v,{error:E,state:R,prefs:w,schema:A},{options:x}){const{value:M,errors:V}=_.sort(A,v,x,R,w);if(V)return V;for(let P=0;P<v.length;++P)if(v[P]!==M[P])return E("array.sort",{order:x.order,by:x.by?x.by.key:"value"});return v},convert:!0},sparse:{method(v){const E=v===void 0||!!v;return this._flags.sparse===E?this:(E?this.clone():this.$_addRule("items")).$_setFlag("sparse",E,{clone:!1})}},unique:{method(v,E={}){c(!v||typeof v=="function"||typeof v=="string","comparator must be a function or a string"),d.assertOptions(E,["ignoreUndefined","separator"]);const R={name:"unique",args:{options:E,comparator:v}};if(v)if(typeof v=="string"){const w=d.default(E.separator,".");R.path=w?v.split(w):[v]}else R.comparator=v;return this.$_addRule(R)},validate(v,{state:E,error:R,schema:w},{comparator:A,options:x},{comparator:M,path:V}){const P={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},O=M||m,S=x.ignoreUndefined;for(let C=0;C<v.length;++C){const D=V?g(v[C],V):v[C],L=M?P.custom:P[typeof D];if(c(L,"Failed to find unique map container for type",typeof D),L instanceof Map){const $=L.entries();let j;for(;!(j=$.next()).done;)if(O(j.value[0],D)){const ce=E.localize([...E.path,C],[v,...E.ancestors]),pe={pos:C,value:v[C],dupePos:j.value[1],dupeValue:v[j.value[1]]};return V&&(pe.path=A),R("array.unique",pe,ce)}L.set(D,C)}else{if((!S||D!==void 0)&&L[D]!==void 0){const $={pos:C,value:v[C],dupePos:L[D],dupeValue:v[L[D]]};return V&&($.path=A),R("array.unique",$,E.localize([...E.path,C],[v,...E.ancestors]))}L[D]=C}}return v},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(v,E)=>new Set(v)}},rebuild(v){v.$_terms._inclusions=[],v.$_terms._exclusions=[],v.$_terms._requireds=[];for(const E of v.$_terms.items)_.validateSingle(E,v),E._flags.presence==="required"?v.$_terms._requireds.push(E):E._flags.presence==="forbidden"?v.$_terms._exclusions.push(E):v.$_terms._inclusions.push(E);for(const E of v.$_terms.ordered)_.validateSingle(E,v)},manifest:{build:(v,E)=>(E.items&&(v=v.items(...E.items)),E.ordered&&(v=v.ordered(...E.ordered)),v)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),_.fillMissedErrors=function(v,E,R,w,A,x){const M=[];let V=0;for(const P of R){const O=P._flags.label;O?M.push(O):++V}M.length?V?E.push(v.$_createError("array.includesRequiredBoth",w,{knownMisses:M,unknownMisses:V},A,x)):E.push(v.$_createError("array.includesRequiredKnowns",w,{knownMisses:M},A,x)):E.push(v.$_createError("array.includesRequiredUnknowns",w,{unknownMisses:V},A,x))},_.fillOrderedErrors=function(v,E,R,w,A,x){const M=[];for(const V of R)V._flags.presence==="required"&&M.push(V);M.length&&_.fillMissedErrors(v,E,M,w,A,x)},_.fillDefault=function(v,E,R,w){const A=[];let x=!0;for(let M=v.length-1;M>=0;--M){const V=v[M],P=[E,...R.ancestors],O=V.$_validate(void 0,R.localize(R.path,P,V),w).value;if(x){if(O===void 0)continue;x=!1}A.unshift(O)}A.length&&E.push(...A)},_.fastSplice=function(v,E){let R=E;for(;R<v.length;)v[R++]=v[R];--v.length},_.validateSingle=function(v,E){(v.type==="array"||v._flags._arrayItems)&&(c(!E._flags.single,"Cannot specify array item with single rule enabled"),E.$_setFlag("_arrayItems",!0,{clone:!1}))},_.sort=function(v,E,R,w,A){const x=R.order==="ascending"?1:-1,M=-1*x,V=x,P=(O,S)=>{let C=_.compare(O,S,M,V);if(C!==null||(R.by&&(O=R.by.resolve(O,w,A),S=R.by.resolve(S,w,A)),C=_.compare(O,S,M,V),C!==null))return C;const D=typeof O;if(D!==typeof S)throw v.$_createError("array.sort.mismatching",E,null,w,A);if(D!=="number"&&D!=="string")throw v.$_createError("array.sort.unsupported",E,{type:D},w,A);return D==="number"?(O-S)*x:O<S?M:V};try{return{value:E.slice().sort(P)}}catch(O){return{errors:O}}},_.compare=function(v,E,R,w){return v===E?0:v===void 0?1:E===void 0?-1:v===null?w:E===null?R:null}},4937:(o,l,h)=>{const c=h(375),m=h(8068),g=h(8160),b=h(2036),d={isBool:function(y){return typeof y=="boolean"}};o.exports=m.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(y,{schema:_}){if(typeof y!="boolean"){if(typeof y=="string"){const v=_._flags.sensitive?y:y.toLowerCase();y=v==="true"||v!=="false"&&y}return typeof y!="boolean"&&(y=_.$_terms.truthy&&_.$_terms.truthy.has(y,null,null,!_._flags.sensitive)||(!_.$_terms.falsy||!_.$_terms.falsy.has(y,null,null,!_._flags.sensitive))&&y),{value:y}}},validate(y,{error:_}){if(typeof y!="boolean")return{value:y,errors:_("boolean.base")}},rules:{truthy:{method(...y){g.verifyFlat(y,"truthy");const _=this.clone();_.$_terms.truthy=_.$_terms.truthy||new b;for(let v=0;v<y.length;++v){const E=y[v];c(E!==void 0,"Cannot call truthy with undefined"),_.$_terms.truthy.add(E)}return _}},falsy:{method(...y){g.verifyFlat(y,"falsy");const _=this.clone();_.$_terms.falsy=_.$_terms.falsy||new b;for(let v=0;v<y.length;++v){const E=y[v];c(E!==void 0,"Cannot call falsy with undefined"),_.$_terms.falsy.add(E)}return _}},sensitive:{method(y=!0){return this.$_setFlag("sensitive",y)}}},cast:{number:{from:d.isBool,to:(y,_)=>y?1:0},string:{from:d.isBool,to:(y,_)=>y?"true":"false"}},manifest:{build:(y,_)=>(_.truthy&&(y=y.truthy(..._.truthy)),_.falsy&&(y=y.falsy(..._.falsy)),y)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(o,l,h)=>{const c=h(375),m=h(8068),g=h(8160),b=h(3328),d={isDate:function(y){return y instanceof Date}};o.exports=m.extend({type:"date",coerce:{from:["number","string"],method:(y,{schema:_})=>({value:d.parse(y,_._flags.format)||y})},validate(y,{schema:_,error:v,prefs:E}){if(y instanceof Date&&!isNaN(y.getTime()))return;const R=_._flags.format;return E.convert&&R&&typeof y=="string"?{value:y,errors:v("date.format",{format:R})}:{value:y,errors:v("date.base")}},rules:{compare:{method:!1,validate(y,_,{date:v},{name:E,operator:R,args:w}){const A=v==="now"?Date.now():v.getTime();return g.compare(y.getTime(),A,R)?y:_.error("date."+E,{limit:w.date,value:y})},args:[{name:"date",ref:!0,normalize:y=>y==="now"?y:d.parse(y),assert:y=>y!==null,message:"must have a valid date format"}]},format:{method(y){return c(["iso","javascript","unix"].includes(y),"Unknown date format",y),this.$_setFlag("format",y)}},greater:{method(y){return this.$_addRule({name:"greater",method:"compare",args:{date:y},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(y){return this.$_addRule({name:"less",method:"compare",args:{date:y},operator:"<"})}},max:{method(y){return this.$_addRule({name:"max",method:"compare",args:{date:y},operator:"<="})}},min:{method(y){return this.$_addRule({name:"min",method:"compare",args:{date:y},operator:">="})}},timestamp:{method(y="javascript"){return c(["javascript","unix"].includes(y),'"type" must be one of "javascript, unix"'),this.format(y)}}},cast:{number:{from:d.isDate,to:(y,_)=>y.getTime()},string:{from:d.isDate,to:(y,{prefs:_})=>b.date(y,_)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),d.parse=function(y,_){if(y instanceof Date)return y;if(typeof y!="string"&&(isNaN(y)||!isFinite(y))||/^\s*$/.test(y))return null;if(_==="iso")return g.isIsoDate(y)?d.date(y.toString()):null;const v=y;if(typeof y=="string"&&/^[+-]?\d+(\.\d+)?$/.test(y)&&(y=parseFloat(y)),_){if(_==="javascript")return d.date(1*y);if(_==="unix")return d.date(1e3*y);if(typeof v=="string")return null}return d.date(y)},d.date=function(y){const _=new Date(y);return isNaN(_.getTime())?null:_}},390:(o,l,h)=>{const c=h(375),m=h(7824);o.exports=m.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(g){return c(Number.isSafeInteger(g)&&g>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:g}})},validate:(g,b,{n:d})=>g.length===d?g:b.error("function.arity",{n:d})},class:{method(){return this.$_addRule("class")},validate:(g,b)=>/^\s*class\s/.test(g.toString())?g:b.error("function.class",{value:g})},minArity:{method(g){return c(Number.isSafeInteger(g)&&g>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:g}})},validate:(g,b,{n:d})=>g.length>=d?g:b.error("function.minArity",{n:d})},maxArity:{method(g){return c(Number.isSafeInteger(g)&&g>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:g}})},validate:(g,b,{n:d})=>g.length<=d?g:b.error("function.maxArity",{n:d})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(o,l,h)=>{const c=h(978),m=h(375),g=h(8571),b=h(3652),d=h(8068),y=h(8160),_=h(3292),v=h(6354),E=h(6133),R=h(3328),w={renameDefaults:{alias:!1,multiple:!1,override:!1}};o.exports=d.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(A,x)=>A.keys(x),validate(A,{schema:x,error:M,state:V,prefs:P}){if(!A||typeof A!==x.$_property("typeof")||Array.isArray(A))return{value:A,errors:M("object.base",{type:x.$_property("typeof")})};if(!(x.$_terms.renames||x.$_terms.dependencies||x.$_terms.keys||x.$_terms.patterns||x.$_terms.externals))return;A=w.clone(A,P);const O=[];if(x.$_terms.renames&&!w.rename(x,A,V,P,O))return{value:A,errors:O};if(!x.$_terms.keys&&!x.$_terms.patterns&&!x.$_terms.dependencies)return{value:A,errors:O};const S=new Set(Object.keys(A));if(x.$_terms.keys){const C=[A,...V.ancestors];for(const D of x.$_terms.keys){const L=D.key,$=A[L];S.delete(L);const j=V.localize([...V.path,L],C,D),ce=D.schema.$_validate($,j,P);if(ce.errors){if(P.abortEarly)return{value:A,errors:ce.errors};ce.value!==void 0&&(A[L]=ce.value),O.push(...ce.errors)}else D.schema._flags.result==="strip"||ce.value===void 0&&$!==void 0?delete A[L]:ce.value!==void 0&&(A[L]=ce.value)}}if(S.size||x._flags._hasPatternMatch){const C=w.unknown(x,A,S,O,V,P);if(C)return C}if(x.$_terms.dependencies)for(const C of x.$_terms.dependencies){if(C.key!==null&&w.isPresent(C.options)(C.key.resolve(A,V,P,null,{shadow:!1}))===!1)continue;const D=w.dependencies[C.rel](x,C,A,V,P);if(D){const L=x.$_createError(D.code,A,D.context,V,P);if(P.abortEarly)return{value:A,errors:L};O.push(L)}}return{value:A,errors:O}},rules:{and:{method(...A){return y.verifyFlat(A,"and"),w.dependency(this,"and",null,A)}},append:{method(A){return A==null||Object.keys(A).length===0?this:this.keys(A)}},assert:{method(A,x,M){R.isTemplate(A)||(A=_.ref(A)),m(M===void 0||typeof M=="string","Message must be a string"),x=this.$_compile(x,{appendPath:!0});const V=this.$_addRule({name:"assert",args:{subject:A,schema:x,message:M}});return V.$_mutateRegister(A),V.$_mutateRegister(x),V},validate(A,{error:x,prefs:M,state:V},{subject:P,schema:O,message:S}){const C=P.resolve(A,V,M),D=E.isRef(P)?P.absolute(V):[];return O.$_match(C,V.localize(D,[A,...V.ancestors],O),M)?A:x("object.assert",{subject:P,message:S})},args:["subject","schema","message"],multi:!0},instance:{method(A,x){return m(typeof A=="function","constructor must be a function"),x=x||A.name,this.$_addRule({name:"instance",args:{constructor:A,name:x}})},validate:(A,x,{constructor:M,name:V})=>A instanceof M?A:x.error("object.instance",{type:V,value:A}),args:["constructor","name"]},keys:{method(A){m(A===void 0||typeof A=="object","Object schema must be a valid object"),m(!y.isSchema(A),"Object schema cannot be a joi schema");const x=this.clone();if(A)if(Object.keys(A).length){x.$_terms.keys=x.$_terms.keys?x.$_terms.keys.filter(M=>!A.hasOwnProperty(M.key)):new w.Keys;for(const M in A)y.tryWithPath(()=>x.$_terms.keys.push({key:M,schema:this.$_compile(A[M])}),M)}else x.$_terms.keys=new w.Keys;else x.$_terms.keys=null;return x.$_mutateRebuild()}},length:{method(A){return this.$_addRule({name:"length",args:{limit:A},operator:"="})},validate:(A,x,{limit:M},{name:V,operator:P,args:O})=>y.compare(Object.keys(A).length,M,P)?A:x.error("object."+V,{limit:O.limit,value:A}),args:[{name:"limit",ref:!0,assert:y.limit,message:"must be a positive integer"}]},max:{method(A){return this.$_addRule({name:"max",method:"length",args:{limit:A},operator:"<="})}},min:{method(A){return this.$_addRule({name:"min",method:"length",args:{limit:A},operator:">="})}},nand:{method(...A){return y.verifyFlat(A,"nand"),w.dependency(this,"nand",null,A)}},or:{method(...A){return y.verifyFlat(A,"or"),w.dependency(this,"or",null,A)}},oxor:{method(...A){return w.dependency(this,"oxor",null,A)}},pattern:{method(A,x,M={}){const V=A instanceof RegExp;V||(A=this.$_compile(A,{appendPath:!0})),m(x!==void 0,"Invalid rule"),y.assertOptions(M,["fallthrough","matches"]),V&&m(!A.flags.includes("g")&&!A.flags.includes("y"),"pattern should not use global or sticky mode"),x=this.$_compile(x,{appendPath:!0});const P=this.clone();P.$_terms.patterns=P.$_terms.patterns||[];const O={[V?"regex":"schema"]:A,rule:x};return M.matches&&(O.matches=this.$_compile(M.matches),O.matches.type!=="array"&&(O.matches=O.matches.$_root.array().items(O.matches)),P.$_mutateRegister(O.matches),P.$_setFlag("_hasPatternMatch",!0,{clone:!1})),M.fallthrough&&(O.fallthrough=!0),P.$_terms.patterns.push(O),P.$_mutateRegister(x),P}},ref:{method(){return this.$_addRule("ref")},validate:(A,x)=>E.isRef(A)?A:x.error("object.refType",{value:A})},regex:{method(){return this.$_addRule("regex")},validate:(A,x)=>A instanceof RegExp?A:x.error("object.regex",{value:A})},rename:{method(A,x,M={}){m(typeof A=="string"||A instanceof RegExp,"Rename missing the from argument"),m(typeof x=="string"||x instanceof R,"Invalid rename to argument"),m(x!==A,"Cannot rename key to same name:",A),y.assertOptions(M,["alias","ignoreUndefined","override","multiple"]);const V=this.clone();V.$_terms.renames=V.$_terms.renames||[];for(const P of V.$_terms.renames)m(P.from!==A,"Cannot rename the same key multiple times");return x instanceof R&&V.$_mutateRegister(x),V.$_terms.renames.push({from:A,to:x,options:c(w.renameDefaults,M)}),V}},schema:{method(A="any"){return this.$_addRule({name:"schema",args:{type:A}})},validate:(A,x,{type:M})=>!y.isSchema(A)||M!=="any"&&A.type!==M?x.error("object.schema",{type:M}):A},unknown:{method(A){return this.$_setFlag("unknown",A!==!1)}},with:{method(A,x,M={}){return w.dependency(this,"with",A,x,M)}},without:{method(A,x,M={}){return w.dependency(this,"without",A,x,M)}},xor:{method(...A){return y.verifyFlat(A,"xor"),w.dependency(this,"xor",null,A)}}},overrides:{default(A,x){return A===void 0&&(A=y.symbols.deepDefault),this.$_parent("default",A,x)}},rebuild(A){if(A.$_terms.keys){const x=new b.Sorter;for(const M of A.$_terms.keys)y.tryWithPath(()=>x.add(M,{after:M.schema.$_rootReferences(),group:M.key}),M.key);A.$_terms.keys=new w.Keys(...x.nodes)}},manifest:{build(A,x){if(x.keys&&(A=A.keys(x.keys)),x.dependencies)for(const{rel:M,key:V=null,peers:P,options:O}of x.dependencies)A=w.dependency(A,M,V,P,O);if(x.patterns)for(const{regex:M,schema:V,rule:P,fallthrough:O,matches:S}of x.patterns)A=A.pattern(M||V,P,{fallthrough:O,matches:S});if(x.renames)for(const{from:M,to:V,options:P}of x.renames)A=A.rename(M,V,P);return A}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),w.clone=function(A,x){if(typeof A=="object"){if(x.nonEnumerables)return g(A,{shallow:!0});const V=Object.create(Object.getPrototypeOf(A));return Object.assign(V,A),V}const M=function(...V){return A.apply(this,V)};return M.prototype=g(A.prototype),Object.defineProperty(M,"name",{value:A.name,writable:!1}),Object.defineProperty(M,"length",{value:A.length,writable:!1}),Object.assign(M,A),M},w.dependency=function(A,x,M,V,P){m(M===null||typeof M=="string",x,"key must be a strings"),P||(P=V.length>1&&typeof V[V.length-1]=="object"?V.pop():{}),y.assertOptions(P,["separator","isPresent"]),V=[].concat(V);const O=y.default(P.separator,"."),S=[];for(const D of V)m(typeof D=="string",x,"peers must be strings"),S.push(_.ref(D,{separator:O,ancestor:0,prefix:!1}));M!==null&&(M=_.ref(M,{separator:O,ancestor:0,prefix:!1}));const C=A.clone();return C.$_terms.dependencies=C.$_terms.dependencies||[],C.$_terms.dependencies.push(new w.Dependency(x,M,S,V,P)),C},w.dependencies={and(A,x,M,V,P){const O=[],S=[],C=x.peers.length,D=w.isPresent(x.options);for(const L of x.peers)D(L.resolve(M,V,P,null,{shadow:!1}))===!1?O.push(L.key):S.push(L.key);if(O.length!==C&&S.length!==C)return{code:"object.and",context:{present:S,presentWithLabels:w.keysToLabels(A,S),missing:O,missingWithLabels:w.keysToLabels(A,O)}}},nand(A,x,M,V,P){const O=[],S=w.isPresent(x.options);for(const L of x.peers)S(L.resolve(M,V,P,null,{shadow:!1}))&&O.push(L.key);if(O.length!==x.peers.length)return;const C=x.paths[0],D=x.paths.slice(1);return{code:"object.nand",context:{main:C,mainWithLabel:w.keysToLabels(A,C),peers:D,peersWithLabels:w.keysToLabels(A,D)}}},or(A,x,M,V,P){const O=w.isPresent(x.options);for(const S of x.peers)if(O(S.resolve(M,V,P,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:x.paths,peersWithLabels:w.keysToLabels(A,x.paths)}}},oxor(A,x,M,V,P){const O=[],S=w.isPresent(x.options);for(const D of x.peers)S(D.resolve(M,V,P,null,{shadow:!1}))&&O.push(D.key);if(!O.length||O.length===1)return;const C={peers:x.paths,peersWithLabels:w.keysToLabels(A,x.paths)};return C.present=O,C.presentWithLabels=w.keysToLabels(A,O),{code:"object.oxor",context:C}},with(A,x,M,V,P){const O=w.isPresent(x.options);for(const S of x.peers)if(O(S.resolve(M,V,P,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:x.key.key,mainWithLabel:w.keysToLabels(A,x.key.key),peer:S.key,peerWithLabel:w.keysToLabels(A,S.key)}}},without(A,x,M,V,P){const O=w.isPresent(x.options);for(const S of x.peers)if(O(S.resolve(M,V,P,null,{shadow:!1})))return{code:"object.without",context:{main:x.key.key,mainWithLabel:w.keysToLabels(A,x.key.key),peer:S.key,peerWithLabel:w.keysToLabels(A,S.key)}}},xor(A,x,M,V,P){const O=[],S=w.isPresent(x.options);for(const D of x.peers)S(D.resolve(M,V,P,null,{shadow:!1}))&&O.push(D.key);if(O.length===1)return;const C={peers:x.paths,peersWithLabels:w.keysToLabels(A,x.paths)};return O.length===0?{code:"object.missing",context:C}:(C.present=O,C.presentWithLabels=w.keysToLabels(A,O),{code:"object.xor",context:C})}},w.keysToLabels=function(A,x){return Array.isArray(x)?x.map(M=>A.$_mapLabels(M)):A.$_mapLabels(x)},w.isPresent=function(A){return typeof A.isPresent=="function"?A.isPresent:x=>x!==void 0},w.rename=function(A,x,M,V,P){const O={};for(const S of A.$_terms.renames){const C=[],D=typeof S.from!="string";if(D)for(const L in x){if(x[L]===void 0&&S.options.ignoreUndefined||L===S.to)continue;const $=S.from.exec(L);$&&C.push({from:L,to:S.to,match:$})}else!Object.prototype.hasOwnProperty.call(x,S.from)||x[S.from]===void 0&&S.options.ignoreUndefined||C.push(S);for(const L of C){const $=L.from;let j=L.to;if(j instanceof R&&(j=j.render(x,M,V,L.match)),$!==j){if(!S.options.multiple&&O[j]&&(P.push(A.$_createError("object.rename.multiple",x,{from:$,to:j,pattern:D},M,V)),V.abortEarly)||Object.prototype.hasOwnProperty.call(x,j)&&!S.options.override&&!O[j]&&(P.push(A.$_createError("object.rename.override",x,{from:$,to:j,pattern:D},M,V)),V.abortEarly))return!1;x[$]===void 0?delete x[j]:x[j]=x[$],O[j]=!0,S.options.alias||delete x[$]}}}return!0},w.unknown=function(A,x,M,V,P,O){if(A.$_terms.patterns){let S=!1;const C=A.$_terms.patterns.map(L=>{if(L.matches)return S=!0,[]}),D=[x,...P.ancestors];for(const L of M){const $=x[L],j=[...P.path,L];for(let ce=0;ce<A.$_terms.patterns.length;++ce){const pe=A.$_terms.patterns[ce];if(pe.regex){const ye=pe.regex.test(L);if(P.mainstay.tracer.debug(P,"rule",`pattern.${ce}`,ye?"pass":"error"),!ye)continue}else if(!pe.schema.$_match(L,P.nest(pe.schema,`pattern.${ce}`),O))continue;M.delete(L);const K=P.localize(j,D,{schema:pe.rule,key:L}),ae=pe.rule.$_validate($,K,O);if(ae.errors){if(O.abortEarly)return{value:x,errors:ae.errors};V.push(...ae.errors)}if(pe.matches&&C[ce].push(L),x[L]=ae.value,!pe.fallthrough)break}}if(S)for(let L=0;L<C.length;++L){const $=C[L];if(!$)continue;const j=A.$_terms.patterns[L].matches,ce=P.localize(P.path,D,j),pe=j.$_validate($,ce,O);if(pe.errors){const K=v.details(pe.errors,{override:!1});K.matches=$;const ae=A.$_createError("object.pattern.match",x,K,P,O);if(O.abortEarly)return{value:x,errors:ae};V.push(ae)}}}if(M.size&&(A.$_terms.keys||A.$_terms.patterns)){if(O.stripUnknown&&A._flags.unknown===void 0||O.skipFunctions){const S=!(!O.stripUnknown||O.stripUnknown!==!0&&!O.stripUnknown.objects);for(const C of M)S?(delete x[C],M.delete(C)):typeof x[C]=="function"&&M.delete(C)}if(!y.default(A._flags.unknown,O.allowUnknown))for(const S of M){const C=P.localize([...P.path,S],[]),D=A.$_createError("object.unknown",x[S],{child:S},C,O,{flags:!1});if(O.abortEarly)return{value:x,errors:D};V.push(D)}}},w.Dependency=class{constructor(A,x,M,V,P){this.rel=A,this.key=x,this.peers=M,this.paths=V,this.options=P}describe(){const A={rel:this.rel,peers:this.paths};return this.key!==null&&(A.key=this.key.key),this.peers[0].separator!=="."&&(A.options={...A.options,separator:this.peers[0].separator}),this.options.isPresent&&(A.options={...A.options,isPresent:this.options.isPresent}),A}},w.Keys=class extends Array{concat(A){const x=this.slice(),M=new Map;for(let V=0;V<x.length;++V)M.set(x[V].key,V);for(const V of A){const P=V.key,O=M.get(P);O!==void 0?x[O]={key:P,schema:x[O].schema.concat(V.schema)}:x.push(V)}return x}}},8785:(o,l,h)=>{const c=h(375),m=h(8068),g=h(8160),b=h(3292),d=h(6354),y={};o.exports=m.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(_,v)=>_.ref(v),validate(_,{schema:v,state:E,prefs:R}){c(v.$_terms.link,"Uninitialized link schema");const w=y.generate(v,_,E,R),A=v.$_terms.link[0].ref;return w.$_validate(_,E.nest(w,`link:${A.display}:${w.type}`),R)},generate:(_,v,E,R)=>y.generate(_,v,E,R),rules:{ref:{method(_){c(!this.$_terms.link,"Cannot reinitialize schema"),_=b.ref(_),c(_.type==="value"||_.type==="local","Invalid reference type:",_.type),c(_.type==="local"||_.ancestor==="root"||_.ancestor>0,"Link cannot reference itself");const v=this.clone();return v.$_terms.link=[{ref:_}],v}},relative:{method(_=!0){return this.$_setFlag("relative",_)}}},overrides:{concat(_){c(this.$_terms.link,"Uninitialized link schema"),c(g.isSchema(_),"Invalid schema object"),c(_.type!=="link","Cannot merge type link with another link");const v=this.clone();return v.$_terms.whens||(v.$_terms.whens=[]),v.$_terms.whens.push({concat:_}),v.$_mutateRebuild()}},manifest:{build:(_,v)=>(c(v.link,"Invalid link description missing link"),_.ref(v.link))}}),y.generate=function(_,v,E,R){let w=E.mainstay.links.get(_);if(w)return w._generate(v,E,R).schema;const A=_.$_terms.link[0].ref,{perspective:x,path:M}=y.perspective(A,E);y.assert(x,"which is outside of schema boundaries",A,_,E,R);try{w=M.length?x.$_reach(M):x}catch{y.assert(!1,"to non-existing schema",A,_,E,R)}return y.assert(w.type!=="link","which is another link",A,_,E,R),_._flags.relative||E.mainstay.links.set(_,w),w._generate(v,E,R).schema},y.perspective=function(_,v){if(_.type==="local"){for(const{schema:E,key:R}of v.schemas){if((E._flags.id||R)===_.path[0])return{perspective:E,path:_.path.slice(1)};if(E.$_terms.shared){for(const w of E.$_terms.shared)if(w._flags.id===_.path[0])return{perspective:w,path:_.path.slice(1)}}}return{perspective:null,path:null}}return _.ancestor==="root"?{perspective:v.schemas[v.schemas.length-1].schema,path:_.path}:{perspective:v.schemas[_.ancestor]&&v.schemas[_.ancestor].schema,path:_.path}},y.assert=function(_,v,E,R,w,A){_||c(!1,`"${d.label(R._flags,w,A)}" contains link reference "${E.display}" ${v}`)}},3832:(o,l,h)=>{const c=h(375),m=h(8068),g=h(8160),b={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(d){const y=d.toString(),_=y.indexOf("."),v=y.indexOf("e");return(_<0?0:(v<0?y.length:v)-_-1)+(v<0?0:Math.max(0,-parseInt(y.slice(v+1))))}};o.exports=m.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(d,{schema:y,error:_}){if(!d.match(b.numberRx))return;d=d.trim();const v={value:parseFloat(d)};if(v.value===0&&(v.value=0),!y._flags.unsafe)if(d.match(/e/i)){if(b.extractSignificantDigits(d)!==b.extractSignificantDigits(String(v.value)))return v.errors=_("number.unsafe"),v}else{const E=v.value.toString();if(E.match(/e/i))return v;if(E!==b.normalizeDecimal(d))return v.errors=_("number.unsafe"),v}return v}},validate(d,{schema:y,error:_,prefs:v}){if(d===1/0||d===-1/0)return{value:d,errors:_("number.infinity")};if(!g.isNumber(d))return{value:d,errors:_("number.base")};const E={value:d};if(v.convert){const R=y.$_getRule("precision");if(R){const w=Math.pow(10,R.args.limit);E.value=Math.round(E.value*w)/w}}return E.value===0&&(E.value=0),!y._flags.unsafe&&(d>Number.MAX_SAFE_INTEGER||d<Number.MIN_SAFE_INTEGER)&&(E.errors=_("number.unsafe")),E},rules:{compare:{method:!1,validate:(d,y,{limit:_},{name:v,operator:E,args:R})=>g.compare(d,_,E)?d:y.error("number."+v,{limit:R.limit,value:d}),args:[{name:"limit",ref:!0,assert:g.isNumber,message:"must be a number"}]},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{limit:d},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(d,y)=>Math.trunc(d)-d==0?d:y.error("number.integer")},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{limit:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{limit:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{limit:d},operator:">="})}},multiple:{method(d){const y=typeof d=="number"?b.decimalPlaces(d):null,_=Math.pow(10,y);return this.$_addRule({name:"multiple",args:{base:d,baseDecimalPlace:y,pfactor:_}})},validate:(d,y,{base:_,baseDecimalPlace:v,pfactor:E},R)=>b.decimalPlaces(d)>v?y.error("number.multiple",{multiple:R.args.base,value:d}):Math.round(E*d)%Math.round(E*_)==0?d:y.error("number.multiple",{multiple:R.args.base,value:d}),args:[{name:"base",ref:!0,assert:d=>typeof d=="number"&&isFinite(d)&&d>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(d,y)=>Number.isSafeInteger(d)&&d>=0&&d<=65535?d:y.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(d){return c(Number.isSafeInteger(d),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:d}})},validate(d,y,{limit:_}){const v=d.toString().match(b.precisionRx);return Math.max((v[1]?v[1].length:0)-(v[2]?parseInt(v[2],10):0),0)<=_?d:y.error("number.precision",{limit:_,value:d})},convert:!0},sign:{method(d){return c(["negative","positive"].includes(d),"Invalid sign",d),this.$_addRule({name:"sign",args:{sign:d}})},validate:(d,y,{sign:_})=>_==="negative"&&d<0||_==="positive"&&d>0?d:y.error(`number.${_}`)},unsafe:{method(d=!0){return c(typeof d=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",d)}}},cast:{string:{from:d=>typeof d=="number",to:(d,y)=>d.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),b.extractSignificantDigits=function(d){return d.replace(b.exponentialPartRegex,"").replace(b.dotRegex,"").replace(b.trailingZerosRegex,"").replace(b.leadingSignAndZerosRegex,"")},b.normalizeDecimal=function(d){return(d=d.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&d.endsWith("0")&&(d=d.replace(/0+$/,"")),d==="-0"?"0":d}},8966:(o,l,h)=>{const c=h(7824);o.exports=c.extend({type:"object",cast:{map:{from:m=>m&&typeof m=="object",to:(m,g)=>new Map(Object.entries(m))}}})},7417:(o,l,h)=>{const c=h(375),m=h(5380),g=h(1745),b=h(9959),d=h(6064),y=h(9926),_=h(5752),v=h(8068),E=h(8160),R={tlds:y instanceof Set&&{tlds:{allow:y,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:b.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};o.exports=v.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(w,{schema:A,state:x,prefs:M}){const V=A.$_getRule("normalize");V&&(w=w.normalize(V.args.form));const P=A.$_getRule("case");P&&(w=P.args.direction==="upper"?w.toLocaleUpperCase():w.toLocaleLowerCase());const O=A.$_getRule("trim");if(O&&O.args.enabled&&(w=w.trim()),A.$_terms.replacements)for(const C of A.$_terms.replacements)w=w.replace(C.pattern,C.replacement);const S=A.$_getRule("hex");if(S&&S.args.options.byteAligned&&w.length%2!=0&&(w=`0${w}`),A.$_getRule("isoDate")){const C=R.isoDate(w);C&&(w=C)}if(A._flags.truncate){const C=A.$_getRule("max");if(C){let D=C.args.limit;if(E.isResolvable(D)&&(D=D.resolve(w,x,M),!E.limit(D)))return{value:w,errors:A.$_createError("any.ref",D,{ref:C.args.limit,arg:"limit",reason:"must be a positive integer"},x,M)};w=w.slice(0,D)}}return{value:w}}},validate(w,{schema:A,error:x}){if(typeof w!="string")return{value:w,errors:x("string.base")};if(w===""){const M=A.$_getRule("min");return M&&M.args.limit===0?void 0:{value:w,errors:x("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(w,A)=>/^[a-zA-Z0-9]+$/.test(w)?w:A.error("string.alphanum")},base64:{method(w={}){return E.assertOptions(w,["paddingRequired","urlSafe"]),w={urlSafe:!1,paddingRequired:!0,...w},c(typeof w.paddingRequired=="boolean","paddingRequired must be boolean"),c(typeof w.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:w}})},validate:(w,A,{options:x})=>R.base64Regex[x.paddingRequired][x.urlSafe].test(w)?w:A.error("string.base64")},case:{method(w){return c(["lower","upper"].includes(w),"Invalid case:",w),this.$_addRule({name:"case",args:{direction:w}})},validate:(w,A,{direction:x})=>x==="lower"&&w===w.toLocaleLowerCase()||x==="upper"&&w===w.toLocaleUpperCase()?w:A.error(`string.${x}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(w,A){let x=w.length,M=0,V=1;for(;x--;){const P=w.charAt(x)*V;M+=P-9*(P>9),V^=3}return M>0&&M%10==0?w:A.error("string.creditCard")}},dataUri:{method(w={}){return E.assertOptions(w,["paddingRequired"]),w={paddingRequired:!0,...w},c(typeof w.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:w}})},validate(w,A,{options:x}){const M=w.match(R.dataUriRegex);return M&&(!M[2]||M[2]!=="base64"||R.base64Regex[x.paddingRequired].false.test(M[3]))?w:A.error("string.dataUri")}},domain:{method(w){w&&E.assertOptions(w,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const A=R.addressOptions(w);return this.$_addRule({name:"domain",args:{options:w},address:A})},validate:(w,A,x,{address:M})=>m.isValid(w,M)?w:A.error("string.domain")},email:{method(w={}){E.assertOptions(w,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),c(w.multiple===void 0||typeof w.multiple=="boolean","multiple option must be an boolean");const A=R.addressOptions(w),x=new RegExp(`\\s*[${w.separator?d(w.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:w},regex:x,address:A})},validate(w,A,{options:x},{regex:M,address:V}){const P=x.multiple?w.split(M):[w],O=[];for(const S of P)g.isValid(S,V)||O.push(S);return O.length?A.error("string.email",{value:w,invalids:O}):w}},guid:{alias:"uuid",method(w={}){E.assertOptions(w,["version","separator"]);let A="";if(w.version){const V=[].concat(w.version);c(V.length>=1,"version must have at least 1 valid version specified");const P=new Set;for(let O=0;O<V.length;++O){const S=V[O];c(typeof S=="string","version at position "+O+" must be a string");const C=R.guidVersions[S.toLowerCase()];c(C,"version at position "+O+" must be one of "+Object.keys(R.guidVersions).join(", ")),c(!P.has(C),"version at position "+O+" must not be a duplicate"),A+=C,P.add(C)}}c(R.guidSeparators.has(w.separator),'separator must be one of true, false, "-", or ":"');const x=w.separator===void 0?"[:-]?":w.separator===!0?"[:-]":w.separator===!1?"[]?":`\\${w.separator}`,M=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${x})[0-9A-F]{4}\\2?[${A||"0-9A-F"}][0-9A-F]{3}\\2?[${A?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:w},regex:M})},validate(w,A,x,{regex:M}){const V=M.exec(w);return V?R.guidBrackets[V[1]]!==V[V.length-1]?A.error("string.guid"):w:A.error("string.guid")}},hex:{method(w={}){return E.assertOptions(w,["byteAligned","prefix"]),w={byteAligned:!1,prefix:!1,...w},c(typeof w.byteAligned=="boolean","byteAligned must be boolean"),c(typeof w.prefix=="boolean"||w.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:w}})},validate:(w,A,{options:x})=>(x.prefix==="optional"?R.hexRegex.withOptionalPrefix:x.prefix===!0?R.hexRegex.withPrefix:R.hexRegex.withoutPrefix).test(w)?x.byteAligned&&w.length%2!=0?A.error("string.hexAlign"):w:A.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(w,A)=>m.isValid(w,{minDomainSegments:1})||R.ipRegex.test(w)?w:A.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(w={}){E.assertOptions(w,["cidr","version"]);const{cidr:A,versions:x,regex:M}=b.regex(w),V=w.version?x:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:A,version:V}},regex:M})},validate:(w,A,{options:x},{regex:M})=>M.test(w)?w:x.version?A.error("string.ipVersion",{value:w,cidr:x.cidr,version:x.version}):A.error("string.ip",{value:w,cidr:x.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(w,{error:A})=>R.isoDate(w)?w:A("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(w,A)=>R.isoDurationRegex.test(w)?w:A.error("string.isoDuration")},length:{method(w,A){return R.length(this,"length",w,"=",A)},validate(w,A,{limit:x,encoding:M},{name:V,operator:P,args:O}){const S=!M&&w.length;return E.compare(S,x,P)?w:A.error("string."+V,{limit:O.limit,value:w,encoding:M})},args:[{name:"limit",ref:!0,assert:E.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(w,A){return R.length(this,"max",w,"<=",A)},args:["limit","encoding"]},min:{method(w,A){return R.length(this,"min",w,">=",A)},args:["limit","encoding"]},normalize:{method(w="NFC"){return c(R.normalizationForms.includes(w),"normalization form must be one of "+R.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:w}})},validate:(w,{error:A},{form:x})=>w===w.normalize(x)?w:A("string.normalize",{value:w,form:x}),convert:!0},pattern:{alias:"regex",method(w,A={}){c(w instanceof RegExp,"regex must be a RegExp"),c(!w.flags.includes("g")&&!w.flags.includes("y"),"regex should not use global or sticky mode"),typeof A=="string"&&(A={name:A}),E.assertOptions(A,["invert","name"]);const x=["string.pattern",A.invert?".invert":"",A.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:w,options:A},errorCode:x})},validate:(w,A,{regex:x,options:M},{errorCode:V})=>x.test(w)^M.invert?w:A.error(V,{name:M.name,regex:x,value:w}),args:["regex","options"],multi:!0},replace:{method(w,A){typeof w=="string"&&(w=new RegExp(d(w),"g")),c(w instanceof RegExp,"pattern must be a RegExp"),c(typeof A=="string","replacement must be a String");const x=this.clone();return x.$_terms.replacements||(x.$_terms.replacements=[]),x.$_terms.replacements.push({pattern:w,replacement:A}),x}},token:{method(){return this.$_addRule("token")},validate:(w,A)=>/^\w+$/.test(w)?w:A.error("string.token")},trim:{method(w=!0){return c(typeof w=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:w}})},validate:(w,A,{enabled:x})=>x&&w!==w.trim()?A.error("string.trim"):w,convert:!0},truncate:{method(w=!0){return c(typeof w=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",w)}},uppercase:{method(){return this.case("upper")}},uri:{method(w={}){E.assertOptions(w,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),w.domain&&E.assertOptions(w.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:A,scheme:x}=_.regex(w),M=w.domain?R.addressOptions(w.domain):null;return this.$_addRule({name:"uri",args:{options:w},regex:A,domain:M,scheme:x})},validate(w,A,{options:x},{regex:M,domain:V,scheme:P}){if(["http:/","https:/"].includes(w))return A.error("string.uri");let O=M.exec(w);if(!O&&A.prefs.convert&&x.encodeUri){const S=encodeURI(w);O=M.exec(S),O&&(w=S)}if(O){const S=O[1]||O[2];return!V||x.allowRelative&&!S||m.isValid(S,V)?w:A.error("string.domain",{value:S})}return x.relativeOnly?A.error("string.uriRelativeOnly"):x.scheme?A.error("string.uriCustomScheme",{scheme:P,value:w}):A.error("string.uri")}}},manifest:{build(w,A){if(A.replacements)for(const{pattern:x,replacement:M}of A.replacements)w=w.replace(x,M);return w}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),R.addressOptions=function(w){if(!w)return R.tlds||w;if(c(w.minDomainSegments===void 0||Number.isSafeInteger(w.minDomainSegments)&&w.minDomainSegments>0,"minDomainSegments must be a positive integer"),c(w.maxDomainSegments===void 0||Number.isSafeInteger(w.maxDomainSegments)&&w.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),w.tlds===!1)return w;if(w.tlds===!0||w.tlds===void 0)return c(R.tlds,"Built-in TLD list disabled"),Object.assign({},w,R.tlds);c(typeof w.tlds=="object","tlds must be true, false, or an object");const A=w.tlds.deny;if(A)return Array.isArray(A)&&(w=Object.assign({},w,{tlds:{deny:new Set(A)}})),c(w.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),c(!w.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),R.validateTlds(w.tlds.deny,"tlds.deny"),w;const x=w.tlds.allow;return x?x===!0?(c(R.tlds,"Built-in TLD list disabled"),Object.assign({},w,R.tlds)):(Array.isArray(x)&&(w=Object.assign({},w,{tlds:{allow:new Set(x)}})),c(w.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),R.validateTlds(w.tlds.allow,"tlds.allow"),w):w},R.validateTlds=function(w,A){for(const x of w)c(m.isValid(x,{minDomainSegments:1,maxDomainSegments:1}),`${A} must contain valid top level domain names`)},R.isoDate=function(w){if(!E.isIsoDate(w))return null;/.*T.*[+-]\d\d$/.test(w)&&(w+="00");const A=new Date(w);return isNaN(A.getTime())?null:A.toISOString()},R.length=function(w,A,x,M,V){return c(!V||!1,"Invalid encoding:",V),w.$_addRule({name:A,method:"length",args:{limit:x,encoding:V},operator:M})}},8826:(o,l,h)=>{const c=h(375),m=h(8068),g={};g.Map=class extends Map{slice(){return new g.Map(this)}},o.exports=m.extend({type:"symbol",terms:{map:{init:new g.Map}},coerce:{method(b,{schema:d,error:y}){const _=d.$_terms.map.get(b);return _&&(b=_),d._flags.only&&typeof b!="symbol"?{value:b,errors:y("symbol.map",{map:d.$_terms.map})}:{value:b}}},validate(b,{error:d}){if(typeof b!="symbol")return{value:b,errors:d("symbol.base")}},rules:{map:{method(b){b&&!b[Symbol.iterator]&&typeof b=="object"&&(b=Object.entries(b)),c(b&&b[Symbol.iterator],"Iterable must be an iterable or object");const d=this.clone(),y=[];for(const _ of b){c(_&&_[Symbol.iterator],"Entry must be an iterable");const[v,E]=_;c(typeof v!="object"&&typeof v!="function"&&typeof v!="symbol","Key must not be of type object, function, or Symbol"),c(typeof E=="symbol","Value must be a Symbol"),d.$_terms.map.set(v,E),y.push(E)}return d.valid(...y)}}},manifest:{build:(b,d)=>(d.map&&(b=b.map(d.map)),b)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(o,l,h)=>{const c=h(375),m=h(8571),g=h(738),b=h(9621),d=h(8160),y=h(6354),_=h(493),v={result:Symbol("result")};l.entry=function(E,R,w){let A=d.defaults;w&&(c(w.warnings===void 0,"Cannot override warnings preference in synchronous validation"),c(w.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),A=d.preferences(d.defaults,w));const x=v.entry(E,R,A);c(!x.mainstay.externals.length,"Schema with external rules must use validateAsync()");const M={value:x.value};return x.error&&(M.error=x.error),x.mainstay.warnings.length&&(M.warning=y.details(x.mainstay.warnings)),x.mainstay.debug&&(M.debug=x.mainstay.debug),x.mainstay.artifacts&&(M.artifacts=x.mainstay.artifacts),M},l.entryAsync=async function(E,R,w){let A=d.defaults;w&&(A=d.preferences(d.defaults,w));const x=v.entry(E,R,A),M=x.mainstay;if(x.error)throw M.debug&&(x.error.debug=M.debug),x.error;if(M.externals.length){let P=x.value;const O=[];for(const S of M.externals){const C=S.state.path,D=S.schema.type==="link"?M.links.get(S.schema):null;let L,$,j=P;const ce=C.length?[P]:[],pe=C.length?b(E,C):E;if(C.length){L=C[C.length-1];let K=P;for(const ae of C.slice(0,-1))K=K[ae],ce.unshift(K);$=ce[0],j=$[L]}try{const K=(ye,Re)=>(D||S.schema).$_createError(ye,j,Re,S.state,A),ae=await S.method(j,{schema:S.schema,linked:D,state:S.state,prefs:w,original:pe,error:K,errorsArray:v.errorsArray,warn:(ye,Re)=>M.warnings.push((D||S.schema).$_createError(ye,j,Re,S.state,A)),message:(ye,Re)=>(D||S.schema).$_createError("external",j,Re,S.state,A,{messages:ye})});if(ae===void 0||ae===j)continue;if(ae instanceof y.Report){if(M.tracer.log(S.schema,S.state,"rule","external","error"),O.push(ae),A.abortEarly)break;continue}if(Array.isArray(ae)&&ae[d.symbols.errors]){if(M.tracer.log(S.schema,S.state,"rule","external","error"),O.push(...ae),A.abortEarly)break;continue}$?(M.tracer.value(S.state,"rule",j,ae,"external"),$[L]=ae):(M.tracer.value(S.state,"rule",P,ae,"external"),P=ae)}catch(K){throw A.errors.label&&(K.message+=` (${S.label})`),K}}if(x.value=P,O.length)throw x.error=y.process(O,E,A),M.debug&&(x.error.debug=M.debug),x.error}if(!A.warnings&&!A.debug&&!A.artifacts)return x.value;const V={value:x.value};return M.warnings.length&&(V.warning=y.details(M.warnings)),M.debug&&(V.debug=M.debug),M.artifacts&&(V.artifacts=M.artifacts),V},v.Mainstay=class{constructor(E,R,w){this.externals=[],this.warnings=[],this.tracer=E,this.debug=R,this.links=w,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const E=this._snapshots.pop();this.externals=E.externals,this.warnings=E.warnings}commit(){this._snapshots.pop()}},v.entry=function(E,R,w){const{tracer:A,cleanup:x}=v.tracer(R,w),M=w.debug?[]:null,V=R._ids._schemaChain?new Map:null,P=new v.Mainstay(A,M,V),O=R._ids._schemaChain?[{schema:R}]:null,S=new _([],[],{mainstay:P,schemas:O}),C=l.validate(E,R,S,w);x&&R.$_root.untrace();const D=y.process(C.errors,E,w);return{value:C.value,error:D,mainstay:P}},v.tracer=function(E,R){return E.$_root._tracer?{tracer:E.$_root._tracer._register(E)}:R.debug?(c(E.$_root.trace,"Debug mode not supported"),{tracer:E.$_root.trace()._register(E),cleanup:!0}):{tracer:v.ignore}},l.validate=function(E,R,w,A,x={}){if(R.$_terms.whens&&(R=R._generate(E,w,A).schema),R._preferences&&(A=v.prefs(R,A)),R._cache&&A.cache){const D=R._cache.get(E);if(w.mainstay.tracer.debug(w,"validate","cached",!!D),D)return D}const M=(D,L,$)=>R.$_createError(D,E,L,$||w,A),V={original:E,prefs:A,schema:R,state:w,error:M,errorsArray:v.errorsArray,warn:(D,L,$)=>w.mainstay.warnings.push(M(D,L,$)),message:(D,L)=>R.$_createError("custom",E,L,w,A,{messages:D})};w.mainstay.tracer.entry(R,w);const P=R._definition;if(P.prepare&&E!==void 0&&A.convert){const D=P.prepare(E,V);if(D){if(w.mainstay.tracer.value(w,"prepare",E,D.value),D.errors)return v.finalize(D.value,[].concat(D.errors),V);E=D.value}}if(P.coerce&&E!==void 0&&A.convert&&(!P.coerce.from||P.coerce.from.includes(typeof E))){const D=P.coerce.method(E,V);if(D){if(w.mainstay.tracer.value(w,"coerced",E,D.value),D.errors)return v.finalize(D.value,[].concat(D.errors),V);E=D.value}}const O=R._flags.empty;O&&O.$_match(v.trim(E,R),w.nest(O),d.defaults)&&(w.mainstay.tracer.value(w,"empty",E,void 0),E=void 0);const S=x.presence||R._flags.presence||(R._flags._endedSwitch?null:A.presence);if(E===void 0){if(S==="forbidden")return v.finalize(E,null,V);if(S==="required")return v.finalize(E,[R.$_createError("any.required",E,null,w,A)],V);if(S==="optional"){if(R._flags.default!==d.symbols.deepDefault)return v.finalize(E,null,V);w.mainstay.tracer.value(w,"default",E,{}),E={}}}else if(S==="forbidden")return v.finalize(E,[R.$_createError("any.unknown",E,null,w,A)],V);const C=[];if(R._valids){const D=R._valids.get(E,w,A,R._flags.insensitive);if(D)return A.convert&&(w.mainstay.tracer.value(w,"valids",E,D.value),E=D.value),w.mainstay.tracer.filter(R,w,"valid",D),v.finalize(E,null,V);if(R._flags.only){const L=R.$_createError("any.only",E,{valids:R._valids.values({display:!0})},w,A);if(A.abortEarly)return v.finalize(E,[L],V);C.push(L)}}if(R._invalids){const D=R._invalids.get(E,w,A,R._flags.insensitive);if(D){w.mainstay.tracer.filter(R,w,"invalid",D);const L=R.$_createError("any.invalid",E,{invalids:R._invalids.values({display:!0})},w,A);if(A.abortEarly)return v.finalize(E,[L],V);C.push(L)}}if(P.validate){const D=P.validate(E,V);if(D&&(w.mainstay.tracer.value(w,"base",E,D.value),E=D.value,D.errors)){if(!Array.isArray(D.errors))return C.push(D.errors),v.finalize(E,C,V);if(D.errors.length)return C.push(...D.errors),v.finalize(E,C,V)}}return R._rules.length?v.rules(E,C,V):v.finalize(E,C,V)},v.rules=function(E,R,w){const{schema:A,state:x,prefs:M}=w;for(const V of A._rules){const P=A._definition.rules[V.method];if(P.convert&&M.convert){x.mainstay.tracer.log(A,x,"rule",V.name,"full");continue}let O,S=V.args;if(V._resolve.length){S=Object.assign({},S);for(const D of V._resolve){const L=P.argsByName.get(D),$=S[D].resolve(E,x,M),j=L.normalize?L.normalize($):$,ce=d.validateArg(j,null,L);if(ce){O=A.$_createError("any.ref",$,{arg:D,ref:S[D],reason:ce},x,M);break}S[D]=j}}O=O||P.validate(E,w,S,V);const C=v.rule(O,V);if(C.errors){if(x.mainstay.tracer.log(A,x,"rule",V.name,"error"),V.warn){x.mainstay.warnings.push(...C.errors);continue}if(M.abortEarly)return v.finalize(E,C.errors,w);R.push(...C.errors)}else x.mainstay.tracer.log(A,x,"rule",V.name,"pass"),x.mainstay.tracer.value(x,"rule",E,C.value,V.name),E=C.value}return v.finalize(E,R,w)},v.rule=function(E,R){return E instanceof y.Report?(v.error(E,R),{errors:[E],value:null}):Array.isArray(E)&&E[d.symbols.errors]?(E.forEach(w=>v.error(w,R)),{errors:E,value:null}):{errors:null,value:E}},v.error=function(E,R){return R.message&&E._setTemplate(R.message),E},v.finalize=function(E,R,w){R=R||[];const{schema:A,state:x,prefs:M}=w;if(R.length){const P=v.default("failover",void 0,R,w);P!==void 0&&(x.mainstay.tracer.value(x,"failover",E,P),E=P,R=[])}if(R.length&&A._flags.error)if(typeof A._flags.error=="function"){R=A._flags.error(R),Array.isArray(R)||(R=[R]);for(const P of R)c(P instanceof Error||P instanceof y.Report,"error() must return an Error object")}else R=[A._flags.error];if(E===void 0){const P=v.default("default",E,R,w);x.mainstay.tracer.value(x,"default",E,P),E=P}if(A._flags.cast&&E!==void 0){const P=A._definition.cast[A._flags.cast];if(P.from(E)){const O=P.to(E,w);x.mainstay.tracer.value(x,"cast",E,O,A._flags.cast),E=O}}if(A.$_terms.externals&&M.externals&&M._externals!==!1)for(const{method:P}of A.$_terms.externals)x.mainstay.externals.push({method:P,schema:A,state:x,label:y.label(A._flags,x,M)});const V={value:E,errors:R.length?R:null};return A._flags.result&&(V.value=A._flags.result==="strip"?void 0:w.original,x.mainstay.tracer.value(x,A._flags.result,E,V.value),x.shadow(E,A._flags.result)),A._cache&&M.cache!==!1&&!A._refs.length&&A._cache.set(w.original,V),E===void 0||V.errors||A._flags.artifact===void 0||(x.mainstay.artifacts=x.mainstay.artifacts||new Map,x.mainstay.artifacts.has(A._flags.artifact)||x.mainstay.artifacts.set(A._flags.artifact,[]),x.mainstay.artifacts.get(A._flags.artifact).push(x.path)),V},v.prefs=function(E,R){const w=R===d.defaults;return w&&E._preferences[d.symbols.prefs]?E._preferences[d.symbols.prefs]:(R=d.preferences(R,E._preferences),w&&(E._preferences[d.symbols.prefs]=R),R)},v.default=function(E,R,w,A){const{schema:x,state:M,prefs:V}=A,P=x._flags[E];if(V.noDefaults||P===void 0)return R;if(M.mainstay.tracer.log(x,M,"rule",E,"full"),!P)return P;if(typeof P=="function"){const O=P.length?[m(M.ancestors[0]),A]:[];try{return P(...O)}catch(S){return void w.push(x.$_createError(`any.${E}`,null,{error:S},M,V))}}return typeof P!="object"?P:P[d.symbols.literal]?P.literal:d.isResolvable(P)?P.resolve(R,M,V):m(P)},v.trim=function(E,R){if(typeof E!="string")return E;const w=R.$_getRule("trim");return w&&w.args.enabled?E.trim():E},v.ignore={active:!1,debug:g,entry:g,filter:g,log:g,resolve:g,value:g},v.errorsArray=function(){const E=[];return E[d.symbols.errors]=!0,E}},2036:(o,l,h)=>{const c=h(375),m=h(9474),g=h(8160),b={};o.exports=b.Values=class{constructor(d,y){this._values=new Set(d),this._refs=new Set(y),this._lowercase=b.lowercases(d),this._override=!1}get length(){return this._values.size+this._refs.size}add(d,y){g.isResolvable(d)?this._refs.has(d)||(this._refs.add(d),y&&y.register(d)):this.has(d,null,null,!1)||(this._values.add(d),typeof d=="string"&&this._lowercase.set(d.toLowerCase(),d))}static merge(d,y,_){if(d=d||new b.Values,y){if(y._override)return y.clone();for(const v of[...y._values,...y._refs])d.add(v)}if(_)for(const v of[..._._values,..._._refs])d.remove(v);return d.length?d:null}remove(d){g.isResolvable(d)?this._refs.delete(d):(this._values.delete(d),typeof d=="string"&&this._lowercase.delete(d.toLowerCase()))}has(d,y,_,v){return!!this.get(d,y,_,v)}get(d,y,_,v){if(!this.length)return!1;if(this._values.has(d))return{value:d};if(typeof d=="string"&&d&&v){const E=this._lowercase.get(d.toLowerCase());if(E)return{value:E}}if(!this._refs.size&&typeof d!="object")return!1;if(typeof d=="object"){for(const E of this._values)if(m(E,d))return{value:E}}if(y)for(const E of this._refs){const R=E.resolve(d,y,_,null,{in:!0});if(R===void 0)continue;const w=E.in&&typeof R=="object"?Array.isArray(R)?R:Object.keys(R):[R];for(const A of w)if(typeof A==typeof d){if(v&&d&&typeof d=="string"){if(A.toLowerCase()===d.toLowerCase())return{value:A,ref:E}}else if(m(A,d))return{value:A,ref:E}}}return!1}override(){this._override=!0}values(d){if(d&&d.display){const y=[];for(const _ of[...this._values,...this._refs])_!==void 0&&y.push(_);return y}return Array.from([...this._values,...this._refs])}clone(){const d=new b.Values(this._values,this._refs);return d._override=this._override,d}concat(d){c(!d._override,"Cannot concat override set of values");const y=new b.Values([...this._values,...d._values],[...this._refs,...d._refs]);return y._override=this._override,y}describe(){const d=[];this._override&&d.push({override:!0});for(const y of this._values.values())d.push(y&&typeof y=="object"?{value:y}:y);for(const y of this._refs.values())d.push(y.describe());return d}},b.Values.prototype[g.symbols.values]=!0,b.Values.prototype.slice=b.Values.prototype.clone,b.lowercases=function(d){const y=new Map;if(d)for(const _ of d)typeof _=="string"&&y.set(_.toLowerCase(),_);return y}},978:(o,l,h)=>{const c=h(375),m=h(8571),g=h(1687),b=h(9621),d={};o.exports=function(y,_,v={}){if(c(y&&typeof y=="object","Invalid defaults value: must be an object"),c(!_||_===!0||typeof _=="object","Invalid source value: must be true, falsy or an object"),c(typeof v=="object","Invalid options: must be an object"),!_)return null;if(v.shallow)return d.applyToDefaultsWithShallow(y,_,v);const E=m(y);if(_===!0)return E;const R=v.nullOverride!==void 0&&v.nullOverride;return g(E,_,{nullOverride:R,mergeArrays:!1})},d.applyToDefaultsWithShallow=function(y,_,v){const E=v.shallow;c(Array.isArray(E),"Invalid keys");const R=new Map,w=_===!0?null:new Set;for(let M of E){M=Array.isArray(M)?M:M.split(".");const V=b(y,M);V&&typeof V=="object"?R.set(V,w&&b(_,M)||V):w&&w.add(M)}const A=m(y,{},R);if(!w)return A;for(const M of w)d.reachCopy(A,_,M);const x=v.nullOverride!==void 0&&v.nullOverride;return g(A,_,{nullOverride:x,mergeArrays:!1})},d.reachCopy=function(y,_,v){for(const w of v){if(!(w in _))return;const A=_[w];if(typeof A!="object"||A===null)return;_=A}const E=_;let R=y;for(let w=0;w<v.length-1;++w){const A=v[w];typeof R[A]!="object"&&(R[A]={}),R=R[A]}R[v[v.length-1]]=E}},375:(o,l,h)=>{const c=h(7916);o.exports=function(m,...g){if(!m)throw g.length===1&&g[0]instanceof Error?g[0]:new c(g)}},8571:(o,l,h)=>{const c=h(9621),m=h(4277),g=h(7043),b={needsProtoHack:new Set([m.set,m.map,m.weakSet,m.weakMap])};o.exports=b.clone=function(d,y={},_=null){if(typeof d!="object"||d===null)return d;let v=b.clone,E=_;if(y.shallow){if(y.shallow!==!0)return b.cloneWithShallow(d,y);v=x=>x}else if(E){const x=E.get(d);if(x)return x}else E=new Map;const R=m.getInternalProto(d);if(R===m.buffer)return!1;if(R===m.date)return new Date(d.getTime());if(R===m.regex)return new RegExp(d);const w=b.base(d,R,y);if(w===d)return d;if(E&&E.set(d,w),R===m.set)for(const x of d)w.add(v(x,y,E));else if(R===m.map)for(const[x,M]of d)w.set(x,v(M,y,E));const A=g.keys(d,y);for(const x of A){if(x==="__proto__")continue;if(R===m.array&&x==="length"){w.length=d.length;continue}const M=Object.getOwnPropertyDescriptor(d,x);M?M.get||M.set?Object.defineProperty(w,x,M):M.enumerable?w[x]=v(d[x],y,E):Object.defineProperty(w,x,{enumerable:!1,writable:!0,configurable:!0,value:v(d[x],y,E)}):Object.defineProperty(w,x,{enumerable:!0,writable:!0,configurable:!0,value:v(d[x],y,E)})}return w},b.cloneWithShallow=function(d,y){const _=y.shallow;(y=Object.assign({},y)).shallow=!1;const v=new Map;for(const E of _){const R=c(d,E);typeof R!="object"&&typeof R!="function"||v.set(R,R)}return b.clone(d,y,v)},b.base=function(d,y,_){if(_.prototype===!1)return b.needsProtoHack.has(y)?new y.constructor:y===m.array?[]:{};const v=Object.getPrototypeOf(d);if(v&&v.isImmutable)return d;if(y===m.array){const E=[];return v!==y&&Object.setPrototypeOf(E,v),E}if(b.needsProtoHack.has(y)){const E=new v.constructor;return v!==y&&Object.setPrototypeOf(E,v),E}return Object.create(v)}},9474:(o,l,h)=>{const c=h(4277),m={mismatched:null};o.exports=function(g,b,d){return d=Object.assign({prototype:!0},d),!!m.isDeepEqual(g,b,d,[])},m.isDeepEqual=function(g,b,d,y){if(g===b)return g!==0||1/g==1/b;const _=typeof g;if(_!==typeof b||g===null||b===null)return!1;if(_==="function"){if(!d.deepFunction||g.toString()!==b.toString())return!1}else if(_!=="object")return g!=g&&b!=b;const v=m.getSharedType(g,b,!!d.prototype);switch(v){case c.buffer:return!1;case c.promise:return g===b;case c.regex:return g.toString()===b.toString();case m.mismatched:return!1}for(let E=y.length-1;E>=0;--E)if(y[E].isSame(g,b))return!0;y.push(new m.SeenEntry(g,b));try{return!!m.isDeepEqualObj(v,g,b,d,y)}finally{y.pop()}},m.getSharedType=function(g,b,d){if(d)return Object.getPrototypeOf(g)!==Object.getPrototypeOf(b)?m.mismatched:c.getInternalProto(g);const y=c.getInternalProto(g);return y!==c.getInternalProto(b)?m.mismatched:y},m.valueOf=function(g){const b=g.valueOf;if(b===void 0)return g;try{return b.call(g)}catch(d){return d}},m.hasOwnEnumerableProperty=function(g,b){return Object.prototype.propertyIsEnumerable.call(g,b)},m.isSetSimpleEqual=function(g,b){for(const d of Set.prototype.values.call(g))if(!Set.prototype.has.call(b,d))return!1;return!0},m.isDeepEqualObj=function(g,b,d,y,_){const{isDeepEqual:v,valueOf:E,hasOwnEnumerableProperty:R}=m,{keys:w,getOwnPropertySymbols:A}=Object;if(g===c.array){if(!y.part){if(b.length!==d.length)return!1;for(let O=0;O<b.length;++O)if(!v(b[O],d[O],y,_))return!1;return!0}for(const O of b)for(const S of d)if(v(O,S,y,_))return!0}else if(g===c.set){if(b.size!==d.size)return!1;if(!m.isSetSimpleEqual(b,d)){const O=new Set(Set.prototype.values.call(d));for(const S of Set.prototype.values.call(b)){if(O.delete(S))continue;let C=!1;for(const D of O)if(v(S,D,y,_)){O.delete(D),C=!0;break}if(!C)return!1}}}else if(g===c.map){if(b.size!==d.size)return!1;for(const[O,S]of Map.prototype.entries.call(b))if(S===void 0&&!Map.prototype.has.call(d,O)||!v(S,Map.prototype.get.call(d,O),y,_))return!1}else if(g===c.error&&(b.name!==d.name||b.message!==d.message))return!1;const x=E(b),M=E(d);if((b!==x||d!==M)&&!v(x,M,y,_))return!1;const V=w(b);if(!y.part&&V.length!==w(d).length&&!y.skip)return!1;let P=0;for(const O of V)if(y.skip&&y.skip.includes(O))d[O]===void 0&&++P;else if(!R(d,O)||!v(b[O],d[O],y,_))return!1;if(!y.part&&V.length-P!==w(d).length)return!1;if(y.symbols!==!1){const O=A(b),S=new Set(A(d));for(const C of O){if(!y.skip||!y.skip.includes(C)){if(R(b,C)){if(!R(d,C)||!v(b[C],d[C],y,_))return!1}else if(R(d,C))return!1}S.delete(C)}for(const C of S)if(R(d,C))return!1}return!0},m.SeenEntry=class{constructor(g,b){this.obj=g,this.ref=b}isSame(g,b){return this.obj===g&&this.ref===b}}},7916:(o,l,h)=>{const c=h(8761);o.exports=class extends Error{constructor(m){super(m.filter(g=>g!=="").map(g=>typeof g=="string"?g:g instanceof Error?g.message:c(g)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,l.assert)}}},5277:o=>{const l={};o.exports=function(h){if(!h)return"";let c="";for(let m=0;m<h.length;++m){const g=h.charCodeAt(m);l.isSafe(g)?c+=h[m]:c+=l.escapeHtmlChar(g)}return c},l.escapeHtmlChar=function(h){return l.namedHtml.get(h)||(h>=256?"&#"+h+";":`&#x${h.toString(16).padStart(2,"0")};`)},l.isSafe=function(h){return l.safeCharCodes.has(h)},l.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),l.safeCharCodes=function(){const h=new Set;for(let c=32;c<123;++c)(c>=97||c>=65&&c<=90||c>=48&&c<=57||c===32||c===46||c===44||c===45||c===58||c===95)&&h.add(c);return h}()},6064:o=>{o.exports=function(l){return l.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:o=>{o.exports=function(){}},1687:(o,l,h)=>{const c=h(375),m=h(8571),g=h(7043),b={};o.exports=b.merge=function(d,y,_){if(c(d&&typeof d=="object","Invalid target value: must be an object"),c(y==null||typeof y=="object","Invalid source value: must be null, undefined, or an object"),!y)return d;if(_=Object.assign({nullOverride:!0,mergeArrays:!0},_),Array.isArray(y)){c(Array.isArray(d),"Cannot merge array onto an object"),_.mergeArrays||(d.length=0);for(let E=0;E<y.length;++E)d.push(m(y[E],{symbols:_.symbols}));return d}const v=g.keys(y,_);for(let E=0;E<v.length;++E){const R=v[E];if(R==="__proto__"||!Object.prototype.propertyIsEnumerable.call(y,R))continue;const w=y[R];if(w&&typeof w=="object"){if(d[R]===w)continue;!d[R]||typeof d[R]!="object"||Array.isArray(d[R])!==Array.isArray(w)||w instanceof Date||w instanceof RegExp?d[R]=m(w,{symbols:_.symbols}):b.merge(d[R],w,_)}else(w!=null||_.nullOverride)&&(d[R]=w)}return d}},9621:(o,l,h)=>{const c=h(375),m={};o.exports=function(g,b,d){if(b===!1||b==null)return g;typeof(d=d||{})=="string"&&(d={separator:d});const y=Array.isArray(b);c(!y||!d.separator,"Separator option is not valid for array-based chain");const _=y?b:b.split(d.separator||".");let v=g;for(let E=0;E<_.length;++E){let R=_[E];const w=d.iterables&&m.iterables(v);if(Array.isArray(v)||w==="set"){const A=Number(R);Number.isInteger(A)&&(R=A<0?v.length+A:A)}if(!v||typeof v=="function"&&d.functions===!1||!w&&v[R]===void 0){c(!d.strict||E+1===_.length,"Missing segment",R,"in reach path ",b),c(typeof v=="object"||d.functions===!0||typeof v!="function","Invalid segment",R,"in reach path ",b),v=d.default;break}v=w?w==="set"?[...v][R]:v.get(R):v[R]}return v},m.iterables=function(g){return g instanceof Set?"set":g instanceof Map?"map":void 0}},8761:o=>{o.exports=function(...l){try{return JSON.stringify(...l)}catch(h){return"[Cannot display object: "+h.message+"]"}}},4277:(o,l)=>{const h={};l=o.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},h.typeMap=new Map([["[object Error]",l.error],["[object Map]",l.map],["[object Promise]",l.promise],["[object Set]",l.set],["[object WeakMap]",l.weakMap],["[object WeakSet]",l.weakSet]]),l.getInternalProto=function(c){if(Array.isArray(c))return l.array;if(c instanceof Date)return l.date;if(c instanceof RegExp)return l.regex;if(c instanceof Error)return l.error;const m=Object.prototype.toString.call(c);return h.typeMap.get(m)||l.generic}},7043:(o,l)=>{l.keys=function(h,c={}){return c.symbols!==!1?Reflect.ownKeys(h):Object.getOwnPropertyNames(h)}},3652:(o,l,h)=>{const c=h(375),m={};l.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(g,b){const d=[].concat((b=b||{}).before||[]),y=[].concat(b.after||[]),_=b.group||"?",v=b.sort||0;c(!d.includes(_),`Item cannot come before itself: ${_}`),c(!d.includes("?"),"Item cannot come before unassociated items"),c(!y.includes(_),`Item cannot come after itself: ${_}`),c(!y.includes("?"),"Item cannot come after unassociated items"),Array.isArray(g)||(g=[g]);for(const E of g){const R={seq:this._items.length,sort:v,before:d,after:y,group:_,node:E};this._items.push(R)}if(!b.manual){const E=this._sort();c(E,"item",_!=="?"?`added into group ${_}`:"","created a dependencies error")}return this.nodes}merge(g){Array.isArray(g)||(g=[g]);for(const d of g)if(d)for(const y of d._items)this._items.push(Object.assign({},y));this._items.sort(m.mergeSort);for(let d=0;d<this._items.length;++d)this._items[d].seq=d;const b=this._sort();return c(b,"merge created a dependencies error"),this.nodes}sort(){const g=this._sort();return c(g,"sort created a dependencies error"),this.nodes}_sort(){const g={},b=Object.create(null),d=Object.create(null);for(const R of this._items){const w=R.seq,A=R.group;d[A]=d[A]||[],d[A].push(w),g[w]=R.before;for(const x of R.after)b[x]=b[x]||[],b[x].push(w)}for(const R in g){const w=[];for(const A in g[R]){const x=g[R][A];d[x]=d[x]||[],w.push(...d[x])}g[R]=w}for(const R in b)if(d[R])for(const w of d[R])g[w].push(...b[R]);const y={};for(const R in g){const w=g[R];for(const A of w)y[A]=y[A]||[],y[A].push(R)}const _={},v=[];for(let R=0;R<this._items.length;++R){let w=R;if(y[R]){w=null;for(let A=0;A<this._items.length;++A){if(_[A]===!0)continue;y[A]||(y[A]=[]);const x=y[A].length;let M=0;for(let V=0;V<x;++V)_[y[A][V]]&&++M;if(M===x){w=A;break}}}w!==null&&(_[w]=!0,v.push(w))}if(v.length!==this._items.length)return!1;const E={};for(const R of this._items)E[R.seq]=R;this._items=[],this.nodes=[];for(const R of v){const w=E[R];this.nodes.push(w.node),this._items.push(w)}return!0}},m.mergeSort=(g,b)=>g.sort===b.sort?0:g.sort<b.sort?-1:1},5380:(o,l,h)=>{const c=h(443),m=h(2178),g={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:c.URL||URL};l.analyze=function(b,d={}){if(!b)return m.code("DOMAIN_NON_EMPTY_STRING");if(typeof b!="string")throw new Error("Invalid input: domain must be a string");if(b.length>256)return m.code("DOMAIN_TOO_LONG");if(g.nonAsciiRx.test(b)){if(d.allowUnicode===!1)return m.code("DOMAIN_INVALID_UNICODE_CHARS");b=b.normalize("NFC")}if(g.domainControlRx.test(b))return m.code("DOMAIN_INVALID_CHARS");b=g.punycode(b),d.allowFullyQualified&&b[b.length-1]==="."&&(b=b.slice(0,-1));const y=d.minDomainSegments||g.minDomainSegments,_=b.split(".");if(_.length<y)return m.code("DOMAIN_SEGMENTS_COUNT");if(d.maxDomainSegments&&_.length>d.maxDomainSegments)return m.code("DOMAIN_SEGMENTS_COUNT_MAX");const v=d.tlds;if(v){const E=_[_.length-1].toLowerCase();if(v.deny&&v.deny.has(E)||v.allow&&!v.allow.has(E))return m.code("DOMAIN_FORBIDDEN_TLDS")}for(let E=0;E<_.length;++E){const R=_[E];if(!R.length)return m.code("DOMAIN_EMPTY_SEGMENT");if(R.length>63)return m.code("DOMAIN_LONG_SEGMENT");if(E<_.length-1){if(!g.domainSegmentRx.test(R))return m.code("DOMAIN_INVALID_CHARS")}else if(!g.tldSegmentRx.test(R))return m.code("DOMAIN_INVALID_TLDS_CHARS")}return null},l.isValid=function(b,d){return!l.analyze(b,d)},g.punycode=function(b){b.includes("%")&&(b=b.replace(/%/g,"%25"));try{return new g.URL(`http://${b}`).host}catch{return b}}},1745:(o,l,h)=>{const c=h(9848),m=h(5380),g=h(2178),b={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(c.TextEncoder||TextEncoder)};l.analyze=function(d,y){return b.email(d,y)},l.isValid=function(d,y){return!b.email(d,y)},b.email=function(d,y={}){if(typeof d!="string")throw new Error("Invalid input: email must be a string");if(!d)return g.code("EMPTY_STRING");const _=!b.nonAsciiRx.test(d);if(!_){if(y.allowUnicode===!1)return g.code("FORBIDDEN_UNICODE");d=d.normalize("NFC")}const v=d.split("@");if(v.length!==2)return v.length>2?g.code("MULTIPLE_AT_CHAR"):g.code("MISSING_AT_CHAR");const[E,R]=v;if(!E)return g.code("EMPTY_LOCAL");if(!y.ignoreLength){if(d.length>254)return g.code("ADDRESS_TOO_LONG");if(b.encoder.encode(E).length>64)return g.code("LOCAL_TOO_LONG")}return b.local(E,_)||m.analyze(R,y)},b.local=function(d,y){const _=d.split(".");for(const v of _){if(!v.length)return g.code("EMPTY_LOCAL_SEGMENT");if(y){if(!b.atextRx.test(v))return g.code("INVALID_LOCAL_CHARS")}else for(const E of v){if(b.atextRx.test(E))continue;const R=b.binary(E);if(!b.atomRx.test(R))return g.code("INVALID_LOCAL_CHARS")}}},b.binary=function(d){return Array.from(b.encoder.encode(d)).map(y=>String.fromCharCode(y)).join("")},b.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,b.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(o,l)=>{l.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},l.code=function(h){return{code:h,error:l.codes[h]}}},9959:(o,l,h)=>{const c=h(375),m=h(5752);l.regex=function(g={}){c(g.cidr===void 0||typeof g.cidr=="string","options.cidr must be a string");const b=g.cidr?g.cidr.toLowerCase():"optional";c(["required","optional","forbidden"].includes(b),"options.cidr must be one of required, optional, forbidden"),c(g.version===void 0||typeof g.version=="string"||Array.isArray(g.version),"options.version must be a string or an array of string");let d=g.version||["ipv4","ipv6","ipvfuture"];Array.isArray(d)||(d=[d]),c(d.length>=1,"options.version must have at least 1 version specified");for(let v=0;v<d.length;++v)c(typeof d[v]=="string","options.version must only contain strings"),d[v]=d[v].toLowerCase(),c(["ipv4","ipv6","ipvfuture"].includes(d[v]),"options.version contains unknown version "+d[v]+" - must be one of ipv4, ipv6, ipvfuture");d=Array.from(new Set(d));const y=`(?:${d.map(v=>{if(b==="forbidden")return m.ip[v];const E=`\\/${v==="ipv4"?m.ip.v4Cidr:m.ip.v6Cidr}`;return b==="required"?`${m.ip[v]}${E}`:`${m.ip[v]}(?:${E})?`}).join("|")})`,_=new RegExp(`^${y}$`);return{cidr:b,versions:d,regex:_,raw:y}}},5752:(o,l,h)=>{const c=h(375),m=h(6064),g={generate:function(){const b={},d="\\dA-Fa-f",y="["+d+"]",_="\\w-\\.~",v="!\\$&'\\(\\)\\*\\+,;=",E="%"+d,R=_+E+v+":@",w="["+R+"]",A="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";b.ipv4address="(?:"+A+"\\.){3}"+A;const x=y+"{1,4}",M="(?:"+x+":"+x+"|"+b.ipv4address+")",V="(?:"+x+":){6}"+M,P="::(?:"+x+":){5}"+M,O="(?:"+x+")?::(?:"+x+":){4}"+M,S="(?:(?:"+x+":){0,1}"+x+")?::(?:"+x+":){3}"+M,C="(?:(?:"+x+":){0,2}"+x+")?::(?:"+x+":){2}"+M,D="(?:(?:"+x+":){0,3}"+x+")?::"+x+":"+M,L="(?:(?:"+x+":){0,4}"+x+")?::"+M,$="(?:(?:"+x+":){0,5}"+x+")?::"+x,j="(?:(?:"+x+":){0,6}"+x+")?::";b.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",b.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",b.ipv6address="(?:"+V+"|"+P+"|"+O+"|"+S+"|"+C+"|"+D+"|"+L+"|"+$+"|"+j+")",b.ipvFuture="v"+y+"+\\.["+_+v+":]+",b.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",b.schemeRegex=new RegExp(b.scheme);const ce="["+_+E+v+":]*",pe="["+_+E+v+"]{1,255}",K="(?:\\[(?:"+b.ipv6address+"|"+b.ipvFuture+")\\]|"+b.ipv4address+"|"+pe+")",ae="(?:"+ce+"@)?"+K+"(?::\\d*)?",ye="(?:"+ce+"@)?("+K+")(?::\\d*)?",Re=w+"*",B=w+"+",re="(?:\\/"+Re+")*",me="\\/(?:"+B+re+")?",he=B+re,_e="["+_+E+v+"@]+"+re,Le="(?:\\/\\/\\/"+Re+re+")";return b.hierPart="(?:(?:\\/\\/"+ae+re+")|"+me+"|"+he+"|"+Le+")",b.hierPartCapture="(?:(?:\\/\\/"+ye+re+")|"+me+"|"+he+")",b.relativeRef="(?:(?:\\/\\/"+ae+re+")|"+me+"|"+_e+"|)",b.relativeRefCapture="(?:(?:\\/\\/"+ye+re+")|"+me+"|"+_e+"|)",b.query="["+R+"\\/\\?]*(?=#|$)",b.queryWithSquareBrackets="["+R+"\\[\\]\\/\\?]*(?=#|$)",b.fragment="["+R+"\\/\\?]*",b}};g.rfc3986=g.generate(),l.ip={v4Cidr:g.rfc3986.ipv4Cidr,v6Cidr:g.rfc3986.ipv6Cidr,ipv4:g.rfc3986.ipv4address,ipv6:g.rfc3986.ipv6address,ipvfuture:g.rfc3986.ipvFuture},g.createRegex=function(b){const d=g.rfc3986,y="(?:\\?"+(b.allowQuerySquareBrackets?d.queryWithSquareBrackets:d.query)+")?(?:#"+d.fragment+")?",_=b.domain?d.relativeRefCapture:d.relativeRef;if(b.relativeOnly)return g.wrap(_+y);let v="";if(b.scheme){c(b.scheme instanceof RegExp||typeof b.scheme=="string"||Array.isArray(b.scheme),"scheme must be a RegExp, String, or Array");const w=[].concat(b.scheme);c(w.length>=1,"scheme must have at least 1 scheme specified");const A=[];for(let x=0;x<w.length;++x){const M=w[x];c(M instanceof RegExp||typeof M=="string","scheme at position "+x+" must be a RegExp or String"),M instanceof RegExp?A.push(M.source.toString()):(c(d.schemeRegex.test(M),"scheme at position "+x+" must be a valid scheme"),A.push(m(M)))}v=A.join("|")}const E="(?:"+(v?"(?:"+v+")":d.scheme)+":"+(b.domain?d.hierPartCapture:d.hierPart)+")",R=b.allowRelative?"(?:"+E+"|"+_+")":E;return g.wrap(R+y,v)},g.wrap=function(b,d){return{raw:b=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${b}`,regex:new RegExp(`^${b}$`),scheme:d}},g.uriRegex=g.createRegex({}),l.regex=function(b={}){return b.scheme||b.allowRelative||b.relativeOnly||b.allowQuerySquareBrackets||b.domain?g.createRegex(b):g.uriRegex}},1447:(o,l)=>{const h={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};l.Parser=class{constructor(c,m={}){if(!m[h.settings]&&m.constants)for(const g in m.constants){const b=m.constants[g];if(b!==null&&!["boolean","number","string"].includes(typeof b))throw new Error(`Formula constant ${g} contains invalid ${typeof b} value type`)}this.settings=m[h.settings]?m:Object.assign({[h.settings]:!0,constants:{},functions:{}},m),this.single=null,this._parts=null,this._parse(c)}_parse(c){let m=[],g="",b=0,d=!1;const y=v=>{if(b)throw new Error("Formula missing closing parenthesis");const E=m.length?m[m.length-1]:null;if(d||g||v){if(E&&E.type==="reference"&&v===")")return E.type="function",E.value=this._subFormula(g,E.value),void(g="");if(v===")"){const R=new l.Parser(g,this.settings);m.push({type:"segment",value:R})}else if(d){if(d==="]")return m.push({type:"reference",value:g}),void(g="");m.push({type:"literal",value:g})}else if(h.operatorCharacters.includes(g))E&&E.type==="operator"&&h.operators.includes(E.value+g)?E.value+=g:m.push({type:"operator",value:g});else if(g.match(h.numberRx))m.push({type:"constant",value:parseFloat(g)});else if(this.settings.constants[g]!==void 0)m.push({type:"constant",value:this.settings.constants[g]});else{if(!g.match(h.tokenRx))throw new Error(`Formula contains invalid token: ${g}`);m.push({type:"reference",value:g})}g=""}};for(const v of c)d?v===d?(y(),d=!1):g+=v:b?v==="("?(g+=v,++b):v===")"?(--b,b?g+=v:y(v)):g+=v:v in h.literals?d=h.literals[v]:v==="("?(y(),++b):h.operatorCharacters.includes(v)?(y(),g=v,y()):v!==" "?g+=v:y();y(),m=m.map((v,E)=>v.type!=="operator"||v.value!=="-"||E&&m[E-1].type!=="operator"?v:{type:"operator",value:"n"});let _=!1;for(const v of m){if(v.type==="operator"){if(h.operatorsPrefix.includes(v.value))continue;if(!_)throw new Error("Formula contains an operator in invalid position");if(!h.operators.includes(v.value))throw new Error(`Formula contains an unknown operator ${v.value}`)}else if(_)throw new Error("Formula missing expected operator");_=!_}if(!_)throw new Error("Formula contains invalid trailing operator");m.length===1&&["reference","literal","constant"].includes(m[0].type)&&(this.single={type:m[0].type==="reference"?"reference":"value",value:m[0].value}),this._parts=m.map(v=>{if(v.type==="operator")return h.operatorsPrefix.includes(v.value)?v:v.value;if(v.type!=="reference")return v.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(v.value))throw new Error(`Formula contains invalid reference ${v.value}`);return this.settings.reference?this.settings.reference(v.value):h.reference(v.value)})}_subFormula(c,m){const g=this.settings.functions[m];if(typeof g!="function")throw new Error(`Formula contains unknown function ${m}`);let b=[];if(c){let d="",y=0,_=!1;const v=()=>{if(!d)throw new Error(`Formula contains function ${m} with invalid arguments ${c}`);b.push(d),d=""};for(let E=0;E<c.length;++E){const R=c[E];_?(d+=R,R===_&&(_=!1)):R in h.literals&&!y?(d+=R,_=h.literals[R]):R!==","||y?(d+=R,R==="("?++y:R===")"&&--y):v()}v()}return b=b.map(d=>new l.Parser(d,this.settings)),function(d){const y=[];for(const _ of b)y.push(_.evaluate(d));return g.call(d,...y)}}evaluate(c){const m=this._parts.slice();for(let g=m.length-2;g>=0;--g){const b=m[g];if(b&&b.type==="operator"){const d=m[g+1];m.splice(g+1,1);const y=h.evaluate(d,c);m[g]=h.single(b.value,y)}}return h.operatorsOrder.forEach(g=>{for(let b=1;b<m.length-1;)if(g.includes(m[b])){const d=m[b],y=h.evaluate(m[b-1],c),_=h.evaluate(m[b+1],c);m.splice(b,2);const v=h.calculate(d,y,_);m[b-1]=v===0?0:v}else b+=2}),h.evaluate(m[0],c)}},l.Parser.prototype[h.symbol]=!0,h.reference=function(c){return function(m){return m&&m[c]!==void 0?m[c]:null}},h.evaluate=function(c,m){return c===null?null:typeof c=="function"?c(m):c[h.symbol]?c.evaluate(m):c},h.single=function(c,m){if(c==="!")return!m;const g=-m;return g===0?0:g},h.calculate=function(c,m,g){if(c==="??")return h.exists(m)?m:g;if(typeof m=="string"||typeof g=="string"){if(c==="+")return(m=h.exists(m)?m:"")+(h.exists(g)?g:"")}else switch(c){case"^":return Math.pow(m,g);case"*":return m*g;case"/":return m/g;case"%":return m%g;case"+":return m+g;case"-":return m-g}switch(c){case"<":return m<g;case"<=":return m<=g;case">":return m>g;case">=":return m>=g;case"==":return m===g;case"!=":return m!==g;case"&&":return m&&g;case"||":return m||g}return null},h.exists=function(c){return c!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:o=>{o.exports=JSON.parse('{"version":"17.13.3"}')}},s={},function o(l){var h=s[l];if(h!==void 0)return h.exports;var c=s[l]={exports:{}};return n[l](c,c.exports,o),c.exports}(5107);var n,s})}(xm)),xm.exports}var rO=nO();const bn=kb(rO),iO=bn.object({email:bn.string().email({tlds:{allow:!1}}).required().label("E-postadress").messages({"string.empty":"E-postadress är obligatoriskt.","string.email":"Ange en giltig e-postadress."}),password:bn.string().min(6).required().label("Lösenord").messages({"string.empty":"Lösenord är obligatoriskt.","string.min":"Lösenordet måste vara minst 6 tecken långt."})});function sO(){const[r,e]=Q.useState(""),[n,s]=Q.useState(""),[o,l]=Q.useState(""),[h,c]=Q.useState({}),[m,g]=Q.useState(!1),b=js(),d=async y=>{y.preventDefault(),l(""),c({});const{error:_}=iO.validate({email:r,password:n},{abortEarly:!1});if(_){const v={};_.details.forEach(E=>{v[E.path[0]]=E.message}),c(v),g(!1);return}g(!0);try{await _3(cg,r,n),b("/admin")}catch{l("Fel e-postadress eller lösenord. Kontrollera dina uppgifter.")}finally{g(!1)}};return q.jsxs("div",{className:"login-bg",children:[q.jsx("div",{className:"login-title",children:"Logga in som admin för att redigera produkter."}),q.jsxs("form",{className:"login-form",onSubmit:d,noValidate:!0,children:[q.jsxs("div",{children:[q.jsx("input",{type:"email",placeholder:"E-postadress",value:r,onChange:y=>e(y.target.value),className:"login-input","aria-invalid":!!h.email}),h.email&&q.jsx("div",{className:"login-error input-error",children:h.email})]}),q.jsxs("div",{children:[q.jsx("input",{type:"password",placeholder:"Lösenord",value:n,onChange:y=>s(y.target.value),className:"login-input","aria-invalid":!!h.password}),h.password&&q.jsx("div",{className:"login-error input-error",children:h.password})]}),q.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Loggar in...":"Logga in"}),o&&q.jsx("div",{className:"login-error general-error",children:o})]})]})}function aO(){return q.jsx(tO,{children:q.jsx(eO,{})})}const Ob=[{value:"Headset",label:"Hörlurar"},{value:"In-Ear",label:"In-Ear"},{value:"gamingheadset",label:"Gaming"},{value:"accessories",label:"Tillbehör"}];function Nb(){const[r,e]=Q.useState(""),[n,s]=Q.useState([]),[o,l]=Q.useState(!1),[h,c]=Q.useState(null),[m,g]=Q.useState(!1),[b,d]=Q.useState(null),[y,_]=Q.useState({name:"",price:"",description:"",image:"",category:""}),[v,E]=Q.useState(!1),[R,w]=Q.useState(""),[A,x]=Q.useState({}),M=js(),P=fp().id;Q.useEffect(()=>{if(!P)return;async function D(){const L=lu(Ss,"Products",P),$=await QE(L);if($.exists()){const j=$.data();d({id:$.id,...j}),_({name:j.name||"",price:j.price||"",description:j.description||"",image:j.image||"",category:j.category||""})}}D()},[P]),Q.useEffect(()=>{if(!r){s([]);return}l(!0);async function D(){const j=(await Jp(nf(Ss,"Products"))).docs.map(ce=>({id:ce.id,...ce.data()})).filter(ce=>ce.category&&ce.category.trim().toLowerCase()===r.trim().toLowerCase());s(j),l(!1)}D()},[r]);const O=async D=>{g(!0),await yD(lu(Ss,"Products",D)),s(n.filter(L=>L.id!==D)),c(null),g(!1)},S=D=>_({...y,[D.target.name]:D.target.value}),C=async D=>{D.preventDefault(),E(!0),w("");try{await gD(lu(Ss,"Products",P),{...y,price:Number(y.price)}),w("Produkten har uppdaterats!")}catch{x({general:"Kunde inte spara ändringarna."})}E(!1)};return P&&b?q.jsxs("form",{className:"add-product-form",onSubmit:C,children:[q.jsx(cn,{to:"/admin/edit",className:"confirm-btn",children:"Tillbaka"}),q.jsx("h2",{className:"edit-title",children:"Redigera produkt"}),q.jsx("input",{name:"name",placeholder:"Namn",value:y.name,onChange:S,required:!0}),q.jsx("input",{name:"price",placeholder:"Pris",value:y.price,onChange:S,required:!0}),q.jsx("input",{name:"description",placeholder:"Beskrivning",value:y.description,onChange:S,required:!0}),q.jsx("input",{name:"image",placeholder:"Bild-URL",value:y.image,onChange:S,required:!0}),q.jsxs("select",{name:"category",value:y.category,onChange:S,required:!0,children:[q.jsx("option",{value:"",children:"Välj kategori"}),Ob.map(D=>q.jsx("option",{value:D.value,children:D.label},D.value))]}),q.jsx("button",{type:"submit",disabled:v,children:"Spara ändringar"}),A.general&&q.jsx("div",{className:"form-error",children:A.general}),R&&q.jsx("div",{className:"form-success",children:R})]}):q.jsx("div",{className:"edit-product-outer",children:q.jsxs("div",{className:"edit-product-box",children:[q.jsx(cn,{to:"/admin",className:"confirm-btn",children:"Tillbaka"}),q.jsx("h2",{className:"edit-title",children:"Redigera produkt"}),q.jsx("div",{className:"edit-category-select",children:q.jsxs("select",{value:r,onChange:D=>e(D.target.value),children:[q.jsx("option",{value:"",children:"Välj kategori"}),Ob.map(D=>q.jsx("option",{value:D.value,children:D.label},D.value))]})}),o&&q.jsx("div",{children:"Laddar produkter..."}),r&&q.jsx("div",{className:"product-grid",children:n.map(D=>q.jsxs("div",{className:"product-card",children:[D.image&&q.jsx("img",{src:D.image,alt:D.name,className:"product-image"}),q.jsx("div",{className:"product-name",children:D.name}),q.jsxs("div",{className:"product-price",children:[D.price," kr"]}),q.jsx("div",{className:"product-description",children:D.description}),q.jsx("button",{className:"edit-btn",onClick:()=>M(`/admin/edit/${D.id}`),children:"Redigera"}),q.jsx("button",{className:"delete-btn",onClick:()=>c(D.id),children:"Ta bort"}),h===D.id&&q.jsxs("div",{className:"delete-confirm",children:[q.jsx("div",{children:"Vill du verkligen ta bort produkten?"}),q.jsx("button",{onClick:()=>O(D.id),disabled:m,children:"Ja"}),q.jsx("button",{onClick:()=>c(null),disabled:m,children:"Nej"})]})]},D.id))})]})})}const oO=bn.object({name:bn.string().min(7).required().label("Namn").messages({"string.empty":"Namn är obligatoriskt","string.min":"Namn måste vara minst 7 tecken"}),price:bn.number().min(0).required().label("Pris").messages({"number.base":"Pris måste vara ett nummer","number.empty":"Pris är obligatoriskt"}),description:bn.string().min(15).required().label("Beskrivning").messages({"string.empty":"Beskrivning är obligatorisk","string.min":"Beskrivning måste vara minst 15 tecken"}),image:bn.string().uri().required().label("Bild-URL").messages({"string.empty":"Bild-URL är obligatorisk","string.uri":"Bild-URL måste vara en giltig länk"}),category:bn.string().required().label("Kategori").messages({"string.empty":"Kategori är obligatorisk"})}),lO=[{value:"Headset",label:"Hörlurar"},{value:"In-Ear",label:"In-Ear"},{value:"gamingheadset",label:"Gaming"},{value:"accessories",label:"Tillbehör"}];function uO(){const[r,e]=Q.useState({name:"",price:"",description:"",image:"",category:""}),[n,s]=Q.useState({}),[o,l]=Q.useState(""),[h,c]=Q.useState(!1),m=d=>e({...r,[d.target.name]:d.target.value}),g=d=>{d.preventDefault(),s({}),l("");const{error:y}=oO.validate({...r,price:Number(r.price)},{abortEarly:!1});if(y){const _={};y.details.forEach(v=>{_[v.path[0]]=v.message}),s(_);return}c(!0)},b=async()=>{c(!1);try{await vD(nf(Ss,"Products"),{...r,price:Number(r.price)}),l("Produkten har lagts till!"),e({name:"",price:"",description:"",image:"",category:""})}catch{s({general:"Kunde inte spara produkten."})}};return q.jsxs("form",{className:"add-product-form",onSubmit:g,noValidate:!0,children:[q.jsx(cn,{to:"/admin",className:"confirm-btn addproduct-back-btn",children:"Tillbaka"}),q.jsx("h2",{className:"addproduct-title",children:"Lägg till produkt"}),q.jsx("input",{name:"name",placeholder:"Namn",value:r.name,onChange:m}),n.name&&q.jsx("div",{className:"form-error",children:n.name}),q.jsx("input",{name:"price",placeholder:"Pris",value:r.price,onChange:m}),n.price&&q.jsx("div",{className:"form-error",children:n.price}),q.jsx("input",{name:"description",placeholder:"Beskrivning",value:r.description,onChange:m}),n.description&&q.jsx("div",{className:"form-error",children:n.description}),q.jsx("input",{name:"image",placeholder:"Bild-URL",value:r.image,onChange:m}),n.image&&q.jsx("div",{className:"form-error",children:n.image}),q.jsxs("select",{name:"category",value:r.category,onChange:m,children:[q.jsx("option",{value:"",children:"Välj kategori"}),lO.map(d=>q.jsx("option",{value:d.value,children:d.label},d.value))]}),n.category&&q.jsx("div",{className:"form-error",children:n.category}),h?q.jsxs(q.Fragment,{children:[q.jsx("button",{type:"button",className:"confirm-btn addproduct-confirm-btn",onClick:b,children:"Ja, lägg till"}),q.jsx("button",{type:"button",className:"cancel-btn addproduct-cancel-btn",onClick:()=>c(!1),children:"Avbryt"})]}):q.jsx("button",{type:"submit",className:"addproduct-submit-btn",children:"Lägg till produkt"}),n.general&&q.jsx("div",{className:"form-error",children:n.general}),o&&q.jsx("div",{className:"form-success",children:o})]})}function cO({product:r}){const e=ws(l=>l.addToCart),[n,s]=Q.useState(!1),o=()=>{e(r),s(!0),setTimeout(()=>s(!1),1200)};return q.jsxs("div",{className:"product-card",children:[r.image&&q.jsx("img",{src:r.image,alt:r.name,className:"product-image"}),q.jsx("div",{className:"product-name",children:r.name}),q.jsxs("div",{className:"product-price",children:[r.price," kr"]}),q.jsx("div",{className:"product-description",children:r.description}),q.jsxs("button",{className:"add-to-cart-btn",onClick:o,children:[q.jsx("img",{src:i2,alt:"Kundvagn",className:"cart-icon"})," ",n?"Tillagd!":"Lägg i kundvagn"]})]})}function hO({category:r,sortBy:e="name"}){const[n,s]=Q.useState([]),[o,l]=Q.useState(!0);Q.useEffect(()=>{async function c(){const g=(await Jp(nf(Ss,"Products"))).docs.map(d=>({id:d.id,...d.data()})),b=r?g.filter(d=>d.category&&d.category.trim().toLowerCase()===r.trim().toLowerCase()):g;s(b),l(!1)}c()},[r]);const h=[...n].sort((c,m)=>e==="price"?(Number(c.price)||0)-(Number(m.price)||0):e==="price-desc"?(Number(m.price)||0)-(Number(c.price)||0):(c.name||"").localeCompare(m.name||"","sv"));return o?q.jsx("div",{children:"Laddar produkter..."}):q.jsx("div",{className:"product-grid",children:h.map(c=>q.jsx(cO,{product:c},c.id))})}const fO={hörlurar:"Headset","in-ear":"In-Ear",gaming:"gamingheadset",accessories:"accessories"};function dO(){const{category:r}=fp(),e=fO[r]||r,[n,s]=Q.useState("name");return q.jsxs("div",{className:"product-page",children:[q.jsxs("div",{className:"sort-controls",children:[q.jsx("label",{htmlFor:"sort-select",className:"sort-label",children:"Sortera efter:"}),q.jsxs("select",{id:"sort-select",value:n,onChange:o=>s(o.target.value),children:[q.jsx("option",{value:"name",children:"Namn (A-Ö)"}),q.jsx("option",{value:"price",children:"Pris (lägst först)"}),q.jsx("option",{value:"price-desc",children:"Pris (högst först)"})]})]}),q.jsx(hO,{category:e,sortBy:n})]})}function mO(){const{id:r}=fp(),[e,n]=Q.useState(null),[s,o]=Q.useState(!0),[l,h]=Q.useState(""),c=ws(d=>d.addToCart),[m,g]=Q.useState(!1);Q.useEffect(()=>{async function d(){o(!0),h("");try{const y=lu(Ss,"Products",r),_=await QE(y);_.exists()?n({id:_.id,..._.data()}):h("Produkten hittades inte.")}catch{h("Kunde inte hämta produktdata.")}o(!1)}d()},[r]);const b=()=>{c(e),g(!0),setTimeout(()=>g(!1),1200)};return s?q.jsx("div",{className:"product-details-loading",children:"Laddar produkt..."}):l?q.jsx("div",{className:"product-details-error",children:l}):e?q.jsxs("div",{className:"product-details-container",children:[q.jsx("h2",{className:"product-details-title",children:e.name}),e.image&&q.jsx("img",{src:e.image,alt:e.name,className:"product-details-img"}),q.jsxs("div",{className:"product-details-price",children:[e.price," kr"]}),q.jsx("div",{className:"product-details-desc",children:e.description}),q.jsxs("div",{className:"product-details-category",children:["Kategori: ",e.category]}),q.jsx("button",{className:"add-to-cart-btn",onClick:b,children:m?"Tillagd!":"Lägg i kundvagn"})]}):null}function pO(){const r=js(),e=ws(s=>s.clearCart),n=()=>{e(),r("/")};return q.jsxs("div",{className:"checkout-thankyou-container",children:[q.jsx("h2",{className:"checkout-thankyou-title",children:"Tack för din beställning!"}),q.jsx("button",{className:"checkout-thankyou-btn",onClick:n,children:"Fortsätt handla"})]})}const gO=bn.object({name:bn.string().trim().min(2).required().label("Namn").messages({"string.empty":"Namn är obligatoriskt.","string.min":"Namn måste vara minst 2 tecken."}),address:bn.string().trim().min(2).required().label("Adress").messages({"string.empty":"Adress är obligatoriskt.","string.min":"Adress måste vara minst 2 tecken."}),zip:bn.string().pattern(/^\d{5}$/).required().label("Postnummer").messages({"string.empty":"Postnummer är obligatoriskt.","string.pattern.base":"Postnummer måste bestå av 5 siffror."}),city:bn.string().trim().min(2).required().label("Ort").messages({"string.empty":"Ort är obligatoriskt.","string.min":"Ort måste vara minst 2 tecken."}),email:bn.string().email({tlds:{allow:!1}}).required().label("E-post").messages({"string.empty":"E-post är obligatoriskt.","string.email":"Ange en giltig e-postadress."}),phone:bn.string().custom((r,e)=>{const n=r.replace(/\s+/g,"");return/^[+]?\d{8,}$/.test(n)?r:e.error("string.pattern.base")},"custom validation").required().label("Telefon").messages({"string.empty":"Telefonnummer är obligatoriskt.","string.pattern.base":"Telefonnummer måste vara minst 8 siffror och endast innehålla siffror (eventuellt +)."})});function yO(){const[r,e]=Q.useState({name:"",address:"",zip:"",city:"",email:"",phone:""}),[n,s]=Q.useState({}),o=js(),l=c=>{const{name:m,value:g}=c.target;e(b=>({...b,[m]:g})),n[m]&&s(b=>({...b,[m]:null}))},h=c=>{c.preventDefault(),s({});const{error:m}=gO.validate(r,{abortEarly:!1});if(m){const g={};m.details.forEach(b=>{g[b.path[0]]=b.message}),s(g);return}o("/thankyou")};return q.jsxs("form",{className:"checkout-form-container",onSubmit:h,noValidate:!0,children:[q.jsx("h2",{className:"checkout-form-title",children:"Fyll i dina uppgifter"}),q.jsx("input",{name:"name",placeholder:"Namn",value:r.name,onChange:l,className:"checkout-form-input","aria-invalid":!!n.name}),n.name&&q.jsx("div",{className:"checkout-form-error",children:n.name}),q.jsx("input",{name:"address",placeholder:"Adress",value:r.address,onChange:l,className:"checkout-form-input","aria-invalid":!!n.address}),n.address&&q.jsx("div",{className:"checkout-form-error",children:n.address}),q.jsx("input",{name:"zip",placeholder:"Postnummer",value:r.zip,onChange:l,className:"checkout-form-input","aria-invalid":!!n.zip}),n.zip&&q.jsx("div",{className:"checkout-form-error",children:n.zip}),q.jsx("input",{name:"city",placeholder:"Ort",value:r.city,onChange:l,className:"checkout-form-input","aria-invalid":!!n.city}),n.city&&q.jsx("div",{className:"checkout-form-error",children:n.city}),q.jsx("input",{name:"email",type:"email",placeholder:"E-post",value:r.email,onChange:l,className:"checkout-form-input","aria-invalid":!!n.email}),n.email&&q.jsx("div",{className:"checkout-form-error",children:n.email}),q.jsx("input",{name:"phone",type:"tel",placeholder:"Telefon",value:r.phone,onChange:l,className:"checkout-form-input","aria-invalid":!!n.phone}),n.phone&&q.jsx("div",{className:"checkout-form-error",children:n.phone}),q.jsx("button",{className:"checkout-form-btn",type:"submit",children:"Slutför beställning"})]})}const vO=aA([{path:"/",Component:G4,children:[{index:!0,Component:W4},{path:"cart",Component:J4},{path:"admin",Component:aO},{path:"login",Component:sO},{path:"admin/edit",Component:Nb},{path:"admin/edit/:id",Component:Nb},{path:"admin/add",Component:uO},{path:"category/:category",Component:dO},{path:"product/:id",Component:mO},{path:"checkout",Component:yO},{path:"thankyou",Component:pO}]}]);cT.createRoot(document.getElementById("root")).render(q.jsx(Q.StrictMode,{children:q.jsx(NS,{router:vO})}));
